(function(ee,te){typeof exports=="object"&&typeof module!="undefined"?module.exports=te():typeof define=="function"&&define.amd?define(te):(ee=typeof globalThis!="undefined"?globalThis:ee||self,ee.ZmhMind=te())})(this,function(){"use strict";function ne(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}const Pe=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),fe=e=>e.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,n,i,o){return"#"+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)+("0"+Number(o).toString(16)).substr(-2)}),me=function(e,t){if(t=t||this.nodeData,t.id===e)return t;if(t.children&&t.children.length)for(let n=0;n<t.children.length;n++){const i=me(e,t.children[n]);if(i)return i}else return null},D=(e,t)=>{if(e.parent=t,e.children)for(let n=0;n<e.children.length;n++)D(e.children[n],e)};function ge(e){if(e.id=U(),e.children)for(let t=0;t<e.children.length;t++)ge(e.children[t])}const Fe=(e,t)=>{var n=Date.now();return function(){var i=this,o=arguments,s=Date.now();s-n>=t&&(e.apply(i,o),n=Date.now())}};function be(e,t,n,i){const o=i-t,s=e-n;let r=Math.atan(Math.abs(o)/Math.abs(s))/3.14*180;s<0&&o>0&&(r=180-r),s<0&&o<0&&(r=180+r),s>0&&o<0&&(r=360-r);const l=20,c=30;var h=r+c;const u=r-c;return{x1:n+Math.cos(Math.PI*h/180)*l,y1:i-Math.sin(Math.PI*h/180)*l,x2:n+Math.cos(Math.PI*u/180)*l,y2:i-Math.sin(Math.PI*u/180)*l}}function le(e,t,n){let i,o;const s=(e.cy-n)/(t-e.cx);return s>e.h/e.w||s<-e.h/e.w?e.cy-n<0?(i=e.cx-e.h/2/s,o=e.cy+e.h/2):(i=e.cx+e.h/2/s,o=e.cy-e.h/2):e.cx-t<0?(i=e.cx+e.w/2,o=e.cy-e.w*s/2):(i=e.cx-e.w/2,o=e.cy+e.w*s/2),{x:i,y:o}}function ae(e,t,n){let i,o;const s=(e.cy-n)/(t-e.cx);return s>e.h/e.w||s<-e.h/e.w?e.cy-n<0?(i=e.cx-e.h/2/s,o=e.cy+e.h/2):(i=e.cx+e.h/2/s,o=e.cy-e.h/2):e.cx-t<0?(i=e.cx+e.w/2,o=e.cy-e.w*s/2):(i=e.cx-e.w/2,o=e.cy+e.w*s/2),{x:i,y:o}}function U(){return(new Date().getTime().toString(16)+Math.random().toString(16).substr(2)).substr(2,16)}function Re(){const e=U();return{topic:this.newTopicName||"new node",id:e}}function Ie(){const e=U();return{topic:this.newTopicName||"new node",id:e,type:"summary",summary:{topicId:e,range:this.currentSummaryNodeArr.map(t=>t.nodeObj.id)}}}function qe(e,t){let n=!0;for(;t.parent;){if(t.parent===e){n=!1;break}t=t.parent}return n}function je(e){const t=e.parent.children,n=t.indexOf(e),i=t[n];n===0?(t[n]=t[t.length-1],t[t.length-1]=i):(t[n]=t[n-1],t[n-1]=i)}function Ve(e){const t=e.parent.children,n=t.indexOf(e),i=t[n];n===t.length-1?(t[n]=t[0],t[0]=i):(t[n]=t[n+1],t[n+1]=i)}function ie(e){const t=e.parent.children,n=t.indexOf(e);return t.splice(n,1),t.length}function _e(e,t){const n=e.parent.children,i=n.indexOf(e);n.splice(i+1,0,t)}function Ye(e,t){const n=e.parent.children,i=n.indexOf(e);n.splice(i,0,t)}function We(e,t){const n=e.parent.children,i=n.indexOf(e);n[i]=t,t.children=[e]}function Ge(e,t){ie(e),t.children?t.children.push(e):t.children=[e]}function Xe(e,t){ie(e);const n=t.parent.children;let i=0;for(let o=0;o<n.length;o++)if(n[o]===t){i=o;break}n.splice(i,0,e)}function Ue(e,t){ie(e);const n=t.parent.children;let i=0;for(let o=0;o<n.length;o++)if(n[o]===t){i=o;break}n.splice(i+1,0,e)}const q={afterMoving:!1,mousedown:!1,lastX:null,lastY:null,onMove(e,t){if(this.mousedown){if(this.afterMoving=!0,!this.lastX){this.lastX=e.pageX,this.lastY=e.pageY;return}const n=this.lastX-e.pageX,i=this.lastY-e.pageY;t.scrollTo(t.scrollLeft+n,t.scrollTop+i),this.lastX=e.pageX,this.lastY=e.pageY}},clear(){this.afterMoving=!1,this.mousedown=!1,this.lastX=null,this.lastY=null}};function J(e){this.dom=e,this.mousedown=!1,this.lastX=null,this.lastY=null}J.prototype.init=function(e,t){this.handleMouseMove=n=>{if(n.stopPropagation(),this.mousedown){if(!this.lastX){this.lastX=n.pageX,this.lastY=n.pageY;return}const i=this.lastX-n.pageX,o=this.lastY-n.pageY;t(i,o),this.lastX=n.pageX,this.lastY=n.pageY}},this.handleMouseDown=n=>{n.stopPropagation(),this.mousedown=!0},this.handleClear=n=>{n.stopPropagation(),this.clear()},e.addEventListener("mousemove",this.handleMouseMove),e.addEventListener("mouseleave",this.handleClear),e.addEventListener("mouseup",this.handleClear),this.dom.addEventListener("mousedown",this.handleMouseDown)},J.prototype.destory=function(e){e.removeEventListener("mousemove",this.handleMouseMove),e.removeEventListener("mouseleave",this.handleClear),e.removeEventListener("mouseup",this.handleClear),this.dom.removeEventListener("mousedown",this.handleMouseDown)},J.prototype.clear=function(){this.mousedown=!1,this.lastX=null,this.lastY=null};const L=document,$=(e,t)=>(t?t.mindElixirBox:L).querySelector(`[data-nodeid=me${e}]`);function xe(e,t,n){e.onpointerdown=i=>{if(!t.classList.contains("selected"))return;const o=i.clientX,s=t.clientWidth-Number(getComputedStyle(t).paddingLeft.replace("px",""))-Number(getComputedStyle(t).paddingRight.replace("px",""));e.onpointermove=r=>{const l=r.clientX;t.style.width=(s+l-o).toString()+"px",e.style.height=n.style.height=t.clientHeight.toString()+"px",t.nodeObj.style||(t.nodeObj.style={}),t.nodeObj.style.width=t.style.width,t.nodeObj.style.controllWidth=e.style.height,r.preventDefault()},e.setPointerCapture(i.pointerId),i.preventDefault()},e.onpointerup=i=>{var o;e.onpointermove=null,e.releasePointerCapture(i.pointerId),(o=this==null?void 0:this.linkDiv)==null||o.call(this)}}const j=function(e,t){var o;const n=L.createElement("widthControllRight"),i=L.createElement("widthControllLeft");if(e.textContent=t.topic,this!=null&&this.widthControll&&(xe.call(this,i,e,n),xe.call(this,n,e,i),e.appendChild(n),e.appendChild(i)),t.style&&(e.style.color=t.style.color||"#2c3e50",e.style.background=t.style.background?t.style.background:(o=t==null?void 0:t.parent)!=null&&o.root?"#ffffff":"inherit",/[a-z]/i.test(t.style.fontSize)?e.style.fontSize=t.style.fontSize:e.style.fontSize=t.style.fontSize+"px",e.style.fontWeight=t.style.fontWeight||"normal",e.style.width=t.style.width||"fit-content",i.style.height=n.style.height=t.style.controllWidth||"29px"),t.image&&t.image.forEach(r=>{const l=L.createElement("img");l.className="image",l.src=r.url,l.style.width=r.width+"px",l.style.height=r.height+"px",l.style.display="block",e.appendChild(l)}),t.hyperLink){const s=L.createElement("a");s.className="hyper-link",s.target="_blank",s.innerHTML='<svg t="1662346495524" style="font-size:20px;margin-left: 3px" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2372" width="22" height="22"><path d="M573.44 640a187.68 187.68 0 0 1-132.8-55.36L416 560l45.28-45.28 24.64 24.64a124.32 124.32 0 0 0 170.08 5.76l1.44-1.28a49.44 49.44 0 0 0 4-3.84l101.28-101.28a124.16 124.16 0 0 0 0-176l-1.92-1.92a124.16 124.16 0 0 0-176 0l-51.68 51.68a49.44 49.44 0 0 0-3.84 4l-20 24.96-49.92-40L480 276.32a108.16 108.16 0 0 1 8.64-9.28l51.68-51.68a188.16 188.16 0 0 1 266.72 0l1.92 1.92a188.16 188.16 0 0 1 0 266.72l-101.28 101.28a112 112 0 0 1-8.48 7.84 190.24 190.24 0 0 1-125.28 48z" fill="#002fa7" p-id="2373"></path><path d="M350.72 864a187.36 187.36 0 0 1-133.28-55.36l-1.92-1.92a188.16 188.16 0 0 1 0-266.72l101.28-101.28a112 112 0 0 1 8.48-7.84 188.32 188.32 0 0 1 258.08 7.84L608 464l-45.28 45.28-24.64-24.64A124.32 124.32 0 0 0 368 478.88l-1.44 1.28a49.44 49.44 0 0 0-4 3.84l-101.28 101.28a124.16 124.16 0 0 0 0 176l1.92 1.92a124.16 124.16 0 0 0 176 0l51.68-51.68a49.44 49.44 0 0 0 3.84-4l20-24.96 50.08 40-20.8 25.12a108.16 108.16 0 0 1-8.64 9.28l-51.68 51.68A187.36 187.36 0 0 1 350.72 864z" fill="#002fa7" p-id="2374"></path></svg>',s.href=t.hyperLink,e.appendChild(s)}if(t.remark){const s=L.createElement("div");s.className="content hidden",s.textContent=t.remark;const r=L.createElement("div");r.className="remark",r.innerHTML='<svg t="1659682144612" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2580" width="200" height="200"><path d="M625.728 57.472c19.264 0 34.688 6.848 48.128 20.16l208.96 207.04c14.272 13.12 21.568 29.568 21.568 49.28v504.576c0 71.808-56.256 127.744-128.576 127.744H252.16c-72.128 0-128.576-55.68-128.576-127.744V184.704c0-71.68 56.256-127.232 128.576-127.232z m-34.304 76.8H252.16c-30.144 0-51.776 21.376-51.776 50.432v653.824c0 29.44 21.888 50.944 51.776 50.944h523.648c30.016 0 51.84-21.632 51.84-50.944l-0.128-464.512H687.488A96 96 0 0 1 591.936 287.36l-0.448-9.216V134.208zM665.6 704a38.4 38.4 0 0 1 0 76.8H294.4a38.4 38.4 0 0 1 0-76.8h371.2z m0-192a38.4 38.4 0 0 1 0 76.8H294.4a38.4 38.4 0 0 1 0-76.8h371.2z m-192-192a38.4 38.4 0 1 1 0 76.8H294.4a38.4 38.4 0 1 1 0-76.8h179.2z m181.824-152.512v110.592a32 32 0 0 0 26.24 31.488l5.76 0.512h111.872L655.424 167.424z" p-id="2581"></path></svg>';let l;s.onmouseover=()=>{clearTimeout(l)},r.onmouseover=()=>{s.classList.remove("hidden")},s.onmouseleave=()=>{l=setTimeout(()=>{s.classList.contains("hidden")||s.classList.add("hidden")},300)},r.onmouseleave=()=>{l=setTimeout(()=>{s.classList.contains("hidden")||s.classList.add("hidden")},300)},r.appendChild(s),e.appendChild(r)}if(t.icons){const s=L.createElement("span");s.className="icons",s.innerHTML=t.icons.filter(r=>r!=="").map(r=>`<span>${ne(r)}</span>`).join(""),e.appendChild(s)}if(t.linkJump&&t.linkJump.forEach(s=>{const r=document.createElement("a");r.className="linkJump",r.title=s.title,r.innerHTML='<svg t="1661493526135" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2220" width="16" height="16"><path d="M1001.175714 593.762001L700.806246 293.324796a76.091491 76.091491 0 0 0-107.566725 0 76.023754 76.023754 0 0 0 0 107.544146l171.713884 171.826779H152.653982v-115.288769a76.046333 76.046333 0 0 0-152.115245 0v152.092666c0 6.931777 2.145012 13.253918 3.951338 19.621218-1.806326 6.389879-3.951339 12.644283-3.951338 19.621218a76.068912 76.068912 0 0 0 76.046333 76.068912h686.020111L593.239521 894.131468a76.046333 76.046333 0 1 0 107.566725 107.566726L1001.175714 701.328726a76.091491 76.091491 0 0 0 0-107.566725z" fill="#1296db" p-id="2221"></path></svg>',r.onclick=()=>{ye.call(this,s.toId)},e.appendChild(r)}),t.tags){const s=L.createElement("div");s.className="tags",s.innerHTML=t.tags.filter(r=>r!=="").map(r=>`<span>${ne(r)}</span>`).join(""),e.appendChild(s)}};function ye(e){let t=this.container.querySelector(`tpc[data-nodeid=me${e}]`);t||(ve(this.nodeData,e),this.layout(),this.linkDiv(),t=this.container.querySelector(`tpc[data-nodeid=me${e}]`)),t.scrollIntoView({block:"center",behavior:"smooth"}),t.className="blink",setTimeout(()=>{t.classList.remove("blink")},3e3)}function ve(e,t){if(e.id===t)return!0;let n=!1;for(const i of e.children||[])ve(i,t)&&(n=!0);return n&&(e.expanded=!0),n}const Je=function(e,t){const n=L.createElement("GRP"),i=this.createTop(e);if(n.appendChild(i),!t&&e.children&&e.children.length>0&&(i.appendChild(Y(e.expanded)),e.expanded!==!1)){const[o]=this.createChildren(e.children);n.appendChild(o)}return{grp:n,top:i}},Ke=function(e,t){const n=L.createElement("SMY"),i=this.createTop(e);if(n.appendChild(i),!t&&e.children&&e.children.length>0&&(i.appendChild(Y(e.expanded)),e.expanded!==!1)){const[o]=this.createChildren(e.children);n.appendChild(o)}return{smy:n,top:i}},Ze=function(e){const t=L.createElement("t"),n=this.createTopic(e);return j.call(this,n,e),t.appendChild(n),t},Qe=function(e){const t=L.createElement("tpc");return t.nodeObj=e,t.dataset.nodeid="me"+e.id,t.draggable=this.draggable,t};function et(e){const t=L.createRange();t.selectNodeContents(e);const n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(t))}function tt(e){var i,o,s,r,l,c,h;if(console.time("createInputDiv"),!e)return;let t=L.createElement("div");const n=e.childNodes[0].textContent;e.appendChild(t),t.id="input-box",t.contentEditable="true",t.spellcheck=!1,t.textContent=n,e.nodeObj.image&&e.nodeObj.image.forEach(m=>{const p=L.createElement("img");p.src=m.url,p.style.width=m.width+"px",p.style.display="block",t.appendChild(p)}),t.style.cssText=`min-width:${e.offsetWidth-22}px;min-height:${e.clientHeight-16}px`,(o=(i=e.nodeObj)==null?void 0:i.style)!=null&&o.width&&(t.style.width="auto"),(((r=(s=e.nodeObj)==null?void 0:s.style)==null?void 0:r.color)==="#ffffff"||((l=e.nodeObj)==null?void 0:l.id)==="root"&&!((h=(c=e.nodeObj)==null?void 0:c.style)!=null&&h.color))&&(t.style.color="#2c3e50"),this.direction===0&&(t.style.right="0"),t.focus(),et(t),this.inputDiv=t,this.bus.fire("operation",{name:"beginEdit",obj:e.nodeObj}),t.addEventListener("keydown",u=>{u.stopPropagation();const m=u.key;if(m==="Enter"||m==="Tab"){if(u.shiftKey)return;u.preventDefault(),this.inputDiv.blur(),this.map.focus()}}),t.addEventListener("blur",()=>{if(!t)return;const u=e.nodeObj,m=t.textContent.trim();if(u.image=[],t.childNodes.forEach(x=>{x.nodeName==="IMG"&&u.image.push({url:x.src,width:x.width,height:x.height})}),m===""&&u.image.length===0?u.topic=n:u.topic=m,t.remove(),this.inputDiv=t=null,m===n&&u.image.length===0)return;e.childNodes[0].textContent=u.topic;const p=e.querySelector("widthControllRight"),g=e.querySelector("widthControllRight");u.style||(u.style={}),u.style.controllWidth=p.style.height=g.style.height=e.clientHeight.toString()+"px",delete u.style.width,this.shapeTpc(e,u),this.linkDiv(),Ne.call(this,this.nodeData,u.id,u.topic),this.bus.fire("operation",{name:"finishEdit",obj:u,origin:n})}),console.timeEnd("createInputDiv")}function Ne(e,t,n){var i;(i=e==null?void 0:e.linkJump)==null||i.forEach(({toId:o},s)=>{if(o===t){e.linkJump[s].title=n;const r=this.container.querySelector(`tpc[data-nodeid=me${e.id}] .linkJump`);r.title=n}});for(const o of e.children||[])Ne.call(this,o,t,n)}const Y=function(e){const t=L.createElement("epd");return t.innerText=e!==!1?"-":"+",t.expanded=e!==!1,t.className=e!==!1?"minus":"",t};function nt(e,t,n){let i;t?i=t:i=L.createElement("children");const o=[];for(let s=0;s<e.length;s++){const r=e[s];if((r==null?void 0:r.type)==="summary"){o.push(r);continue}const l=L.createElement("GRP");n===0?l.className="lhs":n===1?l.className="rhs":n===2&&(r.direction===0?l.className="lhs":r.direction===1&&(l.className="rhs"));const c=this.createTop(r);if(r.children&&r.children.length>0){if(c.appendChild(Y(r.expanded)),l.appendChild(c),r.expanded!==!1){const[h,u]=this.createChildren(r.children);l.appendChild(h),u.forEach(m=>{var g;const{smy:p}=this.createSummary(m);(g=l.children)!=null&&g[2]||l.appendChild(L.createElement("smychildren")),l.children[2].appendChild(p)})}}else l.appendChild(c);i.appendChild(l)}return[i,o]}function it(){console.time("layout"),this.root.innerHTML="",this.box.innerHTML="";const e=this.createTopic(this.nodeData);j.call(this,e,this.nodeData),e.draggable=!1,this.root.appendChild(e);const t=this.nodeData.children;if(!(!t||t.length===0)){if(this.direction===2){let n=0,i=0;t.map(o=>{o.direction===void 0?n<=i?(o.direction=0,n+=1):(o.direction=1,i+=1):o.direction===0?n+=1:i+=1})}this.createChildren(this.nodeData.children,this.box,this.direction),console.timeEnd("layout")}}const F=document,R="http://www.w3.org/2000/svg",ot=function(e){const t=F.createElementNS(R,"path");return t.setAttribute("d",e),t.setAttribute("stroke","#555"),t.setAttribute("fill","none"),t.setAttribute("stroke-width","1"),t.setAttribute("stroke-linecap","square"),t.setAttribute("transform","translate(0.5,-0.5)"),t},K=function(e){const t=F.createElementNS(R,"svg");return t.setAttribute("class",e),t},st=function(e){const t=F.createElementNS(R,"path");return t.setAttribute("d",e),t.setAttribute("fill","none"),t.setAttribute("stroke-linecap","square"),t.setAttribute("stroke","#F6A04D"),t.setAttribute("stroke-width","3"),t.setAttribute("transform","translate(0.5,-0.5)"),t},ke=function(e,t,n,i){const o=F.createElementNS(R,"line");return o.setAttribute("x1",e.toString()),o.setAttribute("y1",t.toString()),o.setAttribute("x2",n.toString()),o.setAttribute("y2",i.toString()),o.setAttribute("stroke","#bbb"),o.setAttribute("fill","none"),o.setAttribute("stroke-width","2"),o},rt=function(e){const t=F.createElementNS(R,"path");return t.setAttribute("d",e),t.setAttribute("stroke","#555"),t.setAttribute("fill","none"),t.setAttribute("stroke-linecap","square"),t.setAttribute("stroke-width","1"),t.setAttribute("transform","translate(0.5,-0.5)"),t},lt=function(e,t){const n=F.createElementNS(R,"g"),i=F.createElementNS(R,"path"),o=F.createElementNS(R,"path");return o.setAttribute("d",t),o.setAttribute("stroke","rgb(235, 95, 82)"),o.setAttribute("fill","none"),o.setAttribute("stroke-linecap","cap"),o.setAttribute("stroke-width","2"),i.setAttribute("d",e),i.setAttribute("stroke","rgb(235, 95, 82)"),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","cap"),i.setAttribute("stroke-width","2"),n.appendChild(i),n.appendChild(o),n};let Z=document,T=1e4,B=1e4,A=1e4,O=1e4,H=40,at='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';function we(){T=1e4,B=1e4,A=1e4,O=1e4,H=40}function Ce(){we();let e=Z.querySelectorAll(".mindbox > grp, root"),t="";for(let s=0;s<e.length;s++){let r=e[s],l=r.getBoundingClientRect(),c=r.offsetTop,h=c+l.height,u=r.offsetLeft,m=u+l.width;c<T&&(T=c),h>B&&(B=h),u<A&&(A=u),m>O&&(O=m),t+=Ee(r)}console.log(T,B,A,O),t+=ht();let n=B-T+H*2,i=O-A+H*2,o=dt(n,i);return t=`<rect x="0" y="0" width="${i}" height="${n}" fill="#f6f6f6"></rect>`+t,o.innerHTML=t,o}function ct(){Z=this.container,we();let e=Z.querySelectorAll(".mindbox > grp, root"),t="";for(let o=0;o<e.length;o++){let s=e[o],r=s.getBoundingClientRect(),l=s.offsetTop,c=l+r.height,h=s.offsetLeft,u=h+r.width;l<T&&(T=l),c>B&&(B=c),h<A&&(A=h),u>O&&(O=u),t+=Ee(s)}console.log(T,B,A,O);let n=B-T,i=O-A;return console.log("svgHeight",n),[n+5,i+5]}function dt(e,t){let n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("height",e),n.setAttribute("width",t),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("version","1.2"),n.setAttribute("xlink","http://www.w3.org/1999/xlink"),n}function ht(){let e=document.querySelector("root"),t=document.querySelector("root > tpc"),n=t.getBoundingClientRect(),i=getComputedStyle(t),o=t.parentNode,s=0,r=0,l=document.querySelector("root > tpc").nodeObj,c=getComputedStyle(o),h=e.offsetTop-T,u=e.offsetLeft-A,m=r+parseInt(c.paddingLeft)+parseInt(n.paddingLeft),p=s+parseInt(c.paddingTop)+parseInt(n.paddingTop)+parseInt(n.fontSize);s+parseInt(c.paddingTop)+parseInt(n.paddingTop);let g=document.querySelector(".svg2nd"),x="";if(l.tags&&l.tags.length){let a=t.querySelectorAll(".tags > span");for(let d=0;d<a.length;d++){let f=a[d],y=f.getBoundingClientRect();x+=`<rect x="${m}" y="${p+4}" rx="5px" ry="5px" width="${y.width}" height="${y.height}" style="fill: #d6f0f8;"></rect>
        <foreignObject x="${m}" y="${p+4}" rx="5px" ry="5px" width="${y.width}" height="${y.height}" > 
          <div sytle="font-size:12px">${f.innerHTML}</div>
        </foreignObject>
      `}}let E="";if(l.icons&&l.icons.length){let a=t.querySelectorAll(".icons > span");for(let d=0;d<a.length;d++){let f=a[d];f.getBoundingClientRect(),E+=`
      <tspan>${f.innerHTML}</tspan>`}}let b="";if(l.image&&l.image.length){let a=tpc.querySelectorAll(".image");for(let d=0;d<a.length;d++){let f=a[d];f.getBoundingClientRect(),b+=`${f.outerHTML}`}}let w=`<g transform="translate(${H-A}, ${H-T})">${g.innerHTML}</g>`;w+=`<g id="root" transform="translate(${u+H}, ${h+H})">
      <rect x="${r}" y="${s}" rx="5px" ry="5px" width="${n.width}" height="${n.height}" style="fill: #00aaff;"></rect>
      <foreignObject x="${r+15}" y="${s+10}" width="${i.width}" height="${i.height}" ">
        <div xmlns="http://www.w3.org/1999/xhtml" style="padding:0;margin:0;font-family:\u5FAE\u8F6F\u96C5\u9ED1;font-size:${i.fontSize};font-weight:${i.fontWeight};color:${i.color};word-break: break-all;line-height: 1">
        ${l.topic}
        ${E}
        ${b}
      </div>
      </foreignObject>
      ${x}
  </g>`;let N=Z.querySelector(".topiclinks");return N&&(w+=`<g transform="translate(${H-A}, ${H-T})">${N.innerHTML}</g>`),w}function Ee(e){let t=e.querySelectorAll("tpc"),n=e.offsetTop-T,i=e.offsetLeft-A,o="",s=e.querySelector(".svg3rd");o+=`<g transform="translate(${i+H}, ${n+H})">`,o+=s?s.innerHTML:"";for(let r=0;r<t.length;r++){let l=t[r],c=l.parentNode,h=l.nodeObj;if(h.root)continue;let u=l.getBoundingClientRect(),m=c.offsetTop,p=c.offsetLeft,g=getComputedStyle(l),x=getComputedStyle(c),E=p+parseInt(x.paddingLeft)+parseInt(g.paddingLeft),b=m+parseInt(x.paddingTop)+parseInt(g.paddingTop)+parseInt(g.fontSize),w=m+parseInt(x.paddingTop)+parseInt(g.paddingTop),N="";g.borderWidth!="0px"&&(N=`<rect x="${p+15}" y="${m}" rx="5px" ry="5px" width="${u.width}" height="${u.height}" style="fill: rgba(0,0,0,0); stroke:#444;stroke-width:1px;"></rect>`);let a="";g.backgroundColor!="rgba(0, 0, 0, 0)"&&(a=`<rect x="${p+15}" y="${m}" rx="5px" ry="5px" width="${u.width}" height="${u.height}" style="fill: ${g.backgroundColor};"></rect>`);let d="";if(h.tags&&h.tags.length){let C=l.querySelectorAll(".tags > span");for(let v=0;v<C.length;v++){let k=C[v],V=k.getBoundingClientRect();d+=`<rect x="${E}" y="${b+4}" rx="5px" ry="5px" width="${V.width}" height="${V.height}" style="fill: #d6f0f8;"></rect>
          <foreignObject x="${E}" y="${b+4}" rx="5px" ry="5px" width="${V.width}" height="${V.height}" > 
            <div sytle="font-size:12px">${k.innerHTML}</div>
          </foreignObject>`}}let f="";if(h.icons&&h.icons.length){let C=l.querySelectorAll(".icons > span");for(let v=0;v<C.length;v++){let k=C[v];k.getBoundingClientRect(),f+=`
        <tspan>${k.innerHTML}</tspan>`}}let y="";if(h.image&&h.image.length){let C=l.querySelectorAll(".image");for(let v=0;v<C.length;v++){let k=C[v];k.getBoundingClientRect(),y+=`${k.outerHTML}`}}o+=`<g id="${h.id}">
      ${N}
      ${a}
      <foreignObject  x="${E}" y="${w}" width="${g.width}" height="${g.height}">
      <div xmlns="http://www.w3.org/1999/xhtml" style="padding:0;margin:0;font-family:\u5FAE\u8F6F\u96C5\u9ED1;font-size:${g.fontSize};font-weight:${g.fontWeight};color:${g.color};word-break: break-all;line-height: 1">
        ${h.topic}
        ${f}
        ${y}
      </div>
      </foreignObject>
      ${d}
  </g>`}return o+="</g>",o}let ut=function(){let e=Ce(),t=URL.createObjectURL(new Blob([at+e.outerHTML.replace(/&nbsp;/g," ")])),n=document.createElement("a");n.href=t,n.download="me-mindmap.svg",n.click()},pt=function(e=this,t="default"){return Z=e.container,Ce()};function oe(e){return e.isFocusMode?e.nodeDataBackup:e.nodeData}const ft=function(e,t,n){if(!!e){if(console.time("selectNode"),typeof e=="string")return this.selectNode($(e));if(this.ctrlRepeat?(e.className==="selected"?e.className="":e.className="selected",console.log(this.currentSummaryNodeArr)):(this.currentNode&&(this.currentNode.className=""),e.className="selected"),this!=null&&this.widthControll){const i=e.querySelector("widthControllRight");i.className="width-controll-right";const o=e.querySelector("widthControllLeft");o.className="width-controll-left"}this.currentNode=e,t?this.bus.fire("selectNewNode",e.nodeObj,n):this.bus.fire("selectNode",e.nodeObj,n),console.timeEnd("selectNode")}},mt=function(){if(this.currentNode&&(this.currentNode.className="",this.widthControll)){const e=this.currentNode.querySelector("widthControllRight");e.className="";const t=this.currentNode.querySelector("widthControllLeft");t.className=""}this.currentNode=null,this.bus.fire("unselectNode")},gt=function(){if(!this.currentNode||this.currentNode.dataset.nodeid==="meroot")return;const e=this.currentNode.parentElement.parentElement.nextSibling;let t;const n=this.currentNode.parentElement.parentElement;if(n.className==="rhs"||n.className==="lhs"){const i=this.mindElixirBox.querySelectorAll("."+n.className),o=Array.from(i).indexOf(n);if(o+1<i.length)t=i[o+1].firstChild.firstChild;else return!1}else if(e)t=e.firstChild.firstChild;else return!1;return this.selectNode(t),!0},bt=function(){if(!this.currentNode||this.currentNode.dataset.nodeid==="meroot")return;const e=this.currentNode.parentElement.parentElement.previousSibling;let t;const n=this.currentNode.parentElement.parentElement;if(n.className==="rhs"||n.className==="lhs"){const i=this.mindElixirBox.querySelectorAll("."+n.className),o=Array.from(i).indexOf(n);if(o-1>=0)t=i[o-1].firstChild.firstChild;else return!1}else if(e)t=e.firstChild.firstChild;else return!1;return this.selectNode(t),!0},xt=function(){if(!this.currentNode)return;const e=this.currentNode.parentElement.nextSibling;if(e&&e.firstChild){const t=e.firstChild.firstChild.firstChild;this.selectNode(t)}},yt=function(){if(!this.currentNode||this.currentNode.dataset.nodeid==="meroot")return;const e=this.currentNode.parentElement.parentElement.parentElement.previousSibling;if(e){const t=e.firstChild;this.selectNode(t)}},vt=function(){const e={direction:this.direction,nodeData:oe(this),linkData:this.linkData};return JSON.stringify(e,(t,n)=>{if(t!=="parent")return t==="from"||t==="to"?n.nodeObj.id:n})},Nt=function(){const e={direction:this.direction,nodeData:oe(this),linkData:this.linkData};return JSON.parse(JSON.stringify(e,(t,n)=>{if(t!=="parent")return t==="from"||t==="to"?n.nodeObj.id:n}))};function Se(e,t,n){t<n?e.expanded=!0:e.expanded=!1;for(const i of e.children||[])Se(i,t+1,n)}const kt=function(){const e=Number(this.container.querySelector(".numberSelection").value)||2,t={direction:this.direction,nodeData:oe(this),linkData:this.linkData,height:ct.call(this),expandDeep:e};return Se(t.nodeData,0,e),JSON.parse(JSON.stringify(t,(n,i)=>{if(n!=="parent")return n==="from"||n==="to"?i.nodeObj.id:i}))},wt=function(){const e=oe(this);let t="# "+e.topic+`

`;function n(i,o){for(let s=0;s<i.length;s++)o<=6?t+="".padStart(o,"#")+" "+i[s].topic+`

`:t+="".padStart(o-7,"	")+"- "+i[s].topic+`
`,i[s].children&&n(i[s].children,o+1)}return n(e.children,2),t},Ct=function(){this.editable=!0},Et=function(){this.editable=!1},St=function(e){this.scaleVal=e,this.map.style.transform="scale("+e+")"};function Lt(e){return e.querySelector("root").offsetWidth||150}function $t(e){return e.querySelector("root").offsetHeight||150}function Tt(e,t){var o,s;const n=((o=e==null?void 0:e.getBoundingClientRect())==null?void 0:o.top)||0,i=((s=t==null?void 0:t.getBoundingClientRect())==null?void 0:s.top)||n;return Math.abs(n-i)}function At(e){const t=e.querySelector("root"),n=e.querySelector(".map-canvas children grp");return Tt(t,n)}const Mt=function(){this.container.scrollTo(1e4-this.container.offsetWidth/2,1e4-this.container.offsetHeight/2)},Dt=function(){var e;((e=this.nodeData)==null?void 0:e.children.length)>0?this.container.scrollTo(1e4-Lt(this.container)/2-10,1e4-$t(this.container)/2-At(this.container)-5):this.container.scrollTo(1e4-this.container.offsetWidth/2,1e4-this.container.offsetHeight/2)},Ht=function(e){e.nodeObj.root||(this.tempDirection===null&&(this.tempDirection=this.direction),this.isFocusMode||(this.nodeDataBackup=this.nodeData,this.isFocusMode=!0),this.nodeData=e.nodeObj,this.nodeData.root=!0,this.initRight())},Bt=function(){this.isFocusMode=!1,this.tempDirection!==null&&(delete this.nodeData.root,this.nodeData=this.nodeDataBackup,this.direction=this.tempDirection,this.tempDirection=null,this.init())},Ot=function(){this.direction=0,this.init()},zt=function(){this.direction=1,this.init()},Pt=function(){this.direction=2,this.init()},Ft=function(e){this.locale=e,this.init()},Rt=function(e,t){const n=e.nodeObj;typeof t=="boolean"?n.expanded=t:n.expanded!==!1?n.expanded=!1:(n.expanded=!0,ce(n)),this.layout(),this.linkDiv(),this.bus.fire("expandNode",n)},It=function(){this.addParentLink(this.nodeData),this.layout(),this.linkDiv()};function ce(e){e.expanded=!0;for(const t of e.children||[])ce(t)}const W=document,qt=function(e){if(!e.style)return;const t=$(e.id,this),n={color:t.style.color&&fe(t.style.color),background:t.style.background&&fe(t.style.background),fontSize:t.style.fontSize&&t.style.fontSize+"px",fontWeight:t.style.fontWeight};t.style.color=e.style.color,t.style.background=e.style.background,t.style.fontSize=e.style.fontSize+"px",t.style.fontWeight=e.style.fontWeight||"normal",this.linkDiv(),this.bus.fire("operation",{name:"editStyle",obj:e,origin:n})},jt=function(e,t){if(!t)return;const n=e.tags;t.length===0?delete e.tags:e.tags=t;const i=$(e.id);j.call(this,i,e),this.linkDiv(),this.bus.fire("operation",{name:"editTags",obj:e,origin:n})},Vt=function(e,t){if(!t)return;const n=e.icons;e.icons=t;const i=$(e.id);j.call(this,i,e),this.linkDiv(),this.bus.fire("operation",{name:"editIcons",obj:e,origin:n})},_t=function(e,t){var s,r,l;if(t==null||t==null)return;const n=e.hyperLink,i=t.split(",");e.linkJump=(s=e.linkJump)==null?void 0:s.filter(c=>!!i.find(h=>h===c.title)),((r=e.linkJump)==null?void 0:r.length)===0&&delete e.linkJump,e.hyperLink=i.filter(c=>{var h;return c!==""&&!((h=e.linkJump)!=null&&h.find(u=>u.title===c))}),((l=e.hyperLink)==null?void 0:l.length)===0&&delete e.hyperLink;const o=$(e.id);j.call(this,o,e),this.linkDiv(),this.bus.fire("operation",{name:"editHyperLink",obj:e,origin:n})},Yt=function(e,t){if(t==null||t==null)return;const n=e.remark;e.remark=t;const i=$(e.id);j.call(this,i,e),this.linkDiv(),this.bus.fire("operation",{name:"editRemark",obj:e,origin:n})},Wt=function(e,t){const n=e||this.currentNode;if(!n)return;const i=n.nodeObj;if(i.root===!0){this.addChild();return}const o=t||this.generateNewObj();_e(i,o),D(this.nodeData);const s=n.parentElement;console.time("insertSibling_DOM");const{grp:r,top:l}=this.createGroup(o),c=s.parentNode.parentNode;c.insertBefore(r,s.parentNode.nextSibling),c.className==="mindbox"?(this.processPrimaryNode(r,o),this.linkDiv()):this.linkDiv(r.offsetParent),t||this.createInputDiv(l.children[0]),this.selectNode(l.children[0],!0),console.timeEnd("insertSibling_DOM"),this.bus.fire("operation",{name:"insertSibling",obj:o})},Gt=function(e,t){const n=e||this.currentNode;if(!n)return;const i=n.nodeObj;if(i.root===!0){this.addChild();return}const o=t||this.generateNewObj();Ye(i,o),D(this.nodeData);const s=n.parentElement;console.time("insertSibling_DOM");const{grp:r,top:l}=this.createGroup(o),c=s.parentNode.parentNode;c.insertBefore(r,s.parentNode),c.className==="mindbox"?(this.processPrimaryNode(r,o),this.linkDiv()):this.linkDiv(r.offsetParent),t||this.createInputDiv(l.children[0]),this.selectNode(l.children[0],!0),console.timeEnd("insertSibling_DOM"),this.bus.fire("operation",{name:"insertSibling",obj:o})},Xt=function(e,t){const n=e||this.currentNode;if(!n)return;const i=n.nodeObj;if(i.root===!0)return;const o=t||this.generateNewObj();We(i,o),D(this.nodeData);const s=n.parentElement.parentElement;console.time("insertParent_DOM");const{grp:r,top:l}=this.createGroup(o,!0);l.appendChild(Y(!0));const c=s.parentNode;s.insertAdjacentElement("afterend",r);const h=W.createElement("children");h.appendChild(s),l.insertAdjacentElement("afterend",h),c.className==="mindbox"?(r.className=s.className,s.className="",s.querySelector(".svg3rd").remove(),this.linkDiv()):this.linkDiv(r.offsetParent),t||this.createInputDiv(l.children[0]),this.selectNode(l.children[0],!0),console.timeEnd("insertParent_DOM"),this.bus.fire("operation",{name:"insertParent",obj:o})},Ut=function(e,t){var l;if(!e)return;const n=e.nodeObj,i=t||this.generateNewSummaryObj();n.parent.children.push(i),D(this.nodeData);const o=e.parentNode.parentNode.parentNode.parentNode,{smy:s,top:r}=this.createSummary(i);if(!((l=o.children)!=null&&l.smychildren)){const c=W.createElement("smychildren");c.setAttribute("name","smychildren"),o.appendChild(c)}return o.children.smychildren.appendChild(s),this.layout(),this.linkDiv(),{newTop:r,newNodeObj:i}},Le=function(e,t){if(!e)return;const n=e.nodeObj;n.expanded===!1&&(this.expandNode(e,!0),e=$(n.id));const i=t||this.generateNewObj();n.children?n.children.push(i):n.children=[i],D(this.nodeData);const o=e.parentElement,{grp:s,top:r}=this.createGroup(i);if(o.tagName==="T"){if(o.children[1])o.nextSibling.appendChild(s);else{const l=W.createElement("children");l.appendChild(s),o.appendChild(Y(!0)),o.insertAdjacentElement("afterend",l)}this.layout(),this.linkDiv(s.offsetParent)}else o.tagName==="ROOT"&&(this.processPrimaryNode(s,i),o.nextSibling.appendChild(s),this.linkDiv());return{newTop:r,newNodeObj:i}},Jt=function(e,t){console.time("addSummary");const n={},i=[];this.container.querySelectorAll("tpc.selected").forEach(o=>{var s,r;(s=n[o.nodeObj.parent.id])!=null||(n[o.nodeObj.parent.id]=i.length),i[n[o.nodeObj.parent.id]]=(r=i[n[o.nodeObj.parent.id]])!=null?r:[],i[n[o.nodeObj.parent.id]].push(o)}),console.log(i),i.forEach(o=>{var c,h,u;const s=o[0]||this.currentNode;if(this.currentSummaryNodeArr=o,!s||((u=(h=(c=s==null?void 0:s.parentElement)==null?void 0:c.parentElement)==null?void 0:h.parentElement)==null?void 0:u.className)=="mindbox")return;const{newTop:r,newNodeObj:l}=Ut.call(this,s,t);console.timeEnd("addSummary"),t||this.createInputDiv(r.children[0]),this.selectNode(r.children[0],!0),this.bus.fire("operation",{name:"addSummary",obj:l})})},Kt=function(e,t){console.time("addChild");const n=e||this.currentNode;if(!n)return;const{newTop:i,newNodeObj:o}=Le.call(this,n,t);console.timeEnd("addChild"),t||this.createInputDiv(i.children[0]),this.selectNode(i.children[0],!0),this.bus.fire("operation",{name:"addChild",obj:o})},Zt=function(e,t){console.time("copyNode");const n=JSON.parse(JSON.stringify(e.nodeObj,(o,s)=>{if(o!=="parent")return s}));ge(n);const{newNodeObj:i}=Le.call(this,t,n);console.timeEnd("copyNode"),this.bus.fire("operation",{name:"copyNode",obj:i})},Qt=function(e){const t=e||this.currentNode;if(!t)return;const n=t.parentNode.parentNode,i=t.nodeObj;je(i),n.parentNode.insertBefore(n,n.previousSibling),this.linkDiv(),this.bus.fire("operation",{name:"moveUpNode",obj:i})},en=function(e){const t=e||this.currentNode;if(!t)return;const n=t.parentNode.parentNode,i=t.nodeObj;Ve(i),n.nextSibling?n.insertAdjacentElement("beforebegin",n.nextSibling):n.parentNode.prepend(n),this.linkDiv(),this.bus.fire("operation",{name:"moveDownNode",obj:i})},tn=function(e){const t=e||this.currentNode;if(!t)return;const n=t.nodeObj;if(n.root===!0)throw new Error("Can not remove root node");const i=n.parent.children.findIndex(c=>c===n),o=n.parent.children[i+1],s=o&&o.id,r=ie(n),l=t.parentNode;if(l.tagName!=="ROOT"){if(r===0){const c=l.parentNode.parentNode.previousSibling;c.tagName!=="ROOT"&&c.children[1].remove(),this.selectParent()}else this.selectPrevSibling()||this.selectNextSibling();for(const c in this.linkData){const h=this.linkData[c];(h.from===l.firstChild||h.to===l.firstChild)&&this.removeLink(this.mindElixirBox.querySelector(`[data-linkid=${this.linkData[c].id}]`))}l.parentNode.remove(),this.linkDiv(),this.bus.fire("operation",{name:"removeNode",obj:n,originSiblingId:s,originParentId:n.parent.id})}},nn=function(e,t){const n=e.nodeObj,i=t.nodeObj,o=n.parent.id;if(i.expanded===!1&&(this.expandNode(t,!0),e=$(n.id),t=$(i.id)),!qe(n,i)){console.warn("Invalid move");return}console.time("moveNode"),Ge(n,i),D(this.nodeData);const s=e.parentElement,r=s.parentNode.parentNode,l=t.parentElement;if(r.className==="mindbox"?s.parentNode.lastChild.remove():s.parentNode.className==="mindbox"&&(s.style.cssText=""),l.tagName==="T")if(r.className==="mindbox"&&(s.parentNode.className=""),l.children[1])l.nextSibling.appendChild(s.parentNode);else{const c=W.createElement("children");c.appendChild(s.parentNode),l.appendChild(Y(!0)),l.parentElement.insertBefore(c,l.nextSibling)}else l.tagName==="ROOT"&&(this.processPrimaryNode(s.parentNode,n),l.nextSibling.appendChild(s.parentNode));this.linkDiv(),this.bus.fire("operation",{name:"moveNode",obj:{fromObj:n,toObj:i,originParentId:o}}),console.timeEnd("moveNode")},on=function(e,t){const n=e.nodeObj,i=t.nodeObj,o=n.parent.id;Xe(n,i),D(this.nodeData);const s=e.parentElement,r=s.parentNode,l=t.parentElement,c=l.parentNode;l.parentNode.parentNode.insertBefore(r,c),this.processPrimaryNode(s.parentElement,n),this.linkDiv(),this.bus.fire("operation",{name:"moveNodeBefore",obj:{fromObj:n,toObj:i,originParentId:o}})},sn=function(e,t){const n=e.nodeObj,i=t.nodeObj,o=n.parent.id;Ue(n,i),D(this.nodeData);const s=e.parentElement,r=s.parentNode,l=t.parentElement,c=l.parentNode;l.parentNode.parentNode.insertBefore(r,c.nextSibling),this.processPrimaryNode(s.parentElement,n),this.linkDiv(),this.bus.fire("operation",{name:"moveNodeAfter",obj:{fromObj:n,toObj:i,originParentId:o}})},rn=function(e){const t=e||this.currentNode;!t||this.createInputDiv(t)},ln=function(e,t){e.childNodes[0].textContent=t,e.nodeObj.topic=t,this.linkDiv()};function an(e,t){if(this.direction===0)e.className="lhs";else if(this.direction===1)e.className="rhs";else if(this.direction===2){const n=W.querySelectorAll(".lhs").length,i=W.querySelectorAll(".rhs").length;n<=i?(e.className="lhs",t.direction=0):(e.className="rhs",t.direction=1)}}const cn=function(e,t,n,i){const o=this.map.getBoundingClientRect();if(!e||!t)return;const s=e.getBoundingClientRect(),r=t.getBoundingClientRect(),l=(s.x+s.width/2-o.x)/this.scaleVal,c=(s.y+s.height/2-o.y)/this.scaleVal,h=(r.x+r.width/2-o.x)/this.scaleVal,u=(r.y+r.height/2-o.y)/this.scaleVal;let m,p,g,x;n?(m=l+i.delta1.x,p=c+i.delta1.y,g=h+i.delta2.x,x=u+i.delta2.y):(c+u)/2-c<=s.height/2?(m=(s.x+s.width-o.x)/this.scaleVal+100,p=c,g=(r.x+r.width-o.x)/this.scaleVal+100,x=u):(m=(l+h)/2,p=(c+u)/2,g=(l+h)/2,x=(c+u)/2);const E={cx:l,cy:c,w:s.width,h:s.height},b={cx:h,cy:u,w:r.width,h:r.height},w=le(E,m,p),N=w.x,a=w.y,d=ae(b,g,x),f=d.x,y=d.y,C=be(g,x,f,y),v=lt(`M ${N} ${a} C ${m} ${p} ${g} ${x} ${f} ${y}`,`M ${C.x1} ${C.y1} L ${f} ${y} L ${C.x2} ${C.y2}`);let k;n?(k={id:i.id,label:"",from:e,to:t,delta1:{x:m-l,y:p-c},delta2:{x:g-h,y:x-u}},this.linkData[i.id]=k,v.linkObj=k,v.dataset.linkid=i.id):(k={id:U(),label:"",from:e,to:t,delta1:{x:m-l,y:p-c},delta2:{x:g-h,y:x-u}},this.linkData[k.id]=k,v.linkObj=k,v.dataset.linkid=k.id,this.currentLink=v),this.linkSvgGroup.appendChild(v),n||this.showLinkController(m,p,g,x,k,E,b)},dn=function(e){let t;if(e?t=e:t=this.currentLink,!t)return;this.hideLinkController();const n=t.linkObj.id;delete this.linkData[n],t.remove(),t=null},hn=function(e){this.currentLink=e;const t=e.linkObj,n=t.from,i=t.to,o=this.map.getBoundingClientRect(),s=n.getBoundingClientRect(),r=i.getBoundingClientRect(),l=(s.x+s.width/2-o.x)/this.scaleVal,c=(s.y+s.height/2-o.y)/this.scaleVal,h=(r.x+r.width/2-o.x)/this.scaleVal,u=(r.y+r.height/2-o.y)/this.scaleVal,m={cx:l,cy:c,w:s.width,h:s.height},p={cx:h,cy:u,w:r.width,h:r.height},g=l+t.delta1.x,x=c+t.delta1.y,E=h+t.delta2.x,b=u+t.delta2.y;this.showLinkController(g,x,E,b,t,m,p)},un=function(){this.linkController.style.display="none",this.P2.style.display="none",this.P3.style.display="none"},pn=function(e,t,n,i,o,s,r){this.linkController.style.display="initial",this.P2.style.display="initial",this.P3.style.display="initial";const l=le(s,e,t);let c=l.x,h=l.y;const u=ae(r,n,i);let m=u.x,p=u.y;this.P2.style.cssText=`top:${t}px;left:${e}px;`,this.P3.style.cssText=`top:${i}px;left:${n}px;`,this.line1.setAttribute("x1",c),this.line1.setAttribute("y1",h),this.line1.setAttribute("x2",e),this.line1.setAttribute("y2",t),this.line2.setAttribute("x1",n),this.line2.setAttribute("y1",i),this.line2.setAttribute("x2",m),this.line2.setAttribute("y2",p),this.helper1&&(this.helper1.destory(this.map),this.helper2.destory(this.map)),this.helper1=new J(this.P2),this.helper2=new J(this.P3),this.helper1.init(this.map,(g,x)=>{e=e-g/this.scaleVal,t=t-x/this.scaleVal;const E=le(s,e,t);c=E.x,h=E.y,this.P2.style.top=t+"px",this.P2.style.left=e+"px",this.currentLink.children[0].setAttribute("d",`M ${c} ${h} C ${e} ${t} ${n} ${i} ${m} ${p}`),this.line1.setAttribute("x1",c),this.line1.setAttribute("y1",h),this.line1.setAttribute("x2",e),this.line1.setAttribute("y2",t),o.delta1.x=e-s.cx,o.delta1.y=t-s.cy}),this.helper2.init(this.map,(g,x)=>{n=n-g/this.scaleVal,i=i-x/this.scaleVal;const E=ae(r,n,i);m=E.x,p=E.y;const b=be(n,i,m,p);this.P3.style.top=i+"px",this.P3.style.left=n+"px",this.currentLink.children[0].setAttribute("d",`M ${c} ${h} C ${e} ${t} ${n} ${i} ${m} ${p}`),this.currentLink.children[1].setAttribute("d",`M ${b.x1} ${b.y1} L ${m} ${p} L ${b.x2} ${b.y2}`),this.line2.setAttribute("x1",n),this.line2.setAttribute("y1",i),this.line2.setAttribute("x2",m),this.line2.setAttribute("y2",p),o.delta2.x=n-r.cx,o.delta2.y=i-r.cy})};function fn(e){var b,w;var t=this.primaryNodeHorizontalGap||65,n=this.primaryNodeVerticalGap||25;console.time("linkDiv");const i=this.root;i.style.cssText=`top:${1e4-i.offsetHeight/2}px;left:${1e4-i.offsetWidth/2}px;`;const o=this.box.children;this.svg2nd.innerHTML="";let s=0,r,l=0,c=0,h=0,u=0,m=0,p;if(this.direction===2){let N=0,a=0,d=0,f=0;for(let y=0;y<o.length;y++){const C=o[y];C.className==="lhs"?(u+=C.offsetHeight+n,d+=C.offsetHeight,N+=1):(m+=C.offsetHeight+n,f+=C.offsetHeight,a+=1)}u>m?(p=1e4-Math.max(u)/2,r="r",l=(u-f)/(a-1)):(p=1e4-Math.max(m)/2,r="l",l=(m-d)/(N-1))}else{for(let N=0;N<o.length;N++)s+=o[N].offsetHeight+n;p=1e4-s/2}let g="";const x=1e4-i.offsetWidth/2-t+60,E=1e4+i.offsetWidth/2+t-60;for(let N=0;N<o.length;N++){let a,d;const f=o[N],y=f.offsetHeight;let C=i.offsetLeft-10;if(f.className==="lhs"){f.style.top=p+c+"px",f.style.left=x-f.offsetWidth+"px",a=x-15,d=p+c+y/2;let k=1e4;this.primaryLinkStyle===2?(this.direction===2&&(k=1e4-i.offsetWidth/6),d<1e4?g+=`M ${k} 10000 V ${d+20} C ${k} ${d} ${k} ${d} ${k-20} ${d} H ${a}`:g+=`M ${k} 10000 V ${d-20} C ${k} ${d} ${k} ${d} ${k-20} ${d} H ${a}`):g+=`M 10000 10000 H ${C} V ${d} H ${a}`,r==="l"?c+=y+l:c+=y+n}else{C=i.offsetLeft+i.offsetWidth+10,f.style.top=p+h+"px",f.style.left=E+"px",a=E+15,d=p+h+y/2;let k=1e4;this.primaryLinkStyle===2?(this.direction===2&&(k=1e4+i.offsetWidth/6),d<1e4?g+=`M ${k} 10000 V ${d+20} C ${k} ${d} ${k} ${d} ${k+20} ${d} H ${a}`:g+=`M ${k} 10000 V ${d-20} C ${k} ${d} ${k} ${d} ${k+20} ${d} H ${a}`):g+=`M 10000 10000 H ${C} V ${d} H ${a}`,r==="r"?h+=y+l:h+=y+n}const v=f.children[0].children[1];v&&(v.style.top=(v.parentNode.offsetHeight-v.offsetHeight)/2+"px",f.className==="lhs"?v.style.left=-10+"px":v.style.left=v.parentNode.offsetWidth-10+"px")}this.svg2nd.appendChild(ot(g));for(let N=0;N<o.length;N++){const a=o[N];if(!(e&&e!==o[N])&&a.childElementCount){const d=K("svg3rd"),f=K("svg3rd");a.querySelectorAll(".svg3rd").forEach(v=>{v.remove()}),a.appendChild(d);const y=a.children[0];let C;((w=(b=a.children)==null?void 0:b[2])==null?void 0:w.tagName)==="SMYCHILDREN"?C=[...a.children[1].children,...a.children[2].children]:C=a.children[1].children,I="",se="",$e(C,y,this.nodeData.children[N],!0),d.appendChild(rt(I)),se.length>0&&(a.appendChild(f),f.appendChild(st(se)))}}this.linkSvgGroup.innerHTML="";for(const N in this.linkData){const a=this.linkData[N];typeof a.from=="string"?this.createLink($(a.from),$(a.to),!0,a):this.createLink($(a.from.nodeObj.id),$(a.to.nodeObj.id),!0,a)}console.timeEnd("linkDiv")}let I="",se="";function $e(e,t,n,i){var c,h,u;const o=t.offsetTop,s=t.offsetLeft,r=t.offsetWidth,l=t.offsetHeight;for(let m=0;m<e.length;m++){const p=e[m];if((p==null?void 0:p.tagName)==="SMY"){let v=e[0],k=e[m-1];const V={};n.children[m].summary.range.forEach(_=>{V[_]=!0});let He=!0;for(let _=0;_<m;_++){const Hn=e[_].children[0].children[0].getAttribute("data-nodeid").slice(2);V[Hn]&&(He&&(He=!1,v=e[_]),k=e[_])}const Be=v.offsetLeft+v.offsetWidth+8,Oe=v.offsetTop+v.offsetHeight*.7,ze=k.offsetTop+k.offsetHeight*.7,Mn=k.offsetLeft+k.offsetWidth+8,Dn=p.offsetTop+p.offsetHeight*.7;let re=(c=p.style.top)!=null?c:0;typeof re=="string"&&(re=Number(re.replace("px",""))),p.style.top=re+(ze+Oe)/2-Dn+"px",se+=`M ${Be} ${Oe} H ${Be+10} V ${ze} H${Mn}`}const g=p.children[0],x=g.offsetTop,E=g.offsetHeight;let b;i?b=o+l/2:b=o+l;const w=x+E;let N,a,d;const f=p.offsetParent.className;f==="lhs"&&(p==null?void 0:p.tagName)!=="SMY"?(N=s+15,d=s,a=s-g.offsetWidth,x+E<o+l/2+50&&x+E>o+l/2-50?I+=`M ${N} ${b} H ${d} V ${w} H ${a}`:x+E>=o+l/2?I+=`M ${N} ${b} H ${d} V ${w} H ${a}`:I+=`M ${N} ${b} H ${d} V ${w} H ${a}`):f==="rhs"&&(p==null?void 0:p.tagName)!=="SMY"&&(N=s+r-15,d=s+r,a=s+r+g.offsetWidth,x+E<o+l/2+50&&x+E>o+l/2-50?I+=`M ${N} ${b} H ${d} V ${w} H ${a}`:x+E>=o+l/2?I+=`M ${N} ${b} H ${d} V ${w} H ${a}`:I+=`M ${N} ${b} H ${d} V ${w} H ${a}`);const y=g.children[1];if(y){if(y.style.top=(g.offsetHeight-y.offsetHeight)/2+"px",f==="lhs"?y.style.left=-10+"px":f==="rhs"&&(y.style.left=g.offsetWidth-10+"px"),!y.expanded)continue}else continue;let C;((u=(h=p.children)==null?void 0:h[2])==null?void 0:u.tagName)==="SMYCHILDREN"?C=[...p.children[1].children,...p.children[2].children]:C=[...p.children[1].children],C.length>0&&$e(C,g,n.children[m])}}function mn(e){e.map.addEventListener("click",t=>{t.target.nodeName==="EPD"?e.expandNode(t.target.previousSibling):t.target.parentElement.nodeName==="T"||t.target.parentElement.nodeName==="ROOT"?e.selectNode(t.target,!1,t):t.target.nodeName==="path"?t.target.parentElement.nodeName==="g"&&e.selectLink(t.target.parentElement):t.target.className==="circle"||(e.unselectNode(),e.container.querySelectorAll("tpc.selected").forEach(n=>{n.className=""}),e.hideLinkController())}),e.map.addEventListener("dblclick",t=>{if(t.preventDefault(),!!e.editable){if(t.target.parentElement.nodeName==="T"||t.target.parentElement.nodeName==="ROOT")e.beginEdit(t.target);else if(t.target.className!=="content"){let n=t.target;for(;n.parentElement;)if(n=n.parentElement,n.nodeName==="TPC"){e.beginEdit(n);break}}}}),e.map.addEventListener("mousemove",t=>{if(!e.nodeDraggable&&t&&t.target.className==="selected"){q.clear(),t.target.draggable=!1;return}t.target.contentEditable!=="true"&&q.onMove(t,e.container)}),e.map.addEventListener("mousedown",t=>{t.target.contentEditable!=="true"&&(q.afterMoving=!1,q.mousedown=!0)}),e.map.addEventListener("mouseleave",t=>{q.clear()}),e.map.addEventListener("mouseup",t=>{q.clear()}),e.map.addEventListener("wheel",t=>{})}const Te={addChild:"\u63D2\u5165\u5B50\u8282\u70B9",addParent:"\u63D2\u5165\u7236\u8282\u70B9",addSibling:"\u63D2\u5165\u540C\u7EA7\u8282\u70B9",removeNode:"\u5220\u9664\u8282\u70B9",focus:"\u4E13\u6CE8",cancelFocus:"\u53D6\u6D88\u4E13\u6CE8",moveUp:"\u4E0A\u79FB",moveDown:"\u4E0B\u79FB",clickTips:"\u8BF7\u70B9\u51FB\u76EE\u6807\u8282\u70B9",font:"\u6587\u5B57",background:"\u80CC\u666F",tag:"\u6807\u7B7E",icon:"\u56FE\u6807",tagsSeparate:"\u591A\u4E2A\u6807\u7B7E\u534A\u89D2\u9017\u53F7\u5206\u9694",iconsSeparate:"\u591A\u4E2A\u56FE\u6807\u534A\u89D2\u9017\u53F7\u5206\u9694",link:"\u8FDE\u7EBF",nodeLink:"\u4E3B\u9898\u5185\u8D85\u94FE\u63A5",hyperlink:"\u8D85\u94FE\u63A5",linkSeparate:"\u94FE\u63A5\u5730\u5740,\u591A\u4E2A\u94FE\u63A5\u534A\u89D2\u9017\u53F7\u5206\u9694",remark:"\u5907\u6CE8",reamrkSeparate:"\u5185\u5BB9",summary:"\u6982\u8981"};var S={cn:Te,zh_CN:Te,zh_TW:{addChild:"\u63D2\u5165\u5B50\u7BC0\u9EDE",addParent:"\u63D2\u5165\u7236\u7BC0\u9EDE",addSibling:"\u63D2\u5165\u540C\u7D1A\u7BC0\u9EDE",removeNode:"\u522A\u9664\u7BC0\u9EDE",focus:"\u5C08\u6CE8",cancelFocus:"\u53D6\u6D88\u5C08\u6CE8",moveUp:"\u4E0A\u79FB",moveDown:"\u4E0B\u79FB",link:"\u9023\u63A5",clickTips:"\u8ACB\u9EDE\u64CA\u76EE\u6A19\u7BC0\u9EDE",font:"\u6587\u5B57",background:"\u80CC\u666F",tag:"\u6A19\u7C3D",icon:"\u5716\u6A19",tagsSeparate:"\u591A\u500B\u6A19\u7C3D\u534A\u89D2\u9017\u865F\u5206\u9694",iconsSeparate:"\u591A\u500B\u5716\u6A19\u534A\u89D2\u9017\u865F\u5206\u9694"},en:{addChild:"Add child",addParent:"Add parent",addSibling:"Add sibling",removeNode:"Remove node",focus:"Focus Mode",cancelFocus:"Cancel Focus Mode",moveUp:"Move up",moveDown:"Move down",link:"Link",clickTips:"Please click the target node",font:"Font",background:"Background",tag:"Tag",icon:"Icon",tagsSeparate:"Separate tags by comma",iconsSeparate:"Separate icons by comma",hyperlink:"hyperlink",linkSeparate:"link address",remark:"remark",reamrkSeparate:"content",summary:"summary",nodeLink:"inner link"},ja:{addChild:"\u5B50\u30CE\u30FC\u30C9\u3092\u8FFD\u52A0\u3059\u308B",addParent:"\u89AA\u30CE\u30FC\u30C9\u3092\u8FFD\u52A0\u3057\u307E\u3059",addSibling:"\u5144\u5F1F\u30CE\u30FC\u30C9\u3092\u8FFD\u52A0\u3059\u308B",removeNode:"\u30CE\u30FC\u30C9\u3092\u524A\u9664",focus:"\u96C6\u4E2D",cancelFocus:"\u96C6\u4E2D\u89E3\u9664",moveUp:"\u4E0A\u3078\u79FB\u52D5",moveDown:"\u4E0B\u3078\u79FB\u52D5",link:"\u30B3\u30CD\u30AF\u30C8",clickTips:"\u30BF\u30FC\u30B2\u30C3\u30C8\u30CE\u30FC\u30C9\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u304F\u3060\u3055\u3044",font:"\u30D5\u30A9\u30F3\u30C8",background:"\u30D0\u30C3\u30AF\u30B0\u30E9\u30A6\u30F3\u30C9",tag:"\u30BF\u30B0",icon:"\u30A2\u30A4\u30B3\u30F3",tagsSeparate:"\u8907\u6570\u30BF\u30B0\u306F\u30AB\u30F3\u30DE\u533A\u5207\u308A",iconsSeparate:"\u8907\u6570\u30A2\u30A4\u30B3\u30F3\u306F\u30AB\u30F3\u30DE\u533A\u5207\u308A"},pt:{addChild:"Adicionar item filho",addParent:"Adicionar item pai",addSibling:"Adicionar item irmao",removeNode:"Remover item",focus:"Modo Foco",cancelFocus:"Cancelar Modo Foco",moveUp:"Mover para cima",moveDown:"Mover para baixo",link:"Link",clickTips:"Favor clicar no item alvo",font:"Fonte",background:"Cor de fundo",tag:"Tag",icon:"Icone",tagsSeparate:"Separe tags por virgula",iconsSeparate:"Separe icones por virgula"}};function gn(e,t){const n=a=>{const d=document.createElement("div");return d.innerText=a,d.style.cssText="position:absolute;bottom:20px;left:50%;transform:translateX(-50%);",d},i=(a,d,f)=>{const y=document.createElement("li");return y.id=a,y.innerHTML=`<span>${ne(d)}</span><span>${ne(f)}</span>`,y},o=S[e.locale]?e.locale:"en",s=i("cm-add_child",S[o].addChild,"tab"),r=i("cm-add_parent",S[o].addParent,""),l=i("cm-add_sibling",S[o].addSibling,"enter"),c=i("cm-remove_child",S[o].removeNode,"delete"),h=i("cm-fucus",S[o].focus,""),u=i("cm-unfucus",S[o].cancelFocus,""),m=i("cm-up",S[o].moveUp,"PgUp"),p=i("cm-down",S[o].moveDown,"Pgdn"),g=i("cm-link",S[o].link,""),x=i("cm-nodelink",S[o].nodeLink,""),E=i("cm-summary",S[o].summary,""),b=document.createElement("ul");if(b.className="menu-list",b.appendChild(s),b.appendChild(r),b.appendChild(l),b.appendChild(c),(!t||t.focus)&&(b.appendChild(h),b.appendChild(u)),b.appendChild(m),b.appendChild(p),(!t||t.link)&&(b.appendChild(g),b.appendChild(x)),b.appendChild(E),t&&t.extend)for(let a=0;a<t.extend.length;a++){const d=t.extend[a],f=i(d.name,d.name,d.key||"");b.appendChild(f),f.onclick=y=>{d.onclick(y)}}const w=document.createElement("cmenu");w.appendChild(b),w.hidden=!0,e.container.append(w);let N=!0;e.container.oncontextmenu=function(a){if(a.preventDefault(),!e.editable)return;const d=a.target;if(d.tagName==="TPC"){d.parentElement.tagName==="ROOT"?N=!0:N=!1,N?(h.className="disabled",m.className="disabled",p.className="disabled",l.className="disabled",c.className="disabled"):(h.className="",m.className="",p.className="",l.className="",c.className=""),e.selectNode(d),w.hidden=!1;const f=b.offsetHeight,y=b.offsetWidth;f+a.clientY>window.innerHeight?(b.style.top="",b.style.bottom="0px"):(b.style.bottom="",b.style.top=a.clientY+15+"px"),y+a.clientX>window.innerWidth?(b.style.left="",b.style.right="0px"):(b.style.right="",b.style.left=a.clientX+10+"px")}},w.onclick=a=>{a.target===w&&(w.hidden=!0)},s.onclick=a=>{e.addChild(),w.hidden=!0},E.onclick=a=>{e.addSummary(),w.hidden=!0},r.onclick=a=>{e.insertParent(),w.hidden=!0},l.onclick=a=>{N||(e.insertSibling(),w.hidden=!0)},c.onclick=a=>{N||(e.removeNode(),w.hidden=!0)},h.onclick=a=>{N||(e.focusNode(e.currentNode),w.hidden=!0)},u.onclick=a=>{e.cancelFocus(),w.hidden=!0},m.onclick=a=>{N||(e.moveUpNode(),w.hidden=!0)},p.onclick=a=>{N||(e.moveDownNode(),w.hidden=!0)},g.onclick=a=>{w.hidden=!0;const d=e.currentNode,f=n(S[o].clickTips);e.container.appendChild(f),e.map.addEventListener("click",y=>{if(y.preventDefault(),f.remove(),y.target.parentElement.nodeName==="T"||y.target.parentElement.nodeName==="ROOT"){const C=e.currentNode;e.createLink(d,C)}else console.log("\u53D6\u6D88\u8FDE\u63A5")},{once:!0})},x.onclick=a=>{w.hidden=!0;const d=e.currentNode,f=n(S[o].clickTips);e.container.appendChild(f),e.map.addEventListener("click",y=>{if(y.preventDefault(),f.remove(),y.target.parentElement.nodeName==="T"||y.target.parentElement.nodeName==="ROOT"){const C=e.currentNode;d.nodeObj.linkJump||(d.nodeObj.linkJump=[]),d.nodeObj.linkJump.push({toId:C.nodeObj.id,title:C.nodeObj.topic}),e.shapeTpc(d,d.nodeObj),e.linkDiv()}else console.log("\u53D6\u6D88\u8FDE\u63A5")},{once:!0})}}const Ae='<svg style="width: 1.3em;height: 1.3em;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3464"><path d="M909.061224 684.930612c-5.22449 0-10.44898-2.089796-14.628571-6.269388l-291.526531-291.52653c-4.179592-4.179592-10.971429-4.179592-14.628571 0l-143.673469 143.673469c-9.926531 9.926531-22.987755 15.15102-37.093878 15.151021s-27.167347-5.22449-37.093877-15.151021l-39.183674-39.183673c-4.179592-4.179592-10.971429-4.179592-14.628571 0l-187.036735 187.036734c-8.359184 8.359184-21.420408 8.359184-29.779592 0-8.359184-8.359184-8.359184-21.420408 0-29.779591l187.036735-187.036735c20.37551-20.37551 53.289796-20.37551 73.665306 0l39.183673 39.183673c2.612245 2.612245 5.746939 3.134694 7.314286 3.134694s4.702041-0.522449 7.314286-3.134694l143.673469-143.673469c20.37551-20.37551 53.289796-20.37551 73.665306 0l291.526531 291.526531c8.359184 8.359184 8.359184 21.420408 0 29.779591-3.657143 4.179592-8.881633 6.269388-14.106123 6.269388zM846.367347 867.265306H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837V240.326531c0-45.97551 37.616327-83.591837 83.591837-83.591837h668.734694c45.97551 0 83.591837 37.616327 83.591837 83.591837v543.346938c0 45.97551-37.616327 83.591837-83.591837 83.591837zM177.632653 198.530612c-22.987755 0-41.795918 18.808163-41.795918 41.795919v543.346938c0 22.987755 18.808163 41.795918 41.795918 41.795919h668.734694c22.987755 0 41.795918-18.808163 41.795918-41.795919V240.326531c0-22.987755-18.808163-41.795918-41.795918-41.795919H177.632653zM261.22449 303.020408m-52.244898 0a52.244898 52.244898 0 1 0 104.489796 0 52.244898 52.244898 0 1 0-104.489796 0ZM644.179592 768h-365.714286c-11.493878 0-20.897959-9.404082-20.897959-20.897959s9.404082-20.897959 20.897959-20.897959h365.714286c11.493878 0 20.897959 9.404082 20.897959 20.897959s-9.404082 20.897959-20.897959 20.897959zM461.322449 670.82449h-182.857143c-11.493878 0-20.897959-9.404082-20.897959-20.897959s9.404082-20.897959 20.897959-20.89796h182.857143c11.493878 0 20.897959 9.404082 20.897959 20.89796s-9.404082 20.897959-20.897959 20.897959z" p-id="3465"></path></svg>';function de(e,t){var i;let n="";for(let o=0;o<((i=e.children)==null?void 0:i.length);o++)n+=`<li class="sidebar-links">${de(e.children[o],t+1)}</li>`;return!(e!=null&&e.children)||!e.children.length?`<p class="sidebar-title" id="sidebar${e.id}"><span class="arrow" ${e.topic?"":'style="margin-bottom:5px;"'}"></span><span>${e.topic?e.topic:Ae}</span></p>`:`<p class="sidebar-title" id="sidebar${e.id}"><span class="arrow ${t<2?"down":"right"}" ${e.topic?"":'style="margin-bottom:5px;"'}></span><span>${e.topic?e.topic:Ae}</span></p><ul class="sidebar-heading open ${t<2?"":"hidden"}">${n}</ul>`}function bn(e,t){const n=e.nodeData;t.innerHTML=`${de(n,0)}`,t.querySelectorAll(".sidebar-title").forEach(i=>{i.onclick=()=>{const o=i.querySelector(".down"),s=i.querySelector(".right"),r=e.container.querySelector(".sidebar-title.active");r==null||r.classList.remove("active"),o?(i.parentElement.querySelector("ul").classList.add("hidden"),o.classList.replace("down","right")):s&&(i.parentElement.querySelector("ul").classList.remove("hidden"),s.classList.replace("right","down")),i.classList.add("active"),ye.call(e,i.id.replace("sidebar",""))}})}function xn(e){const t=document.createElement("sidebar"),n=e.nodeData;t.innerHTML=`${de(n,0)}`,e.container.append(t)}const z=(e,t)=>{const n=document.createElement("span");return n.id=e,n.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${t}"></use>
  </svg>`,n};let he=null;function yn(e,t){return function(){const n=arguments;he&&clearTimeout(he),he=setTimeout(function(){e.apply(this,n)},t)}}function vn(e){var c;const t=document.createElement("toolbar"),n=z("fullscreen","full"),i=z("toCenter","living"),o=z("zoomout","move"),s=z("zoomin","add"),r=document.createElement("input");r.className="numberSelection",r.type="number",r.min="2",r.max="100",r.step="1",r.value=((c=e==null?void 0:e.expandDeep)==null?void 0:c.toString())||"2",r.oninput=yn(()=>{const h=e.getAllDataWithAutoHide();ce(h==null?void 0:h.nodeData),e.layout(),e.linkDiv()},300);const l=document.createElement("span");if(l.innerText="100%",t.appendChild(r),t.appendChild(n),t.appendChild(i),t.appendChild(o),t.appendChild(s),e.uploadButton){const h=wn(e);t.appendChild(h)}return t.className="rb",n.onclick=()=>{e.container.requestFullscreen()},i.onclick=()=>{e.toTopLeft()},o.onclick=()=>{e.scaleVal<.6||e.scale(e.scaleVal-=.2)},s.onclick=()=>{e.scaleVal>1.6||e.scale(e.scaleVal+=.2)},e.bus.addListener("wheel",h=>{const u=h.pageY-h.clientY+document.documentElement.clientHeight,m=e.container.getBoundingClientRect().top+window.scrollY-e.container.clientTop+e.container.clientHeight,g=(m-u>0?m-u:0)+t.clientHeight-20;g>20&&g<e.container.clientHeight-t.clientHeight-20&&(t.style.bottom=g+"px")}),t}function Nn(e){const t=document.createElement("toolbar"),n=z("sidebar","menu"),i=z("tbltl","left"),o=z("tbltr","right"),s=z("tblts","side");return t.appendChild(n),t.appendChild(i),t.appendChild(o),t.appendChild(s),t.className="lt",n.onclick=()=>{const r=document.querySelector("sidebar");bn(e,r),r.classList.contains("selected")?r.removeAttribute("class"):r.setAttribute("class","selected")},i.onclick=()=>{e.initLeft()},o.onclick=()=>{e.initRight()},s.onclick=()=>{e.initSide()},e.bus.addListener("wheel",r=>{const l=r.pageY-r.clientY,c=e.container.getBoundingClientRect().top+window.scrollY-e.container.clientTop,h=l-c+20;h>20&&h<e.container.clientHeight-t.clientHeight-20&&(t.style.top=h+"px")}),t}function kn(e){const t=z("close","close");return t.onclick=()=>{console.log("\u5173\u95ED"),e.bus.fire("close",{})},t}function wn(e){const t=document.createElement("span");t.innerHTML=`
  <form action="" enctype="multipart/form-data" method="post" class="fm">
    <input type="file" name="file" class="selectFile">
  </form>
  <svg t="1662362270319" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2591" width="200" height="200">
  <path d="M324.6592 352.13312c7.1168 0 13.34272-2.66752 18.688-8.00768l141.50656-141.51168v443.2128c0 15.12448 11.5712 26.70592 26.7008 26.70592s26.7008-11.58144 26.7008-26.70592V202.61376l141.50656 141.51168c5.34528 5.34016 12.4672 8.00768 18.688 8.00768 6.23616 0 13.35296-2.66752 18.69312-8.00768 10.68032-10.68032 10.68032-27.59168 0-37.38112l-186.9056-186.89536c-0.88576-0.89088-2.66752-2.66752-4.44416-3.5584-0.88576 0-1.77664-0.89088-1.77664-0.89088-0.896-0.88576-1.78688-0.88576-2.67776-1.77664-0.89088 0-1.77664-0.89088-2.66752-0.89088-0.896 0-1.77664-0.89088-2.66752-0.89088a21.67296 21.67296 0 0 0-10.68032 0c-0.89088 0-1.77664 0.89088-2.66752 0.89088-0.89088 0-1.78176 0.89088-2.67264 0.89088-0.89088 0-1.77664 0.89088-2.66752 1.77664-0.89088 0-1.77664 0.89088-1.77664 0.89088-1.78176 0.89088-2.66752 1.78176-4.4544 3.5584L304.18944 306.74432c-10.68032 10.68032-10.68032 27.59168 0 37.38112 7.1168 5.34016 13.34784 8.00768 20.46976 8.00768z" fill="#333333" p-id="2592"></path><path d="M929.84832 556.83072c-15.1296 0-26.7008 11.5712-26.7008 26.7008v206.47936c0 38.272-31.15008 69.42208-69.41696 69.42208H189.37856c-38.26688 0-69.41696-31.15008-69.41696-69.42208v-206.47936c0-15.1296-11.5712-26.7008-26.7008-26.7008s-26.69568 11.5712-26.69568 26.7008v206.47936c0 67.6352 55.17824 122.81856 122.81856 122.81856h645.23776c67.64544 0 122.82368-55.18336 122.82368-122.81856v-206.47936c-0.896-15.1296-12.4672-26.7008-27.5968-26.7008z" 
  fill="#333333" p-id="2593"></path>
  </svg>
  `;const n=t.children[0];return n.addEventListener("change",i=>{e.bus.fire("upload",n)}),t}function Cn(e){e.container.append(vn(e)),e.container.append(Nn(e)),e.closeButton&&e.container.append(kn(e))}const Q=e=>{const t=document.createElement("div");return t.id=e,t},En=["#2c3e50","#34495e","#7f8c8d","#94a5a6","#bdc3c7","#ffffff","#8e44ad","#9b59b6","#2980b9","#3298db","#c0392c","#e74c3c","#d35400","#f39c11","#f1c40e","#17a085","#27ae61","#2ecc71"];function Sn(e){const t=S[e.locale]?e.locale:"en";let n;const i=Q("nm-style"),o=Q("nm-tag"),s=Q("nm-icon"),r=Q("nm-link"),l=Q("nm-remark");i.innerHTML=`
      <div class="nm-fontsize-container">
        ${["15","24","32"].map(a=>`<div class="size"  data-size="${a}">
        <svg class="icon" style="width: ${a}px;height: ${a}px" aria-hidden="true">
          <use xlink:href="#icon-a"></use>
        </svg></div>`).join("")}<div class="bold"><svg class="icon" aria-hidden="true">
  <use xlink:href="#icon-B"></use>
  </svg></div>
      </div>
      <div class="nm-fontcolor-container">
        ${En.map(a=>`<div class="split6"><div class="palette" data-color="${a}" style="background-color: ${a};"></div></div>`).join("")}
      </div>
      <div class="bof">
      <span class="font">${S[t].font}</span>
      <span class="background">${S[t].background}</span>
      </div>
  `,o.innerHTML=`${S[t].tag}<input class="nm-tag" tabindex="-1" placeholder="${S[t].tagsSeparate}" /><br>`,s.innerHTML=`${S[t].icon}<input class="nm-icon" tabindex="-1" placeholder="${S[t].iconsSeparate}" /><br>`,r.innerHTML=`${S[t].hyperlink}<input class="nm-link" tabindex="-1" placeholder="${S[t].linkSeparate}" /><br>`,l.innerHTML=`${S[t].remark}<input class="nm-remark" tabindex="-1" placeholder="${S[t].reamrkSeparate}" /><br>`;const c=document.createElement("nmenu");c.innerHTML=`
  <div class="button-container"><svg class="icon" aria-hidden="true">
  <use xlink:href="#icon-close"></use>
  </svg></div>
  `,c.appendChild(i),c.appendChild(o),c.appendChild(s),c.appendChild(r),c.appendChild(l),c.hidden=!0;function h(a,d){var f=e.container.querySelectorAll(a);[].forEach.call(f,function(y){y.classList.remove(d)})}e.container.append(c);const u=c.querySelectorAll(".size"),m=c.querySelector(".bold"),p=c.querySelector(".button-container"),g=c.querySelector(".font"),x=e.container.querySelector(".nm-tag"),E=e.container.querySelector(".nm-icon"),b=e.container.querySelector(".nm-link"),w=e.container.querySelector(".nm-remark");c.onclick=a=>{if(!e.currentNode)return;const d=e.currentNode.nodeObj,f=a.target;f.className==="palette"?(d.style||(d.style={}),h(".palette","nmenu-selected"),f.className="palette nmenu-selected",n==="font"?d.style.color=f.dataset.color:n==="background"&&(d.style.background=f.dataset.color),e.updateNodeStyle(d)):f.className==="background"?(h(".palette","nmenu-selected"),n="background",f.className="background selected",f.previousElementSibling.className="font",d.style&&d.style.background&&(c.querySelector('.palette[data-color="'+d.style.background+'"]').className="palette nmenu-selected")):f.className==="font"&&(h(".palette","nmenu-selected"),n="font",f.className="font selected",f.nextElementSibling.className="background",d.style&&d.style.color&&(c.querySelector('.palette[data-color="'+d.style.color+'"]').className="palette nmenu-selected"))},Array.from(u).map(a=>{a.onclick=d=>{e.currentNode.nodeObj.style||(e.currentNode.nodeObj.style={}),h(".size","size-selected");const f=d.currentTarget;e.currentNode.nodeObj.style.fontSize=f.dataset.size,f.className="size size-selected",e.updateNodeStyle(e.currentNode.nodeObj)}}),m.onclick=a=>{e.currentNode.nodeObj.style||(e.currentNode.nodeObj.style={}),e.currentNode.nodeObj.style.fontWeight==="bold"?(delete e.currentNode.nodeObj.style.fontWeight,a.currentTarget.className="bold",e.updateNodeStyle(e.currentNode.nodeObj)):(e.currentNode.nodeObj.style.fontWeight="bold",a.currentTarget.className="bold size-selected",e.updateNodeStyle(e.currentNode.nodeObj))},x.onchange=a=>{if(!!e.currentNode&&(a.target.value!==null||a.target.value!==void 0)){let d;a.target.value===""?d=[]:d=a.target.value.split(","),e.updateNodeTags(e.currentNode.nodeObj,d)}},E.onchange=a=>{if(!!e.currentNode&&(a.target.value!==null||a.target.value!==void 0)){const d=a.target.value.split(",");e.updateNodeIcons(e.currentNode.nodeObj,d)}},b.onchange=a=>{if(!!e.currentNode&&(a.target.value!==null||a.target.value!==void 0)){const d=a.target.value;e.updateNodeHyperLink(e.currentNode.nodeObj,d)}},w.onchange=a=>{if(!!e.currentNode&&(a.target.value!==null||a.target.value!==void 0)){const d=a.target.value;e.updateNodeRemark(e.currentNode.nodeObj,d)}};let N="open";p.onclick=a=>{N==="open"?(N="close",c.className="close",p.innerHTML='<svg class="icon" aria-hidden="true"><use xlink:href="#icon-menu"></use></svg>'):(N="open",c.className="",p.innerHTML='<svg class="icon" aria-hidden="true"><use xlink:href="#icon-close"></use></svg>')},e.bus.addListener("unselectNode",function(){c.hidden=!0}),e.bus.addListener("selectNode",function(a,d){if(!!d){if(c.hidden=!1,h(".palette","nmenu-selected"),h(".size","size-selected"),h(".bold","size-selected"),n="font",g.className="font selected",g.nextElementSibling.className="background",a.style){if(a.style.fontSize){const f=c.querySelector('.size[data-size="'+a.style.fontSize+'"]');f&&(f.className="size size-selected")}if(a.style.fontWeight){const f=c.querySelector(".bold");f&&(f.className="bold size-selected")}if(a.style.color){const f=c.querySelector('.palette[data-color="'+a.style.color+'"]');f&&(f.className="palette nmenu-selected")}}a.tags?x.value=a.tags.join(","):x.value="",a.icons?E.value=a.icons.join(","):E.value="",b.value="",a.hyperLink&&(b.value=a.hyperLink),a.linkJump&&(b.value.length>0&&(b.value+=","),b.value+=a.linkJump.map(f=>f.title).reduce((f,y,C)=>f+(C?",":"")+y,"")),a.remark?w.value=a.remark:w.value=""}})}const ue=document,Ln=function(e,t){if(!t)return pe(e),e;const n=e.getElementsByClassName("insert-preview"),i=`insert-preview ${t} show`;if(n.length>0)n[0].className=i;else{const o=ue.createElement("div");o.className=i,e.appendChild(o)}return e},pe=function(e){if(!e)return;const t=e.getElementsByClassName("insert-preview");for(const n of t||[])n.remove()},Me=function(e,t){const n=t.parentNode.parentNode.contains(e);return e&&e.tagName==="TPC"&&e!==t&&!n&&e.nodeObj.root!==!0};function $n(e){let t,n,i;e.map.addEventListener("dragstart",function(s){t=s.target,t.parentNode.parentNode.style.opacity="0.5",q.clear()}),e.map.addEventListener("dragend",async function(s){s.target.style.opacity="",pe(i);const r=t.nodeObj;switch(n){case"before":e.moveNodeBefore(t,i),e.selectNode($(r.id));break;case"after":e.moveNodeAfter(t,i),e.selectNode($(r.id));break;case"in":e.moveNode(t,i);break}t.parentNode.parentNode.style.opacity="1",t=null}),e.map.addEventListener("dragover",Fe(function(s){pe(i);const r=ue.elementFromPoint(s.clientX,s.clientY-12);if(Me(r,t)){i=r;const l=r.getBoundingClientRect().y;s.clientY>l+r.clientHeight?n="after":s.clientY>l+r.clientHeight/2&&(n="in")}else{const l=ue.elementFromPoint(s.clientX,s.clientY+12);if(Me(l,t)){i=l;const c=l.getBoundingClientRect().y;s.clientY<c?n="before":s.clientY<c+l.clientHeight/2&&(n="in")}else n=i=null}i&&Ln(i,n)},200))}function Tn(e){const t={13:()=>{e.insertSibling()},9:()=>{e.addChild()},17:n=>{e.ctrlRepeat=!0,console.log("\u6309\u4E0Bcontroll")},91:n=>{e.ctrlRepeat=!0,console.log("\u6309\u4E0Bcommand")},113:()=>{e.beginEdit()},38:()=>{e.selectPrevSibling()},40:()=>{e.selectNextSibling()},37:()=>{!e.currentNode||(e.currentNode.offsetParent.offsetParent.className==="rhs"?e.selectParent():(e.currentNode.offsetParent.offsetParent.className==="lhs"||e.currentNode.nodeObj.root)&&e.selectFirstChild())},39:()=>{!e.currentNode||(e.currentNode.offsetParent.offsetParent.className==="rhs"||e.currentNode.nodeObj.root?e.selectFirstChild():e.currentNode.offsetParent.offsetParent.className==="lhs"&&e.selectParent())},33(){e.moveUpNode()},34(){e.moveDownNode()},67(n){(n.metaKey||n.ctrlKey)&&(e.waitCopy=e.currentNode)},86(n){!e.waitCopy||(n.metaKey||n.ctrlKey)&&(e.copyNode(e.waitCopy,e.currentNode),e.waitCopy=null)},90:n=>{!e.allowUndo||(n.metaKey||n.ctrlKey)&&e.undo()},187:n=>{if(n.metaKey||n.ctrlKey){if(e.scaleVal>1.6)return;e.scale(e.scaleVal+=.2)}},189:n=>{if(n.metaKey||n.ctrlKey){if(e.scaleVal<.6)return;e.scale(e.scaleVal-=.2)}}};e.map.onkeydown=n=>{!e.editable||n.target===n.currentTarget&&(n.keyCode===8||n.keyCode===46?e.currentLink?e.removeLink():e.removeNode():t[n.keyCode]&&t[n.keyCode](n))},e.map.onkeyup=n=>{(n.keyCode===17||n.keyCode===91)&&(e.ctrlRepeat=!1)}}function An(e,t){const n=(p,g)=>{const x=document.createElement("div");return x.id=p,x.innerHTML=`<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-${g}"></use>
  </svg>`,x},i=n("cm-add_child","zijiedian"),o=n("cm-add_sibling","tongjijiedian-"),s=n("cm-remove_child","shanchu2"),r=n("cm-up","rising"),l=n("cm-down","falling"),c=n("cm-edit","edit"),h=document.createElement("ul");if(h.className="menu-list",t&&t.extend)for(let p=0;p<t.extend.length;p++){const g=t.extend[p],x=n(g.name,g.name);h.appendChild(x),x.onclick=E=>{g.onclick(E)}}const u=document.createElement("mmenu");u.appendChild(i),u.appendChild(o),u.appendChild(s),u.appendChild(r),u.appendChild(l),u.appendChild(c),u.hidden=!0,e.container.append(u);let m=!0;e.bus.addListener("unselectNode",function(){u.hidden=!0}),e.bus.addListener("selectNode",function(p){u.hidden=!1,p.root?m=!0:m=!1}),u.onclick=p=>{p.target===u&&(u.hidden=!0)},i.onclick=p=>{e.addChild()},o.onclick=p=>{m||e.insertSibling()},s.onclick=p=>{m||e.removeNode()},r.onclick=p=>{m||e.moveUpNode()},l.onclick=p=>{m||e.moveDownNode()},c.onclick=p=>{e.beginEdit()}}function De(){this.handlers={}}De.prototype={showHandler:function(){console.log(this.handlers)},addListener:function(e,t){this.handlers[e]===void 0&&(this.handlers[e]=[]),this.handlers[e].push(t)},fire:function(e,...t){if(this.handlers[e]instanceof Array)for(var n=this.handlers[e],i=0;i<n.length;i++)n[i](...t)},removeListener:function(e,t){if(!!this.handlers[e]){var n=this.handlers[e];if(!t)n.length=0;else if(n.length)for(var i=0;i<n.length;i++)n[i]===t&&this.handlers[e].splice(i,1)}}};var Fn=(()=>`.mind-elixir{min-height:200px;line-height:initial;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mind-elixir .hyper-link{text-decoration:none}.map-container{user-select:none;height:100%;width:100%;overflow:scroll;font-size:15px}.map-container::-webkit-scrollbar{width:0px;height:0px}.map-container .focus-mode{position:absolute;top:0;left:0;height:100%;width:100%;background:#fff}.map-container #close{position:absolute;right:35px;top:22px;cursor:pointer;opacity:.7}.map-container #close:hover{opacity:1}.map-container #close .icon:hover{color:#fff;background-color:#ed0a0a7c}.map-container .map-canvas{height:20000px;width:20000px;position:relative;user-select:text;transition:all .3s;transform:scale(1);background:#f6f6f6}.map-container .map-canvas .selected{outline:2px solid #4dc4ff}.map-container .map-canvas root{position:absolute}.map-container .map-canvas root tpc{display:block;color:#fff;padding:10px 15px;background-color:#0af;border-radius:5px;font-size:25px;white-space:pre-wrap;word-break:break-all}.map-container .map-canvas root tpc #input-box{padding:10px 15px}.map-container .mindbox>grp{position:absolute}.map-container .mindbox>grp>t>tpc{background-color:#fff;border:1px solid #444444;border-radius:5px;color:#735c45;padding:8px 10px;margin:0;white-space:pre-wrap;word-break:break-all}.map-container .mindbox>grp>t>tpc #input-box{padding:8px 10px}.map-container .mindbox .lhs{direction:rtl}.map-container .mindbox .lhs tpc{direction:ltr}.map-container .mindbox grp{display:block;pointer-events:none}.map-container .mindbox children,.map-container .mindbox t{display:inline-block;vertical-align:middle}.map-container .mindbox smychildren{display:inline-flex;flex-direction:column}.map-container .mindbox smychildren smy{position:relative;display:inline-block;vertical-align:middle}.map-container .mindbox smychildren smy>t{margin-left:8px}.map-container .mindbox t{display:inline-block;vertical-align:middle}.map-container .mindbox t{position:relative;cursor:pointer;padding:0 15px;margin-top:10px}.map-container .mindbox t tpc{position:relative;display:block;padding:5px;border-radius:3px;color:#666;pointer-events:all;max-width:1200px;white-space:pre-wrap;word-break:break-all;line-height:1}@keyframes blink{50%{border:2px solid #ff0000;border-radius:5px}}.map-container .mindbox t tpc.blink{animation:blink .5s step-end infinite alternate}.map-container .mindbox t tpc #input-box{padding:5px}.map-container .mindbox t tpc .width-controll-right{border:none;width:7px;height:29px;cursor:ew-resize;display:inline-block;position:absolute;right:-4px;top:1px}.map-container .mindbox t tpc .width-controll-left{border:none;width:7px;height:29px;cursor:ew-resize;display:inline-block;position:absolute;left:-4px;top:1px}.map-container .mindbox t tpc .tags{font-size:25px;direction:ltr}.map-container .mindbox t tpc .tags span{height:auto;display:inline-block;border-radius:3px;padding:2px 4px;background:#d6f0f8;color:#276f86;margin:2px 3px 0 0;font-size:12px;line-height:16px}.map-container .mindbox t tpc .hyper-link{font-size:25px;cursor:pointer}.map-container .mindbox t tpc .icons{display:inline-block;direction:ltr;margin-right:10px}.map-container .mindbox t tpc .insert-preview{position:absolute;width:100%;left:0px;z-index:9}.map-container .mindbox t tpc .before{height:14px;top:-14px}.map-container .mindbox t tpc .show{background:#7ad5ff;pointer-events:none;opacity:.7}.map-container .mindbox t tpc .in{height:100%;top:0px}.map-container .mindbox t tpc .after{height:14px;bottom:-14px}.map-container .mindbox t epd{position:absolute;height:12px;width:12px;line-height:10px;text-align:center;border-radius:50%;border:1px solid #4f4f4f;background-color:#fff;pointer-events:all;z-index:9}.map-container .mindbox t epd.minus{transition:all .3s}.map-container .mindbox t epd.minus:hover{opacity:1}.map-container .icon{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.map-container .remark{margin-left:3px;display:inline-block}.map-container .remark .content{user-select:text;cursor:text;padding:8px;background-color:beige;position:absolute;min-width:200px;z-index:10;margin-top:2px;box-shadow:var(--uk-popover-box-shadow, 0 12px 36px rgba(0, 0, 0, .3));border-radius:8px}.map-container .remark .content.hidden{display:none}.map-container .linkJump{margin-left:5px}.map-container .svg2nd,.map-container .svg3rd,.map-container .topiclinks,.map-container .linkcontroller{position:absolute;height:102%;width:100%;top:0;left:0}.map-container .topiclinks,.map-container .linkcontroller{pointer-events:none}.map-container .topiclinks g,.map-container .linkcontroller g{pointer-events:all}.map-container .svg2nd,.map-container .svg3rd{pointer-events:none;z-index:-1}.map-container .topiclinks *,.map-container .linkcontroller *{z-index:100}.map-container .topiclinks g{cursor:pointer}.down t,.down children{display:block!important}.down grp{display:inline-block!important}.circle{position:absolute;height:10px;width:10px;margin-top:-5px;margin-left:-5px;border-radius:100%;background:#aaa;cursor:pointer}#input-box{position:absolute;top:0;left:0;background-color:#fff;width:max-content;max-width:1200px;z-index:11;direction:ltr;user-select:auto}
`)(),Rn=(()=>`cmenu{position:fixed;top:0;left:0;width:100%;height:100%;z-index:99}cmenu .menu-list{position:fixed;list-style:none;margin:0;padding:0;font:300 15px Roboto,sans-serif;color:#333;box-shadow:0 12px 15px #0003}cmenu .menu-list *{transition:color .4s,background-color .4s}cmenu .menu-list li{min-width:150px;overflow:hidden;white-space:nowrap;padding:6px 10px;background-color:#fff;border-bottom:1px solid #ecf0f1}cmenu .menu-list li a{color:#333;text-decoration:none}cmenu .menu-list li.disabled{color:#5e5e5e;background-color:#f7f7f7}cmenu .menu-list li.disabled:hover{cursor:default;background-color:#f7f7f7}cmenu .menu-list li:hover{cursor:pointer;background-color:#ecf0f1}cmenu .menu-list li:first-child{border-radius:5px 5px 0 0}cmenu .menu-list li:last-child{border-bottom:0;border-radius:0 0 5px 5px}cmenu .menu-list li span:last-child{float:right}
`)(),In=(()=>`toolbar{position:absolute;background:#fff;padding:10px;border-radius:5px;box-shadow:0 1px 2px #0003}toolbar span:active{opacity:.5}.rb{right:20px;bottom:20px;font-family:iconfont}.rb span+span{margin-left:10px}.rb .numberSelection{margin-bottom:0;margin-right:8px;width:32px;border-radius:.3rem;background-color:#fff;border-color:rgb(209 213 219 / var(--tw-border-opacity));--tw-border-opacity: 1;border-width:1px}.rb .fm{display:inline}.rb .selectFile{position:absolute;font-size:0;width:20px;height:23px;opacity:-6;z-index:99}.lt{font-size:20px;left:20px;top:20px;width:20px}.lt span{display:block}.lt span+span{margin-top:10px}
`)(),qn=(()=>`nmenu{position:absolute;right:20px;top:20px;background:#fff;border-radius:5px;box-shadow:0 1px 2px #0003;width:240px;box-sizing:border-box;padding:0 15px 15px;transition:.3s all}nmenu.close{height:30px;width:46px;overflow:hidden}nmenu .button-container{padding:3px 0;direction:rtl}nmenu #nm-tag{margin-top:20px}nmenu .nm-fontsize-container{display:flex;justify-content:space-around;margin-bottom:20px}nmenu .nm-fontsize-container div{height:36px;width:36px;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 2px #0003;background-color:#fff;color:tomato;border-radius:100%}nmenu .nm-fontcolor-container{margin-bottom:10px}nmenu input{background:#f7f9fa;border:1px solid #dce2e6;border-radius:3px;padding:5px;margin:10px 0;width:100%;box-sizing:border-box}nmenu .split6{display:inline-block;width:16.66%;margin-bottom:5px}nmenu .palette{border-radius:100%;width:21px;height:21px;border:1px solid #edf1f2;margin:auto}nmenu .nmenu-selected,nmenu .palette:hover{box-shadow:tomato 0 0 0 2px;background-color:#c7e9fa}nmenu .size-selected{background-color:tomato!important;border-color:tomato;fill:#fff;color:#fff}nmenu .size-selected svg{color:#fff}nmenu .bof{text-align:center}nmenu .bof span{display:inline-block;font-size:14px;border-radius:4px;padding:2px 5px}nmenu .bof .selected{background-color:tomato;color:#fff}
`)(),jn=(()=>`sidebar{display:none;position:absolute;left:20px;top:195px;background:#fff;border-radius:5px;box-shadow:0 1px 2px #0003;width:20em;height:fit-content;max-height:70%;box-sizing:border-box;padding:0 8px 8px;transition:.3s all;overflow:scroll}sidebar ul{padding:0;margin:0;list-style-type:none}sidebar .sidebar-heading{color:#2c3e50;transition:color .15s ease;cursor:pointer;font-size:1em;font-weight:700;padding:.15rem .1rem .15rem .35rem;width:100%;box-sizing:border-box;margin:0;border-left:solid transparent}sidebar .sidebar-heading .sidebar-title{margin-block-start:.2em;margin-block-end:.2em;margin-inline-start:0px;margin-inline-end:0px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;height:18px}sidebar .sidebar-heading .sidebar-title:hover{background-color:#f7f8fa;border-radius:4px}sidebar .sidebar-heading .sidebar-title .arrow{margin-bottom:1px;margin-right:5px;position:relative;border-left:6px solid #ccc}sidebar .sidebar-heading .sidebar-title .arrow.down{border-left:4px solid transparent;border-right:4px solid transparent;border-top:6px solid #ccc}sidebar .sidebar-heading .sidebar-title .arrow.right{border-left:6px solid #ccc;border-top:4px solid transparent;border-bottom:4px solid transparent}sidebar .sidebar-heading .sidebar-title.active{color:#007fff}sidebar .sidebar-heading .sidebar-title.active:before{content:"";position:absolute;left:0;width:4px;height:16px;background:#1e80ff;border-radius:0 4px 4px 0}sidebar .sidebar-heading.open,sidebar .sidebar-heading:hover{color:inherit}sidebar .sidebar-links{font-weight:400;display:inline-block;color:#2c3e50;border-left:.25rem solid transparent;line-height:1.4;width:100%;box-sizing:border-box;transition:height .1s ease-out;font-size:.95em;overflow:hidden}.selected{display:block}.arrow{display:inline-block;width:0;height:0}ul ul{list-style-type:circle;margin-block-start:0px;margin-block-end:0px}ul{display:block;list-style-type:disc;margin-block-start:.2em;margin-block-end:.2em;margin-inline-start:0px;margin-inline-end:0px;padding-inline-start:20px}ul .hidden{display:none}li{text-align:-webkit-match-parent}
`)(),Vn=(()=>`mmenu{position:absolute;left:20px;bottom:70px;z-index:99;margin:0;padding:0;color:#333;border-radius:5px;box-shadow:0 12px 15px #0003;overflow:hidden}mmenu *{transition:color .4s,background-color .4s}mmenu div{float:left;text-align:center;width:30px;overflow:hidden;white-space:nowrap;padding:8px;background-color:#fff;border-bottom:1px solid #ecf0f1}mmenu div a{color:#333;text-decoration:none}mmenu div.disabled{color:#5e5e5e;background-color:#f7f7f7}mmenu div.disabled:hover{cursor:default;background-color:#f7f7f7}mmenu div:hover{cursor:pointer;background-color:#ecf0f1}
`)();(function(e){var t,n,i,o,s,r,l='<svg><symbol id="icon-edit" viewBox="0 0 1024 1024"><path d="M423.765333 128a42.666667 42.666667 0 0 1 3.2 85.205333L423.765333 213.333333H234.666667a64 64 0 0 0-63.872 60.245334L170.666667 277.333333v512a64 64 0 0 0 60.245333 63.872L234.666667 853.333333h512a64 64 0 0 0 63.872-60.245333L810.666667 789.333333v-189.098666a42.666667 42.666667 0 0 1 85.205333-3.2l0.128 3.2V789.333333a149.333333 149.333333 0 0 1-144.213333 149.248L746.666667 938.666667h-512a149.333333 149.333333 0 0 1-149.248-144.213334L85.333333 789.333333v-512a149.333333 149.333333 0 0 1 144.213334-149.248L234.666667 128h189.098666z m324.949334-53.248a42.666667 42.666667 0 0 1 60.330666 0l150.869334 150.869333a42.666667 42.666667 0 0 1 0 60.330667l-329.386667 329.386667a42.666667 42.666667 0 0 1-29.44 12.458666l-153.386667 2.517334a42.666667 42.666667 0 0 1-43.349333-43.349334l2.56-153.386666a42.666667 42.666667 0 0 1 12.458667-29.44z m30.165333 90.496L491.946667 452.266667l-1.493334 91.989333 92.032-1.493333 286.976-286.976-90.538666-90.538667z"  ></path></symbol><symbol id="icon-rising" viewBox="0 0 1024 1024"><path d="M553.173333 803.84h-64l0.021334-474.581333-224.021334 224-45.269333-45.226667L521.6 206.293333l301.717333 301.696-45.269333 45.269334-224.853333-224.896v475.477333z"  ></path></symbol><symbol id="icon-falling" viewBox="0 0 1024 1024"><path d="M553.173333 238.314667h-64l0.021334 474.602666-224.021334-224-45.269333 45.226667L521.6 835.861333l301.717333-301.717333-45.269333-45.226667-224.853333 224.853334V238.336z"  ></path></symbol><symbol id="icon-shanchu2" viewBox="0 0 1024 1024"><path d="M516.60601807 107.93026734c-82.64382935 0-149.71865844 65.51751709-152.5729065 147.77160644H171.37136841c-21.40603638 0-38.92044068 17.38504028-38.92044068 38.92126465 0 21.40686036 17.38504028 38.92208862 38.92126466 38.92208862h42.94308471v435.40136719c0 81.73498536 55.39828492 148.55026245 123.90106201 148.55026245h348.99444581c68.37341309 0 123.90106201-66.42553711 123.901062-148.55026245V333.80477906h38.92126465c21.40686036 0 38.92126464-17.38586426 38.92126465-38.92208863 0-21.40686036-17.38504028-38.92126464-38.92126465-38.92126465H668.91854859C666.45321656 173.44860839 599.24902344 107.93109131 516.60601807 107.93109131z m-79.65939331 147.77160644c2.85424805-42.16442872 37.2354126-74.85809326 79.78875732-74.85809326s76.93450927 32.82302857 79.39984131 74.85809326H436.94662476z m-98.86047364 589.01165771c-24.2611084 0-50.98754883-31.13717651-50.98754883-75.76693725V333.80477906h450.97036744V769.33551026c0 44.50039673-26.72644043 75.76776123-50.98754884 75.76776122H338.08615112v-0.38973999z m0 0"  ></path><path d="M390.37063599 751.17263794c17.77313232 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.77478027 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.27124023 40.08883667 32.43493653 40.08883667z m117.41308594 0c17.7739563 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.7739563 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.66098023 40.08883667 32.43493653 40.08883667z m123.51049804 0c17.7739563 0 32.43493653-17.7739563 32.43493652-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43493652-40.08966065-17.7739563 0-32.43411255 17.77478027-32.43411255 40.08966065v228.72875976c0 22.18469239 14.14105224 40.08883667 32.43411255 40.08883667z m0 0"  ></path></symbol><symbol id="icon-zijiedian" viewBox="0 0 1024 1024"><path d="M312.208 472c19.568-157.856 153.432-280 315.656-280 175.68 0 318.112 143.272 318.112 320S803.552 832 627.864 832c-162.224 0-296.08-122.144-315.656-280H120a40 40 0 0 1 0-80h192.208zM632 752c132.552 0 240-107.448 240-240 0-132.552-107.448-240-240-240-132.552 0-240 107.448-240 240 0 132.552 107.448 240 240 240z m-40-280v-80a40 40 0 0 1 80 0v80h80a40 40 0 0 1 0 80h-80v80a40 40 0 0 1-80 0v-80h-80a40 40 0 0 1 0-80h80z"  ></path></symbol><symbol id="icon-tongjijiedian-" viewBox="0 0 1024 1024"><path d="M803.84 131.626667H410.24A59.733333 59.733333 0 0 0 350.506667 192v45.226667H199.68a51.626667 51.626667 0 0 0-51.626667 51.626666v465.92a51.626667 51.626667 0 0 0 51.626667 51.626667h187.52v-55.466667h-162.133333a21.333333 21.333333 0 0 1-21.333334-21.333333V313.386667a21.333333 21.333333 0 0 1 21.333334-21.333334h125.653333v64a59.733333 59.733333 0 0 0 59.733333 59.733334h393.386667a59.733333 59.733333 0 0 0 59.733333-59.733334V192a59.733333 59.733333 0 0 0-59.733333-60.373333z m4.266667 224.64a4.266667 4.266667 0 0 1-4.266667 4.266666H410.24a4.266667 4.266667 0 0 1-4.266667-4.266666V192a4.266667 4.266667 0 0 1 4.266667-4.266667h393.6a4.266667 4.266667 0 0 1 4.266667 4.266667zM716.16 749.44h-81.28v-81.493333a27.733333 27.733333 0 0 0-55.466667 0v81.28h-81.493333a27.733333 27.733333 0 1 0 0 55.466666h81.28v81.28a27.733333 27.733333 0 1 0 55.466667 0v-81.066666h81.28a27.733333 27.733333 0 0 0 0-55.466667z"  ></path></symbol><symbol id="icon-close" viewBox="0 0 1024 1024"><path d="M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512.128 467.904l-263.04-263.84c-12.448-12.48-32.704-12.544-45.248-0.064-12.512 12.48-12.544 32.736-0.064 45.28l262.976 263.776L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248a31.937 31.937 0 0 0 22.688 9.44c8.16 0 16.32-3.104 22.56-9.312l265.216-263.808 265.44 266.24c6.24 6.272 14.432 9.408 22.656 9.408a31.94 31.94 0 0 0 22.592-9.344c12.512-12.48 12.544-32.704 0.064-45.248L557.312 513.248z" fill="" ></path></symbol><symbol id="icon-menu" viewBox="0 0 1024 1024"><path d="M109.714 292.571h804.572c21.943 0 36.571-21.942 36.571-43.885 0-14.629-14.628-29.257-36.571-29.257H109.714c-21.943 0-36.571 14.628-36.571 36.571 0 14.629 14.628 36.571 36.571 36.571zM914.286 512H109.714c-21.943 0-36.571 14.629-36.571 36.571 0 14.629 14.628 36.572 36.571 36.572h804.572c21.943 0 36.571-21.943 36.571-43.886 0-14.628-14.628-29.257-36.571-29.257z m0 292.571H109.714c-21.943 0-36.571 14.629-36.571 36.572s14.628 36.571 36.571 36.571h804.572c21.943 0 36.571-21.943 36.571-36.571 0-21.943-14.628-36.572-36.571-36.572z"  ></path></symbol><symbol id="icon-right" viewBox="0 0 1024 1024"><path d="M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z" fill="#333333" ></path></symbol><symbol id="icon-left" viewBox="0 0 1024 1024"><path d="M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z" fill="#333333" ></path></symbol><symbol id="icon-side" viewBox="0 0 1024 1024"><path d="M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z"  ></path></symbol><symbol id="icon-B" viewBox="0 0 1024 1024"><path d="M98.067692 65.457231H481.28c75.854769 0 132.411077 3.150769 169.668923 9.452307 37.336615 6.301538 70.656 19.534769 100.036923 39.620924 29.459692 20.007385 53.956923 46.710154 73.570462 80.029538 19.692308 33.398154 29.459692 70.734769 29.459692 112.167385 0 44.898462-12.130462 86.094769-36.233846 123.588923a224.886154 224.886154 0 0 1-98.461539 84.283077c58.368 17.092923 103.266462 46.08 134.695385 87.04 31.350154 40.96 47.025231 89.088 47.025231 144.462769 0 43.638154-10.082462 86.016-30.404923 127.212308-20.243692 41.196308-47.891692 74.043077-83.02277 98.697846-35.052308 24.654769-78.296615 39.778462-129.732923 45.449846-32.295385 3.465846-110.119385 5.671385-233.472 6.537846H98.067692V65.457231z m193.536 159.507692V446.621538h126.818462c75.460923 0 122.328615-1.024 140.603077-3.229538 33.083077-3.938462 59.155692-15.36 78.139077-34.343385 18.904615-18.904615 28.435692-43.874462 28.435692-74.830769 0-29.696-8.192-53.720615-24.497231-72.310154-16.384-18.510769-40.644923-29.696-72.940307-33.634461-19.140923-2.205538-74.279385-3.308308-165.415385-3.308308h-111.064615z m0 381.243077v256.315077h179.2c69.710769 0 113.979077-1.969231 132.726154-5.907692 28.750769-5.198769 52.145231-17.959385 70.262154-38.281847 18.116923-20.243692 27.096615-47.340308 27.096615-81.368615 0-28.750769-6.931692-53.169231-20.873846-73.255385a118.232615 118.232615 0 0 0-60.494769-43.795692c-26.387692-9.137231-83.574154-13.705846-171.638154-13.705846H291.603692z"  ></path></symbol><symbol id="icon-a" viewBox="0 0 1024 1024"><path d="M757.76 665.6q0 20.48 1.536 34.304t7.68 22.016 18.944 12.288 34.304 4.096q-3.072 25.6-15.36 44.032-11.264 16.384-33.28 29.696t-62.976 13.312q-11.264 0-20.48-0.512t-17.408-2.56l-6.144-2.048-1.024 0q-4.096-1.024-10.24-4.096-2.048-2.048-4.096-2.048-1.024-1.024-2.048-1.024-14.336-8.192-23.552-17.408t-14.336-17.408q-6.144-10.24-9.216-20.48-63.488 75.776-178.176 75.776-48.128 0-88.064-15.36t-69.12-44.032-45.056-68.096-15.872-88.576 16.896-89.088 47.616-67.584 74.24-42.496 96.768-14.848q48.128 0 88.576 17.408t66.048 49.152q0-8.192 0.512-16.384t0.512-15.36q0-71.68-39.936-104.448t-128-32.768q-43.008 0-84.992 6.656t-84.992 17.92q14.336-28.672 25.088-47.616t24.064-29.184q30.72-24.576 158.72-24.576 79.872 0 135.168 13.824t90.624 43.52 51.2 75.264 15.872 108.032l0 200.704zM487.424 743.424q50.176 0 79.872-33.28t29.696-95.744q0-61.44-28.672-93.696t-76.8-32.256q-52.224 0-82.944 33.28t-30.72 94.72q0 58.368 31.744 92.672t77.824 34.304z"  ></path></symbol><symbol id="icon-full" viewBox="0 0 1024 1024"><path d="M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z"  ></path><path d="M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z"  ></path><path d="M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z"  ></path><path d="M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z"  ></path></symbol><symbol id="icon-add" viewBox="0 0 1024 1024"><path d="M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z"  ></path></symbol><symbol id="icon-move" viewBox="0 0 1024 1024"><path d="M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z"  ></path></symbol><symbol id="icon-living" viewBox="0 0 1024 1024"><path d="M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z" fill="#666666" ></path><path d="M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z" fill="#666666" ></path></symbol></svg>',c=(c=document.getElementsByTagName("script"))[c.length-1].getAttribute("data-injectcss");if(c&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(u){console&&console.log(u)}}function h(){s||(s=!0,i())}t=function(){var u,m,p,g;(g=document.createElement("div")).innerHTML=l,l=null,(p=g.getElementsByTagName("svg")[0])&&(p.setAttribute("aria-hidden","true"),p.style.position="absolute",p.style.width=0,p.style.height=0,p.style.overflow="hidden",u=p,(m=document.body).firstChild?(g=u,(p=m.firstChild).parentNode.insertBefore(g,p)):m.appendChild(u))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),t()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(i=t,o=e.document,s=!1,(r=function(){try{o.documentElement.doScroll("left")}catch{return void setTimeout(r,50)}h()})(),o.onreadystatechange=function(){o.readyState=="complete"&&(o.onreadystatechange=null,h())})})(window);const G=$,X=document;function P({el:e,data:t,direction:n,locale:i,draggable:o,editable:s,contextMenu:r,contextMenuOption:l,toolBar:c,nodeMenu:h,keypress:u,before:m,newTopicName:p,allowUndo:g,primaryLinkStyle:x,overflowHidden:E,primaryNodeHorizontalGap:b,primaryNodeVerticalGap:w,mobileMenu:N,closeButton:a,widthControll:d,uploadButton:f,nodeDraggable:y}){const C=document.getElementById(e);!C||(this.mindElixirBox=C,this.before=m||{},this.nodeData=t.nodeData,this.linkData=t.linkData||{},this.expandDeep=t==null?void 0:t.expandDeep,this.locale=i,this.contextMenuOption=l,this.contextMenu=r===void 0?!0:r,this.toolBar=c===void 0?!0:c,this.nodeMenu=h===void 0?!0:h,this.keypress=u===void 0?!0:u,this.closeButton=a===void 0?!1:a,this.widthControll=d===void 0?!0:d,this.mobileMenu=N,this.direction=t.direction!==void 0?t.direction:typeof n=="number"?n:1,this.draggable=o===void 0?!0:o,this.newTopicName=p,this.editable=s===void 0?!0:s,this.allowUndo=g===void 0?!0:g,this.currentNode=null,this.currentLink=null,this.inputDiv=null,this.scaleVal=1,this.tempDirection=null,this.primaryLinkStyle=x||0,this.overflowHidden=E,this.primaryNodeHorizontalGap=b,this.primaryNodeVerticalGap=w,this.uploadButton=f===void 0?!0:f,this.nodeDraggable=y===void 0?!1:y,this.bus=new De,this.bus.addListener("operation",v=>{if(this.isUndo){this.isUndo=!1;return}["moveNode","removeNode","addChild","finishEdit","editStyle","editTags","editIcons"].includes(v.name)&&this.history.push(v)}),this.history=[],this.isUndo=!1,this.undo=function(){const v=this.history.pop();!v||(this.isUndo=!0,v.name==="moveNode"?this.moveNode(G(v.obj.fromObj.id),G(v.obj.originParentId)):v.name==="removeNode"?v.originSiblingId?this.insertBefore(G(v.originSiblingId),v.obj):this.addChild(G(v.originParentId),v.obj):v.name==="addChild"||v.name==="copyNode"?this.removeNode(G(v.obj.id)):v.name==="finishEdit"?this.setNodeTopic(G(v.obj.id),v.origin):this.isUndo=!1)})}function M(e){return async function(...t){(!this.before[e.name]||await this.before[e.name].apply(this,t))&&e.apply(this,t)}}return P.prototype={addParentLink:D,getObjById:me,generateNewObj:Re,generateNewSummaryObj:Ie,insertSibling:M(Wt),insertBefore:M(Gt),insertParent:M(Xt),addSummary:M(Jt),addChild:M(Kt),copyNode:M(Zt),moveNode:M(nn),removeNode:M(tn),moveUpNode:M(Qt),moveDownNode:M(en),beginEdit:M(rn),moveNodeBefore:M(on),moveNodeAfter:M(sn),updateNodeStyle:qt,updateNodeTags:jt,updateNodeIcons:Vt,updateNodeHyperLink:_t,updateNodeRemark:Yt,processPrimaryNode:an,setNodeTopic:ln,createLink:cn,removeLink:dn,selectLink:hn,hideLinkController:un,showLinkController:pn,layout:it,linkDiv:fn,createInputDiv:tt,shapeTpc:j,createChildren:nt,createGroup:Je,createTop:Ze,createTopic:Qe,createSummary:Ke,selectNode:ft,unselectNode:mt,selectNextSibling:gt,selectPrevSibling:bt,selectFirstChild:xt,selectParent:yt,getAllDataString:vt,getAllData:Nt,getAllDataWithAutoHide:kt,getAllDataMd:wt,scale:St,toCenter:Mt,toTopLeft:Dt,focusNode:Ht,cancelFocus:Bt,initLeft:Ot,initRight:zt,initSide:Pt,setLocale:Ft,enableEdit:Ct,disableEdit:Et,expandNode:Rt,refresh:It,exportSvg:ut,exportSvgDom:pt,init:function(e,t){e&&(this.nodeData=e),t&&(this.expandDeep=t),D(this.nodeData),console.log("ME_version "+P.version),console.log(this),this.mindElixirBox.className.indexOf("mind-elixir")===-1&&(this.mindElixirBox.className+=" mind-elixir"),this.mindElixirBox.innerHTML="",this.container=X.createElement("div"),this.container.className="map-container",this.overflowHidden&&(this.container.style.overflow="hidden"),this.map=X.createElement("div"),this.map.className="map-canvas",this.map.setAttribute("tabindex","0"),this.container.appendChild(this.map),this.mindElixirBox.appendChild(this.container),this.root=X.createElement("root"),this.box=X.createElement("children"),this.box.className="mindbox",this.svg2nd=K("svg2nd"),this.linkController=K("linkcontroller"),this.P2=X.createElement("div"),this.P3=X.createElement("div"),this.P2.className=this.P3.className="circle",this.line1=ke(0,0,0,0),this.line2=ke(0,0,0,0),this.linkController.appendChild(this.line1),this.linkController.appendChild(this.line2),this.linkSvgGroup=K("topiclinks"),this.map.appendChild(this.root),this.map.appendChild(this.box),this.map.appendChild(this.svg2nd),this.map.appendChild(this.linkController),this.map.appendChild(this.linkSvgGroup),this.map.appendChild(this.P2),this.map.appendChild(this.P3),this.toolBar&&Cn(this),this.nodeMenu&&Sn(this),this.keypress&&Tn(this),xn(this),Pe()&&this.mobileMenu?An(this):this.contextMenu&&gn(this,this.contextMenuOption),this.draggable&&$n(this),this.layout(),this.linkDiv(),this.toTopLeft(),mn(this)}},P.LEFT=0,P.RIGHT=1,P.SIDE=2,P.version="0.17.0",P.E=$,P.new=e=>({nodeData:{id:U(),topic:e||"new topic",root:!0,style:{color:"#ffffff",background:"#00aaff"},children:[]},linkData:{}}),P});
//# sourceMappingURL=mind.umd.js.map
