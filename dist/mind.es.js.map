{"version":3,"file":"mind.es.js","sources":["../src/const.ts","../src/utils/index.ts","../painter/index.foreignObject.js","../src/interact.ts","../src/utils/dom.ts","../src/utils/svg.ts","../src/nodeOperation.ts","../src/customLink.ts","../src/linkDiv.ts","../src/mouse.ts","../src/i18n.ts","../src/plugin/contextMenu.ts","../src/plugin/sidebar.ts","../src/plugin/toolBar.ts","../src/plugin/nodeMenu.ts","../src/plugin/nodeDraggable.ts","../src/plugin/keypress.ts","../src/plugin/mobileMenu.ts","../src/utils/pubsub.ts","../src/iconfont/iconfont.js","../src/index.ts"],"sourcesContent":["export const LEFT = 0\nexport const RIGHT = 1\nexport const SIDE = 2\nexport const DOWN = 3\n\nexport const GAP = 15\nexport const PRIMARY_NODE_HORIZONTAL_GAP = 65\nexport const PRIMARY_NODE_VERTICAL_GAP = 25\nexport const TURNPOINT_R = 8\n","import { NodeObj } from '../index'\n\nexport function encodeHTML(s) {\n  return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;')\n}\n\nexport const isMobile = (): boolean =>\n  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n    navigator.userAgent\n  )\n\nexport const rgbHex = (rgb) => {\n  return rgb.replace(\n    /\\brgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/g,\n    function($0, $1, $2, $3) {\n      return '#' + ('0' + Number($1).toString(16)).substr(-2) + ('0' + Number($2).toString(16)).substr(-2) + ('0' + Number($3).toString(16)).substr(-2)\n    })\n}\n\nexport const getObjById = function(id: string, data: NodeObj) {\n  data = data || this.nodeData\n  if (data.id === id) {\n    return data\n  } else if (data.children && data.children.length) {\n    for (let i = 0; i < data.children.length; i++) {\n      const res = getObjById(id, data.children[i])\n      if (res) return res\n    }\n  } else {\n    return null\n  }\n}\n\nexport const addParentLink = (data: NodeObj, parent?: NodeObj) => {\n  data.parent = parent\n  if (data.children) {\n    for (let i = 0; i < data.children.length; i++) {\n      addParentLink(data.children[i], data)\n    }\n  }\n}\n\nexport function refreshIds(data: NodeObj) {\n  data.id = generateUUID()\n  if (data.children) {\n    for (let i = 0; i < data.children.length; i++) {\n      refreshIds(data.children[i])\n    }\n  }\n}\n\nexport const throttle = (fn: (any) => void, wait: number) => {\n  var pre = Date.now()\n  return function() {\n    var context = this\n    var args = arguments\n    var now = Date.now()\n    if (now - pre >= wait) {\n      fn.apply(context, args)\n      pre = Date.now()\n    }\n  }\n}\n\nexport function getArrowPoints(p3x: number, p3y: number, p4x: number, p4y: number) {\n  const deltay = p4y - p3y\n  const deltax = p3x - p4x\n  let angle = (Math.atan(Math.abs(deltay) / Math.abs(deltax)) / 3.14) * 180\n  if (deltax < 0 && deltay > 0) {\n    angle = 180 - angle\n  }\n  if (deltax < 0 && deltay < 0) {\n    angle = 180 + angle\n  }\n  if (deltax > 0 && deltay < 0) {\n    angle = 360 - angle\n  }\n  const arrowLength = 20\n  const arrowAngle = 30\n  var a1 = angle + arrowAngle\n  const a2 = angle - arrowAngle\n  return {\n    x1: p4x + Math.cos((Math.PI * a1) / 180) * arrowLength,\n    y1: p4y - Math.sin((Math.PI * a1) / 180) * arrowLength,\n    x2: p4x + Math.cos((Math.PI * a2) / 180) * arrowLength,\n    y2: p4y - Math.sin((Math.PI * a2) / 180) * arrowLength,\n  }\n}\n\nexport function calcP1(fromData, p2x, p2y) {\n  let x, y\n  const k = (fromData.cy - p2y) / (p2x - fromData.cx)\n  if (k > fromData.h / fromData.w || k < -fromData.h / fromData.w) {\n    if (fromData.cy - p2y < 0) {\n      x = fromData.cx - fromData.h / 2 / k\n      y = fromData.cy + fromData.h / 2\n    } else {\n      x = fromData.cx + fromData.h / 2 / k\n      y = fromData.cy - fromData.h / 2\n    }\n  } else {\n    // console.log('斜率', k)\n    // console.log('fromData.cx-x', fromData.cx - p2x)\n    if (fromData.cx - p2x < 0) {\n      x = fromData.cx + fromData.w / 2\n      y = fromData.cy - (fromData.w * k) / 2\n    } else {\n      x = fromData.cx - fromData.w / 2\n      y = fromData.cy + (fromData.w * k) / 2\n    }\n  }\n  return {\n    x,\n    y,\n  }\n}\n\nexport function calcP4(toData, p3x, p3y) {\n  let x, y\n  const k = (toData.cy - p3y) / (p3x - toData.cx)\n  if (k > toData.h / toData.w || k < -toData.h / toData.w) {\n    if (toData.cy - p3y < 0) {\n      x = toData.cx - toData.h / 2 / k\n      y = toData.cy + toData.h / 2\n    } else {\n      x = toData.cx + toData.h / 2 / k\n      y = toData.cy - toData.h / 2\n    }\n  } else {\n    // console.log('斜率', k)\n    // console.log('toData.cx-x', toData.cx - p3x)\n    if (toData.cx - p3x < 0) {\n      x = toData.cx + toData.w / 2\n      y = toData.cy - (toData.w * k) / 2\n    } else {\n      x = toData.cx - toData.w / 2\n      y = toData.cy + (toData.w * k) / 2\n    }\n  }\n  return {\n    x,\n    y,\n  }\n}\n\nexport function generateUUID(): string {\n  return (\n    new Date().getTime().toString(16) + Math.random().toString(16).substr(2)\n  ).substr(2, 16)\n}\n\nexport function generateNewObj(): NodeObj {\n  const id = generateUUID()\n  return {\n    topic: this.newTopicName || 'new node',\n    id,\n  }\n}\n\nexport function generateNewLink(from, to) {\n  const id = generateUUID()\n  return {\n    id,\n    name: '',\n    from,\n    to,\n    delta1: { x: 0, y: -100 },\n    delta2: { x: 0, y: -100 },\n  }\n}\n\nexport function checkMoveValid(from: NodeObj, to: NodeObj) {\n  let valid = true\n  while (to.parent) {\n    if (to.parent === from) {\n      valid = false\n      break\n    }\n    to = to.parent\n  }\n  return valid\n}\n\nexport function getObjSibling(obj: NodeObj): NodeObj {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  if (index + 1 >= childrenList.length) {\n    // 最后一个\n    return null\n  } else {\n    return childrenList[index + 1]\n  }\n}\n\nexport function moveUpObj(obj: NodeObj) {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  const t = childrenList[index]\n  if (index === 0) {\n    childrenList[index] = childrenList[childrenList.length - 1]\n    childrenList[childrenList.length - 1] = t\n  } else {\n    childrenList[index] = childrenList[index - 1]\n    childrenList[index - 1] = t\n  }\n}\n\nexport function moveDownObj(obj: NodeObj) {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  const t = childrenList[index]\n  if (index === childrenList.length - 1) {\n    childrenList[index] = childrenList[0]\n    childrenList[0] = t\n  } else {\n    childrenList[index] = childrenList[index + 1]\n    childrenList[index + 1] = t\n  }\n}\n\nexport function removeNodeObj(obj: NodeObj) {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  childrenList.splice(index, 1)\n  return childrenList.length\n}\n\nexport function insertNodeObj(obj: NodeObj, newObj: NodeObj) {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  childrenList.splice(index + 1, 0, newObj)\n}\n\nexport function insertBeforeNodeObj(obj: NodeObj, newObj: NodeObj) {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  childrenList.splice(index, 0, newObj)\n}\n\nexport function insertParentNodeObj(obj: NodeObj, newObj: NodeObj) {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  childrenList[index] = newObj\n  newObj.children = [obj]\n}\n\nexport function moveNodeObj(from: NodeObj, to: NodeObj) {\n  removeNodeObj(from)\n  if (to.children) to.children.push(from)\n  else to.children = [from]\n}\n\nexport function moveNodeBeforeObj(from: NodeObj, to: NodeObj) {\n  removeNodeObj(from)\n  const childrenList = to.parent.children\n  let toIndex = 0\n  for (let i = 0; i < childrenList.length; i++) {\n    if (childrenList[i] === to) {\n      toIndex = i\n      break\n    }\n  }\n  childrenList.splice(toIndex, 0, from)\n}\n\nexport function moveNodeAfterObj(from: NodeObj, to: NodeObj) {\n  removeNodeObj(from)\n  const childrenList = to.parent.children\n  let toIndex = 0\n  for (let i = 0; i < childrenList.length; i++) {\n    if (childrenList[i] === to) {\n      toIndex = i\n      break\n    }\n  }\n  childrenList.splice(toIndex + 1, 0, from)\n}\n\nexport const dragMoveHelper = {\n  afterMoving: false, // 区别click事件\n  mousedown: false,\n  lastX: null,\n  lastY: null,\n  onMove(e, container) {\n    if (this.mousedown) {\n      this.afterMoving = true\n      if (!this.lastX) {\n        this.lastX = e.pageX\n        this.lastY = e.pageY\n        return\n      }\n      const deltaX = this.lastX - e.pageX\n      const deltaY = this.lastY - e.pageY\n      container.scrollTo(\n        container.scrollLeft + deltaX,\n        container.scrollTop + deltaY\n      )\n      this.lastX = e.pageX\n      this.lastY = e.pageY\n    }\n  },\n  clear() {\n    this.afterMoving = false\n    this.mousedown = false\n    this.lastX = null\n    this.lastY = null\n  },\n}\n\nexport function LinkDragMoveHelper(dom) {\n  this.dom = dom\n  this.mousedown = false\n  this.lastX = null\n  this.lastY = null\n}\n\nLinkDragMoveHelper.prototype.init = function(map, cb) {\n  this.handleMouseMove = e => {\n    e.stopPropagation()\n    if (this.mousedown) {\n      if (!this.lastX) {\n        this.lastX = e.pageX\n        this.lastY = e.pageY\n        return\n      }\n      const deltaX = this.lastX - e.pageX\n      const deltaY = this.lastY - e.pageY\n      cb(deltaX, deltaY)\n      this.lastX = e.pageX\n      this.lastY = e.pageY\n    }\n  }\n  this.handleMouseDown = e => {\n    e.stopPropagation()\n    this.mousedown = true\n  }\n  this.handleClear = e => {\n    e.stopPropagation()\n    this.clear()\n  }\n  map.addEventListener('mousemove', this.handleMouseMove)\n  map.addEventListener('mouseleave', this.handleClear)\n  map.addEventListener('mouseup', this.handleClear)\n  this.dom.addEventListener('mousedown', this.handleMouseDown)\n}\n\nLinkDragMoveHelper.prototype.destory = function(map) {\n  map.removeEventListener('mousemove', this.handleMouseMove)\n  map.removeEventListener('mouseleave', this.handleClear)\n  map.removeEventListener('mouseup', this.handleClear)\n  this.dom.removeEventListener('mousedown', this.handleMouseDown)\n}\n\nLinkDragMoveHelper.prototype.clear = function() {\n  this.mousedown = false\n  this.lastX = null\n  this.lastY = null\n}\n","import { Canvg } from 'canvg';\nlet $d = document\nlet maxTop = 10000\nlet maxBottom = 10000\nlet maxLeft = 10000\nlet maxRight = 10000\nlet imgPadding = 40\nlet head = `<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">`\nfunction generateSvgDom() {\n  let primaryNodes = $d.querySelectorAll('.mindbox > grp, root')\n  let svgContent = ''\n  for (let i = 0; i < primaryNodes.length; i++) {\n    let primaryNode = primaryNodes[i]\n    let rect = primaryNode.getBoundingClientRect()\n    let top = primaryNode.offsetTop\n    let bottom = top + rect.height\n    let left = primaryNode.offsetLeft\n    let right = left + rect.width\n    // console.log(top, bottom, left, right)\n    if (top < maxTop) {\n      maxTop = top\n    }\n    if (bottom > maxBottom) {\n      maxBottom = bottom\n    }\n    if (left < maxLeft) {\n      maxLeft = left\n    }\n    if (right > maxRight) {\n      maxRight = right\n    }\n    svgContent += PrimaryToSvg(primaryNode)\n  }\n  console.log(maxTop, maxBottom, maxLeft, maxRight)\n  svgContent += RootToSvg()\n  // 需要添加图片边缘padding\n  let svgHeight = maxBottom - maxTop + imgPadding * 2\n  let svgWidth = maxRight - maxLeft + imgPadding * 2\n  let svgFile = createSvg(svgHeight, svgWidth)\n  svgContent =\n    `<rect x=\"0\" y=\"0\" width=\"${svgWidth}\" height=\"${svgHeight}\" fill=\"#f6f6f6\"></rect>` +\n    svgContent\n  svgFile.innerHTML = svgContent\n  // document.body.append(svgFile)\n  return svgFile\n}\n\nexport function getHeightAndWidth() {\n  let primaryNodes = $d.querySelectorAll('.mindbox > grp, root')\n  let svgContent = ''\n  for (let i = 0; i < primaryNodes.length; i++) {\n    let primaryNode = primaryNodes[i]\n    let rect = primaryNode.getBoundingClientRect()\n    let top = primaryNode.offsetTop\n    let bottom = top + rect.height\n    let left = primaryNode.offsetLeft\n    let right = left + rect.width\n    // console.log(top, bottom, left, right)\n    if (top < maxTop) {\n      maxTop = top\n    }\n    if (bottom > maxBottom) {\n      maxBottom = bottom\n    }\n    if (left < maxLeft) {\n      maxLeft = left\n    }\n    if (right > maxRight) {\n      maxRight = right\n    }\n    svgContent += PrimaryToSvg(primaryNode)\n  }\n  console.log(maxTop, maxBottom, maxLeft, maxRight)\n  let svgHeight = maxBottom - maxTop\n  let svgWidth = maxRight - maxLeft\n  console.log('svgHeight',svgHeight)\n  return [svgHeight,svgWidth]\n}\n\nfunction createSvg(height, width) {\n  let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n  svg.setAttribute('height', height)\n  svg.setAttribute('width', width)\n  svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg')\n  svg.setAttribute('version', '1.2')\n  svg.setAttribute('xlink', 'http://www.w3.org/1999/xlink')\n  return svg\n}\n\nfunction RootToSvg() {\n  let root = document.querySelector('root')\n  let rootTpc = document.querySelector('root > tpc')\n  let rect = rootTpc.getBoundingClientRect()\n  let tpcStyle = getComputedStyle(rootTpc)\n  let t = rootTpc.parentNode\n  let top = 0\n  let left = 0\n  let nodeObj = document.querySelector('root > tpc').nodeObj\n  let tStyle = getComputedStyle(t)\n  let rootOffsetY = root.offsetTop - maxTop\n  let rootOffsetX = root.offsetLeft - maxLeft\n  let topicOffsetLeft =\n  left + parseInt(tStyle.paddingLeft) + parseInt(rect.paddingLeft)\n  let topicOffsetTop =\n  top +\n  parseInt(tStyle.paddingTop) +\n  parseInt(rect.paddingTop) +\n  parseInt(rect.fontSize)\n  let topicOffsetTopTop =\n  top +\n  parseInt(tStyle.paddingTop) +\n  parseInt(rect.paddingTop)\n  let svg2ndEle = document.querySelector('.svg2nd')\n\n  // render tags\n  let tags = ''\n  if (nodeObj.tags && nodeObj.tags.length) {\n    let tagsEle = rootTpc.querySelectorAll('.tags > span')\n    for (let i = 0; i < tagsEle.length; i++) {\n      let tag = tagsEle[i]\n      let tagRect = tag.getBoundingClientRect()\n      tags += `<rect x=\"${topicOffsetLeft}\" y=\"${\n        topicOffsetTop + 4\n        }\" rx=\"5px\" ry=\"5px\" width=\"${tagRect.width}\" height=\"${\n        tagRect.height\n        }\" style=\"fill: #d6f0f8;\"></rect>\n        <foreignObject x=\"${topicOffsetLeft}\" y=\"${\n          topicOffsetTop + 4\n          }\" rx=\"5px\" ry=\"5px\" width=\"${tagRect.width}\" height=\"${\n          tagRect.height\n          }\" > \n          <div sytle=\"font-size:12px\">${tag.innerHTML}</div>\n        </foreignObject>\n      `\n    }\n  }\n  let icons = ''\n  if (nodeObj.icons && nodeObj.icons.length) {\n    let iconsEle = rootTpc.querySelectorAll('.icons > span')\n    for (let i = 0; i < iconsEle.length; i++) {\n      let icon = iconsEle[i]\n      let iconRect = icon.getBoundingClientRect()\n      icons += `\n      <tspan>${icon.innerHTML}</tspan>`\n    }\n  }\n  //render images\n  let images = ''\n  if (nodeObj.image && nodeObj.image.length) {\n    let imagesEle = tpc.querySelectorAll('.image')\n    for (let i = 0; i < imagesEle.length; i++) {\n      let image = imagesEle[i]\n      let imageRect = image.getBoundingClientRect()\n      images += `${image.outerHTML}`\n    }\n  }\n\n  let svg2nd = `<g transform=\"translate(${imgPadding - maxLeft}, ${\n    imgPadding - maxTop\n    })\">${svg2ndEle.innerHTML}</g>`\n  // return (\n    svg2nd +=\n    `<g id=\"root\" transform=\"translate(${rootOffsetX + imgPadding}, ${\n    rootOffsetY + imgPadding\n    })\">\n      <rect x=\"${left}\" y=\"${top}\" rx=\"5px\" ry=\"5px\" width=\"${\n    rect.width\n    }\" height=\"${rect.height}\" style=\"fill: #00aaff;\"></rect>\n      <foreignObject x=\"${left + 15}\" y=\"${\n        top + 10\n        }\" width=\"${tpcStyle.width}\" height=\"${tpcStyle.height}\" \">\n        <div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"padding:0;margin:0;font-family:微软雅黑;font-size:${tpcStyle.fontSize};font-weight:${tpcStyle.fontWeight};color:${tpcStyle.color};word-break: break-all;line-height: 1\">\n        ${nodeObj.topic}\n        ${icons}\n        ${images}\n      </div>\n      </foreignObject>\n      ${tags}\n  </g>`\n  // )\n  let topiclinks=$d.querySelector('.topiclinks')\n  if(topiclinks){\n    svg2nd+=`<g transform=\"translate(${imgPadding - maxLeft}, ${\n      imgPadding - maxTop\n    })\">${topiclinks.innerHTML}</g>`\n  }\n  return svg2nd\n}\n\nfunction PrimaryToSvg(primaryNode) {\n  let topics = primaryNode.querySelectorAll('tpc')\n  let primaryNodeOffsetY = primaryNode.offsetTop - maxTop\n  let primaryNodeOffsetX = primaryNode.offsetLeft - maxLeft\n\n  let svg = ''\n  let svg3rd = primaryNode.querySelector('.svg3rd')\n  svg += `<g transform=\"translate(${primaryNodeOffsetX + imgPadding}, ${\n    primaryNodeOffsetY + imgPadding\n    })\">`\n  svg += svg3rd ? svg3rd.innerHTML : ''\n  for (let i = 0; i < topics.length; i++) {\n    let tpc = topics[i]\n    let t = tpc.parentNode\n    let nodeObj = tpc.nodeObj\n    if (nodeObj.root) { continue }\n    let tpcRect = tpc.getBoundingClientRect()\n    let top = t.offsetTop\n    let left = t.offsetLeft\n    let tpcStyle = getComputedStyle(tpc)\n    let tStyle = getComputedStyle(t)\n    let topicOffsetLeft =\n      left + parseInt(tStyle.paddingLeft) + parseInt(tpcStyle.paddingLeft)\n    let topicOffsetTop =\n      top +\n      parseInt(tStyle.paddingTop) +\n      parseInt(tpcStyle.paddingTop) +\n      parseInt(tpcStyle.fontSize)\n    let topicOffsetTopTop =\n      top +\n      parseInt(tStyle.paddingTop) +\n      parseInt(tpcStyle.paddingTop)\n    // style render\n    let border = ''\n    if (tpcStyle.borderWidth != '0px') {\n      border = `<rect x=\"${left + 15}\" y=\"${top}\" rx=\"5px\" ry=\"5px\" width=\"${\n        tpcRect.width\n        }\" height=\"${\n        tpcRect.height\n        }\" style=\"fill: rgba(0,0,0,0); stroke:#444;stroke-width:1px;\"></rect>`\n    }\n    let backgroundColor = ''\n    if (tpcStyle.backgroundColor != 'rgba(0, 0, 0, 0)') {\n      backgroundColor = `<rect x=\"${\n        left + 15\n        }\" y=\"${top}\" rx=\"5px\" ry=\"5px\" width=\"${tpcRect.width}\" height=\"${\n        tpcRect.height\n        }\" style=\"fill: ${tpcStyle.backgroundColor};\"></rect>`\n    }\n    // render tags\n    let tags = ''\n    if (nodeObj.tags && nodeObj.tags.length) {\n      let tagsEle = tpc.querySelectorAll('.tags > span')\n      for (let i = 0; i < tagsEle.length; i++) {\n        let tag = tagsEle[i]\n        let tagRect = tag.getBoundingClientRect()\n        tags += `<rect x=\"${topicOffsetLeft}\" y=\"${\n          topicOffsetTop + 4\n          }\" rx=\"5px\" ry=\"5px\" width=\"${tagRect.width}\" height=\"${\n          tagRect.height\n          }\" style=\"fill: #d6f0f8;\"></rect>\n          <foreignObject x=\"${topicOffsetLeft}\" y=\"${\n            topicOffsetTop + 4\n            }\" rx=\"5px\" ry=\"5px\" width=\"${tagRect.width}\" height=\"${\n            tagRect.height\n            }\" > \n            <div sytle=\"font-size:12px\">${tag.innerHTML}</div>\n          </foreignObject>`\n      }\n    }\n    let icons = ''\n    if (nodeObj.icons && nodeObj.icons.length) {\n      let iconsEle = tpc.querySelectorAll('.icons > span')\n      for (let i = 0; i < iconsEle.length; i++) {\n        let icon = iconsEle[i]\n        let iconRect = icon.getBoundingClientRect()\n        icons += `\n        <tspan>${icon.innerHTML}</tspan>`\n      }\n    }\n      //render images\n    let images = ''\n    if (nodeObj.image && nodeObj.image.length) {\n      let imagesEle = tpc.querySelectorAll('.image')\n      for (let i = 0; i < imagesEle.length; i++) {\n        let image = imagesEle[i]\n        let imageRect = image.getBoundingClientRect()\n        images += `${image.outerHTML}`\n      }\n    }\n    // render every single node\n    svg += `<g id=\"${nodeObj.id}\">\n      ${border}\n      ${backgroundColor}\n      <foreignObject  x=\"${topicOffsetLeft}\" y=\"${topicOffsetTopTop}\" width=\"${tpcStyle.width}\" height=\"${tpcStyle.height}\">\n      <div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"padding:0;margin:0;font-family:微软雅黑;font-size:${tpcStyle.fontSize};font-weight:${tpcStyle.fontWeight};color:${tpcStyle.color};word-break: break-all;line-height: 1\">\n        ${nodeObj.topic}\n        ${icons}\n        ${images}\n      </div>\n      </foreignObject>\n      ${tags}\n  </g>`\n  }\n  svg += '</g>'\n  return svg\n}\n\nexport let exportSvg = function () {\n  let svgFile = generateSvgDom()\n  let dlUrl = URL.createObjectURL(\n    new Blob([head + svgFile.outerHTML.replace(/&nbsp;/g, ' ')])\n  )\n  let a = document.createElement('a')\n  a.href = dlUrl\n  a.download = 'me-mindmap.svg'\n  a.click()\n}\n\nexport let exportSvgDom = function (instance=this, fileName='default') {\n  // if (!instance) throw new Error('Mind-elixir instance is not presented. ---> exportSvg(instance, fileName)') \n  // initVar()\n  $d = instance.container\n  let svgFile = generateSvgDom()\n  return svgFile\n}\n\nexport let exportPng = async function () {\n  let svgFile = generateSvgDom()\n  const canvas = document.createElement('canvas')\n  canvas.style.display = 'none'\n  const ctx = canvas.getContext('2d')\n  // Canvg do not support foreignObject\n  let v = await Canvg.fromString(\n    ctx,\n    head + svgFile.outerHTML.replace(/&nbsp;/g, ' ')\n  )\n  v.start()\n  let imgURL = canvas.toDataURL('image/png')\n  let a = document.createElement('a')\n  a.href = imgURL\n  a.download = 'me-mindmap.png'\n  a.click()\n}\n\n\nexport default {\n  exportSvg, exportPng\n}","import { node } from 'canvg/dist/presets'\nimport { MindElixirInstance, NodeObj } from '.'\nimport { getHeightAndWidth } from '../painter/index.foreignObject'\nimport { MindElixirData } from './index.lite'\nimport { findEle } from './utils/dom'\n/**\n * @exports -\n * workaround for jsdoc\n */\n/**\n * @exports MapInteraction\n * @namespace MapInteraction\n */\nfunction getData(instance) {\n  return instance.isFocusMode ? instance.nodeDataBackup : instance.nodeData\n}\n/**\n * @function\n * @instance\n * @name selectNode\n * @memberof MapInteraction\n * @description Select a node and add solid border to it.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n */\nexport const selectNode = function(targetElement, isNewNode, clickEvent) {\n  if (!targetElement) return\n  console.time('selectNode')\n  if (typeof targetElement === 'string') {\n    return this.selectNode(findEle(targetElement))\n  }\n  if (this.currentNode) this.currentNode.className = ''\n  targetElement.className = 'selected'\n  const widthControllRight=targetElement.querySelector('widthControllRight')\n  widthControllRight.className='width-controll-right'\n  const widthControllLeft=targetElement.querySelector('widthControllLeft')\n  widthControllLeft.className='width-controll-left'\n  this.currentNode = targetElement\n  if (isNewNode) {\n    this.bus.fire('selectNewNode', targetElement.nodeObj, clickEvent)\n  } else {\n    this.bus.fire('selectNode', targetElement.nodeObj, clickEvent)\n  }\n  console.timeEnd('selectNode')\n}\nexport const unselectNode = function() {\n  if (this.currentNode) {\n    this.currentNode.className = ''\n    const widthControllRight=this.currentNode.querySelector('widthControllRight')\n    widthControllRight.className=''\n    const widthControllLeft=this.currentNode.querySelector('widthControllLeft')\n    widthControllLeft.className=''\n  }\n  this.currentNode = null\n  this.bus.fire('unselectNode')\n}\nexport const selectNextSibling = function() {\n  if (!this.currentNode || this.currentNode.dataset.nodeid === 'meroot') return undefined\n\n  const sibling = this.currentNode.parentElement.parentElement.nextSibling\n  let target: HTMLElement\n  const grp = this.currentNode.parentElement.parentElement\n  if (grp.className === 'rhs' || grp.className === 'lhs') {\n    const siblingList = this.mindElixirBox.querySelectorAll('.' + grp.className)\n    const i = Array.from(siblingList).indexOf(grp)\n    if (i + 1 < siblingList.length) {\n      target = siblingList[i + 1].firstChild.firstChild\n    } else {\n      return false\n    }\n  } else if (sibling) {\n    target = sibling.firstChild.firstChild\n  } else {\n    return false\n  }\n  this.selectNode(target)\n  return true\n}\nexport const selectPrevSibling = function() {\n  if (!this.currentNode || this.currentNode.dataset.nodeid === 'meroot') return undefined\n\n  const sibling = this.currentNode.parentElement.parentElement.previousSibling\n  let target\n  const grp = this.currentNode.parentElement.parentElement\n  if (grp.className === 'rhs' || grp.className === 'lhs') {\n    const siblingList = this.mindElixirBox.querySelectorAll('.' + grp.className)\n    const i = Array.from(siblingList).indexOf(grp)\n    if (i - 1 >= 0) {\n      target = siblingList[i - 1].firstChild.firstChild\n    } else {\n      return false\n    }\n  } else if (sibling) {\n    target = sibling.firstChild.firstChild\n  } else {\n    return false\n  }\n  this.selectNode(target)\n  return true\n}\nexport const selectFirstChild = function() {\n  if (!this.currentNode) return\n  const children = this.currentNode.parentElement.nextSibling\n  if (children && children.firstChild) {\n    const target = children.firstChild.firstChild.firstChild\n    this.selectNode(target)\n  }\n}\nexport const selectParent = function() {\n  if (!this.currentNode || this.currentNode.dataset.nodeid === 'meroot') return undefined\n\n  const parent = this.currentNode.parentElement.parentElement.parentElement\n    .previousSibling\n  if (parent) {\n    const target = parent.firstChild\n    this.selectNode(target)\n  }\n}\n/**\n * @function\n * @instance\n * @name getAllDataString\n * @description Get all node data as string.\n * @memberof MapInteraction\n * @return {string}\n */\nexport const getAllDataString = function() {\n  const data = {\n    direction:this.direction,\n    nodeData: getData(this),\n    linkData: this.linkData,\n  }\n  return JSON.stringify(data, (k, v) => {\n    if (k === 'parent') return undefined\n    if (k === 'from') return v.nodeObj.id\n    if (k === 'to') return v.nodeObj.id\n    return v\n  })\n}\n/**\n * @function\n * @instance\n * @name getAllData\n * @description Get all node data as object.\n * @memberof MapInteraction\n * @return {Object}\n */\nexport const getAllData = function(): object {\n  const data = {\n    direction:this.direction,\n    nodeData: getData(this),\n    linkData: this.linkData,\n  }\n  return JSON.parse(\n    JSON.stringify(data, (k, v) => {\n      if (k === 'parent') return undefined\n      if (k === 'from') return v.nodeObj.id\n      if (k === 'to') return v.nodeObj.id\n      return v\n    })\n  )\n}\n\n/**\n * @function\n * @instance\n * @name getAllDataWithAutoHide\n * @description Get all the data of automatically hidden third-level nodes\n * @memberof MapInteraction\n * @return {Object}\n */\n\nfunction autoHide(nodeData:NodeObj,cnt,deep){\n  if(cnt<deep){\n    nodeData.expanded=true\n  }else{\n    nodeData.expanded=false\n  }\n  for(const val of (nodeData.children||[])){\n    autoHide(val,cnt+1,deep)\n  }\n}\n export const getAllDataWithAutoHide = function(): object {\n  const expandDeep=Number(this.container.querySelector('.numberSelection').value)||3\n  const data = {\n    direction:this.direction,\n    nodeData: getData(this),\n    linkData: this.linkData,\n    height:getHeightAndWidth(),\n    expandDeep\n  }\n  autoHide(data.nodeData,0,expandDeep)\n  return JSON.parse(\n    JSON.stringify(data, (k, v) => {\n      if (k === 'parent') return undefined\n      if (k === 'from') return v.nodeObj.id\n      if (k === 'to') return v.nodeObj.id\n      return v\n    })\n  )\n}\n\n/**\n * @function\n * @instance\n * @name getAllDataMd\n * @description Get all node data as markdown.\n * @memberof MapInteraction\n * @return {String}\n */\nexport const getAllDataMd = function():string {\n  const data = getData(this)\n  let mdString = '# ' + data.topic + '\\n\\n'\n  function writeMd(children, deep) {\n    for (let i = 0; i < children.length; i++) {\n      if (deep <= 6) {\n        mdString += ''.padStart(deep, '#') + ' ' + children[i].topic + '\\n\\n'\n      } else {\n        mdString +=\n          ''.padStart(deep - 7, '\\t') + '- ' + children[i].topic + '\\n'\n      }\n      if (children[i].children) {\n        writeMd(children[i].children, deep + 1)\n      }\n    }\n  }\n  writeMd(data.children, 2)\n  return mdString\n}\n\n/**\n * @function\n * @instance\n * @name enableEdit\n * @memberof MapInteraction\n */\nexport const enableEdit = function() {\n  this.editable = true\n}\n\n/**\n * @function\n * @instance\n * @name disableEdit\n * @memberof MapInteraction\n */\nexport const disableEdit = function() {\n  this.editable = false\n}\n\n/**\n * @function\n * @instance\n * @name scale\n * @description Change the scale of the mind map.\n * @memberof MapInteraction\n * @param {number}\n */\nexport const scale = function(scaleVal) {\n  this.scaleVal = scaleVal\n  this.map.style.transform = 'scale(' + scaleVal + ')'\n}\n\nfunction getRootWidth(node:HTMLElement){\n  const root=node.querySelector('root')as HTMLElement\n  return root.offsetWidth||150\n}\nfunction getRootHeight(node:HTMLElement){\n  const root=node.querySelector('root')as HTMLElement\n  return root.offsetHeight||150\n}\n\nfunction getHeightDistance(a:HTMLElement,b:HTMLElement){\n  const aHeight=a?.getBoundingClientRect()?.top||0\n  const bHeight=b?.getBoundingClientRect()?.top||aHeight\n  console.log(aHeight,bHeight)\n  return Math.abs(aHeight-bHeight)\n}\n\nfunction getWidthDistance(a:HTMLElement,b:HTMLElement){\n  const aWidth=a?.getBoundingClientRect()?.left||0\n  const bWidth=b?.getBoundingClientRect()?.left||aWidth\n  console.log(aWidth,bWidth)\n  return Math.abs(aWidth-bWidth)\n}\n\nexport function getHeightFromRootToAnotherNode(node:HTMLElement,anotherNode:HTMLElement){\n  const tpc=node.querySelector('root')as HTMLElement\n  return getHeightDistance(tpc,anotherNode)\n}\n\nexport function getWidthFromRootToAnotherNode(node:HTMLElement,anotherNode:HTMLElement){\n  const tpc=node.querySelector('root')as HTMLElement\n  return getWidthDistance(tpc,anotherNode)\n}\n\nfunction getHeightFromRootToChild(node:HTMLElement){\n  const tpc=node.querySelector('root')as HTMLElement\n  const childTpc=node.querySelector('.map-canvas children grp')as HTMLElement\n  return getHeightDistance(tpc,childTpc)\n}\n/**\n * @function\n * @instance\n * @name toCenter\n * @description Reset position of the map to center.\n * @memberof MapInteraction\n */\nexport const toCenter = function() {\n  //默认在左侧，此方法名具有误导性\n  if(this.nodeData?.children.length>0){\n    this.container.scrollTo(\n      10000 - getRootWidth(this.container)/2-10,\n      10000 - getRootHeight(this.container)/2-getHeightFromRootToChild(this.container)-5\n    )\n  }else{\n    this.container.scrollTo(\n      10000 - this.container.offsetWidth / 2,\n      10000 - this.container.offsetHeight / 2\n    )\n  }\n  \n}\nexport const install = function(plugin) {\n  plugin(this)\n}\n/**\n * @function\n * @instance\n * @name focusNode\n * @description Enter focus mode, set the target element as root.\n * @memberof MapInteraction\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n */\nexport const focusNode = function(tpcEl) {\n  if (tpcEl.nodeObj.root) return\n  if (this.tempDirection === null) {\n    this.tempDirection = this.direction\n  }\n  if (!this.isFocusMode) {\n    this.nodeDataBackup = this.nodeData // help reset focus mode\n    this.isFocusMode = true\n  }\n  this.nodeData = tpcEl.nodeObj\n  this.nodeData.root = true\n  this.initRight()\n}\n/**\n * @function\n * @instance\n * @name cancelFocus\n * @description Exit focus mode.\n * @memberof MapInteraction\n */\nexport const cancelFocus = function() {\n  this.isFocusMode = false\n  if (this.tempDirection !== null) {\n    delete this.nodeData.root\n    this.nodeData = this.nodeDataBackup\n    this.direction = this.tempDirection\n    this.tempDirection = null\n    this.init()\n  }\n}\n/**\n * @function\n * @instance\n * @name initLeft\n * @description Child nodes will distribute on the left side of the root node.\n * @memberof MapInteraction\n */\nexport const initLeft = function() {\n  this.direction = 0\n  this.init()\n}\n/**\n * @function\n * @instance\n * @name initRight\n * @description Child nodes will distribute on the right side of the root node.\n * @memberof MapInteraction\n */\nexport const initRight = function() {\n  this.direction = 1\n  this.init()\n}\n/**\n * @function\n * @instance\n * @name initSide\n * @description Child nodes will distribute on both left and right side of the root node.\n * @memberof MapInteraction\n */\nexport const initSide = function() {\n  this.direction = 2\n  this.init()\n}\n\n/**\n * @function\n * @instance\n * @name setLocale\n * @memberof MapInteraction\n */\nexport const setLocale = function(locale) {\n  this.locale = locale\n  this.init()\n}\n\nexport const expandNode = function(el, isExpand) {\n  const node = el.nodeObj\n  if (typeof isExpand === 'boolean') {\n    node.expanded = isExpand\n  } else if (node.expanded !== false) {\n    node.expanded = false\n  } else {\n    node.expanded = true\n  }\n  // TODO 在此函数构造 html 结构，而非调用 layout\n  this.layout()\n  // linkDiv 已实现只更新特定主节点\n  this.linkDiv()\n  this.bus.fire('expandNode', node)\n}\n\n/**\n * @function\n * @instance\n * @name refresh\n * @description Refresh mind map, you can use it after modified `this.nodeData`\n * @memberof MapInteraction\n */\nexport const refresh = function() {\n  // add parent property to every node\n  this.addParentLink(this.nodeData)\n  // create dom element for every node\n  this.layout()\n  // generate links between nodes\n  this.linkDiv()\n}\n","import { LEFT, RIGHT, SIDE } from '../const'\nimport MindElixir, { NodeObj } from '../index'\nimport { getHeightFromRootToAnotherNode, getWidthFromRootToAnotherNode } from '../interact'\nimport { encodeHTML } from '../utils/index'\nexport type Top = HTMLElement\nexport type Group = HTMLElement\n\nexport interface Topic extends HTMLElement {\n  nodeObj?: NodeObj\n}\n\nexport interface Expander extends HTMLElement {\n  expanded?: boolean\n}\n\n// DOM manipulation\nconst $d = document\nexport const findEle = (id: string, instance?) => {\n  const scope = instance ? instance.mindElixirBox : $d\n  return scope.querySelector(`[data-nodeid=me${id}]`)\n}\n\nfunction resizeNode(widthControll:HTMLElement,tpc:Topic,anotherWidthControll:HTMLElement){\n  widthControll.onpointerdown=eDown=>{\n    if(!tpc.classList.contains('selected')) return\n    const startX=eDown.clientX\n    const width=tpc.clientWidth-Number(getComputedStyle(tpc).paddingLeft.replace('px',''))-Number(getComputedStyle(tpc).paddingRight.replace('px',''))\n    widthControll.onpointermove=eMove=>{\n      const endX=eMove.clientX\n      tpc.style.width=(width+endX-startX).toString()+'px'\n      widthControll.style.height=anotherWidthControll.style.height=tpc.clientHeight.toString()+'px'\n      //保存样式\n      if(!tpc.nodeObj.style) tpc.nodeObj.style={}\n      tpc.nodeObj.style.width=tpc.style.width\n      //设置宽度控制条的高度\n      tpc.nodeObj.style.controllWidth=widthControll.style.height\n      //更新图片的宽度和高度 \n      eMove.preventDefault()\n    }\n    widthControll.setPointerCapture(eDown.pointerId)\n    eDown.preventDefault()\n  }\n  widthControll.onpointerup=eUp=>{\n    widthControll.onpointermove=null\n    widthControll.releasePointerCapture(eUp.pointerId)\n    this?.linkDiv?.()\n  }\n}\nexport const shapeTpc = function(tpc: Topic, nodeObj: NodeObj) {\n  \n  const widthControllRight=$d.createElement('widthControllRight')\n  \n  const widthControllLeft=$d.createElement('widthControllLeft')\n\n  resizeNode.call(this,widthControllLeft,tpc,widthControllRight)\n  resizeNode.call(this,widthControllRight,tpc,widthControllLeft)\n  tpc.textContent = nodeObj.topic\n  //放在textContent之后，因为会清除子节点\n  tpc.appendChild(widthControllRight)\n  tpc.appendChild(widthControllLeft)\n  if (nodeObj.style) {\n    tpc.style.color = nodeObj.style.color || '#2c3e50'\n    tpc.style.background = nodeObj.style.background?nodeObj.style.background:nodeObj?.parent?.root?'#ffffff':'inherit'\n    tpc.style.fontSize = nodeObj.style.fontSize + 'px'\n    tpc.style.fontWeight = nodeObj.style.fontWeight || 'normal'\n    tpc.style.width= nodeObj.style.width || 'fit-content'\n    widthControllLeft.style.height=widthControllRight.style.height=nodeObj.style.controllWidth || '29px'\n  }\n\n  // TODO allow to add online image\n  if (nodeObj.image) {\n    const images=nodeObj.image\n    images.forEach(val=>{\n      const imgContainer = $d.createElement('img')\n      imgContainer.className='image'\n      imgContainer.src = val.url\n      imgContainer.style.width = val.width + 'px'\n      imgContainer.style.height = val.height + 'px'\n      imgContainer.style.display = 'block'\n      tpc.appendChild(imgContainer)\n    })\n  }\n  \n  if (nodeObj.hyperLink) {\n    const linkContainer =$d.createElement('a')\n    linkContainer.className = 'hyper-link'\n    linkContainer.target = '_blank'\n    linkContainer.innerText = '🔗'\n    linkContainer.href = nodeObj.hyperLink\n    tpc.appendChild(linkContainer)\n  }\n  if (nodeObj.remark) {\n    const content=$d.createElement('div')\n    content.className='content hidden'\n    content.textContent=nodeObj.remark\n    const remarkContainer = $d.createElement('div')\n    remarkContainer.className = 'remark'\n    remarkContainer.innerHTML = `<svg t=\"1659682144612\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2580\" width=\"200\" height=\"200\"><path d=\"M625.728 57.472c19.264 0 34.688 6.848 48.128 20.16l208.96 207.04c14.272 13.12 21.568 29.568 21.568 49.28v504.576c0 71.808-56.256 127.744-128.576 127.744H252.16c-72.128 0-128.576-55.68-128.576-127.744V184.704c0-71.68 56.256-127.232 128.576-127.232z m-34.304 76.8H252.16c-30.144 0-51.776 21.376-51.776 50.432v653.824c0 29.44 21.888 50.944 51.776 50.944h523.648c30.016 0 51.84-21.632 51.84-50.944l-0.128-464.512H687.488A96 96 0 0 1 591.936 287.36l-0.448-9.216V134.208zM665.6 704a38.4 38.4 0 0 1 0 76.8H294.4a38.4 38.4 0 0 1 0-76.8h371.2z m0-192a38.4 38.4 0 0 1 0 76.8H294.4a38.4 38.4 0 0 1 0-76.8h371.2z m-192-192a38.4 38.4 0 1 1 0 76.8H294.4a38.4 38.4 0 1 1 0-76.8h179.2z m181.824-152.512v110.592a32 32 0 0 0 26.24 31.488l5.76 0.512h111.872L655.424 167.424z\" p-id=\"2581\"></path></svg>`\n    let delayTask\n    // 鼠标移入内容\n    content.onmouseover=()=>{\n      clearTimeout(delayTask)\n    }\n    //鼠标移入按钮\n    remarkContainer.onmouseover=()=>{\n      content.classList.remove('hidden')\n    }\n    //鼠标移出内容\n    content.onmouseleave=()=>{\n      delayTask=setTimeout(()=>{\n        if(!content.classList.contains('hidden')){\n          content.classList.add('hidden')\n        }\n      },300)\n    }\n    //鼠标移出按钮\n    remarkContainer.onmouseleave=()=>{\n      delayTask=setTimeout(()=>{\n        if(!content.classList.contains('hidden')){\n          content.classList.add('hidden')\n        }\n      },300)\n    }\n    remarkContainer.appendChild(content)\n    tpc.appendChild(remarkContainer)\n  }\n  if (nodeObj.icons) {\n    const iconsContainer = $d.createElement('span')\n    iconsContainer.className = 'icons'\n    iconsContainer.innerHTML = nodeObj.icons\n    .filter(icon=> icon!=='').map(icon => `<span>${encodeHTML(icon)}</span>`)\n      .join('')\n    tpc.appendChild(iconsContainer)\n  }\n  if (nodeObj.tags) {\n    const tagsContainer = $d.createElement('div')\n    tagsContainer.className = 'tags'\n    tagsContainer.innerHTML = nodeObj.tags\n      .filter(tag=> tag!=='').map(tag => `<span>${encodeHTML(tag)}</span>`)\n      .join('')\n    tpc.appendChild(tagsContainer)\n  }\n  if (nodeObj.linkJump) {\n    nodeObj.linkJump.forEach(val => {\n      const button = document.createElement('a')\n      button.className=\"linkJump\"\n      button.title=val.title\n      button.innerHTML='<svg t=\"1661493526135\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2220\" width=\"16\" height=\"16\"><path d=\"M1001.175714 593.762001L700.806246 293.324796a76.091491 76.091491 0 0 0-107.566725 0 76.023754 76.023754 0 0 0 0 107.544146l171.713884 171.826779H152.653982v-115.288769a76.046333 76.046333 0 0 0-152.115245 0v152.092666c0 6.931777 2.145012 13.253918 3.951338 19.621218-1.806326 6.389879-3.951339 12.644283-3.951338 19.621218a76.068912 76.068912 0 0 0 76.046333 76.068912h686.020111L593.239521 894.131468a76.046333 76.046333 0 1 0 107.566725 107.566726L1001.175714 701.328726a76.091491 76.091491 0 0 0 0-107.566725z\" fill=\"#1296db\" p-id=\"2221\"></path></svg>'\n      button.onclick=()=>{  \n        const toNode=this.container.querySelector(`tpc[data-nodeid=me${val.toId}]`)\n        this.container.scrollTo(\n          10000 - this.container.offsetWidth / 2 + getWidthFromRootToAnotherNode(this.container,toNode),\n          10000 - this.container.offsetHeight / 2 - getHeightFromRootToAnotherNode(this.container,toNode)\n        )\n      }\n      tpc.appendChild(button)\n    });\n    \n  }\n}\n\nexport const createGroup = function(nodeObj: NodeObj, omitChildren?: boolean) {\n  const grp: Group = $d.createElement('GRP')\n  const top: Top = this.createTop(nodeObj)\n  grp.appendChild(top)\n  if (!omitChildren && nodeObj.children && nodeObj.children.length > 0) {\n    top.appendChild(createExpander(nodeObj.expanded))\n    if (nodeObj.expanded !== false) {\n      const children = this.createChildren(nodeObj.children)\n      grp.appendChild(children)\n    }\n  }\n  return { grp, top }\n}\n\nexport const createTop = function(nodeObj: NodeObj): Top {\n  const top = $d.createElement('t')\n  const tpc = this.createTopic(nodeObj)\n  shapeTpc.call(this,tpc, nodeObj)\n  top.appendChild(tpc)\n  return top\n}\n\nexport const createTopic = function(nodeObj: NodeObj): Topic {\n  const topic: Topic = $d.createElement('tpc')\n  topic.nodeObj = nodeObj\n  topic.dataset.nodeid = 'me' + nodeObj.id\n  topic.draggable = this.draggable\n  return topic\n}\n\nexport function selectText(div: HTMLElement) {\n  const range = $d.createRange()\n  range.selectNodeContents(div)\n  const getSelection = window.getSelection()\n  if (getSelection) {\n    getSelection.removeAllRanges()\n    getSelection.addRange(range)\n  }\n}\n\n\nexport function createInputDiv(tpc: Topic) {\n  console.time('createInputDiv')\n  if (!tpc) return\n  let div = $d.createElement('div')\n  const origin = tpc.childNodes[0].textContent as string\n  tpc.appendChild(div)\n  div.id = 'input-box'\n  // div.innerHTML=origin.replace(/<div(([\\s\\S])*?)<\\/div>/, '').replace('🔗','')\n  div.contentEditable = 'true'\n  div.spellcheck = false\n  div.textContent = origin\n  if(tpc.nodeObj.image){\n    const images=tpc.nodeObj.image\n    images.forEach(val=>{\n      const imgContainer = $d.createElement('img')\n      imgContainer.src = val.url\n      imgContainer.style.width = val.width + 'px'\n      imgContainer.style.display = 'block'\n      div.appendChild(imgContainer)\n    })\n  }\n  console.log('div.style',div.style,tpc.offsetWidth)\n  div.style.cssText = `min-width:${tpc.offsetWidth - 22}px;min-height:${tpc.clientHeight-16}px`\n  if(tpc.nodeObj?.style?.width){\n    div.style.width='auto'\n  }\n  if(tpc.nodeObj?.style?.color==='#ffffff'||(tpc.nodeObj?.id==='root'&&!tpc.nodeObj?.style?.color)){\n    div.style.color='#2c3e50'\n  }\n  if (this.direction === LEFT) div.style.right = '0'\n  // tpc.childNodes.forEach((child:ChildNode)=>{\n  //   if(child.nodeName==='IMG'){\n  //     div.appendChild(child)\n  //   }\n  //   //div.appendChild(child)\n  // })\n  div.focus()\n\n  selectText(div)\n  this.inputDiv = div\n\n  this.bus.fire('operation', {\n    name: 'beginEdit',\n    obj: tpc.nodeObj,\n  })\n\n  div.addEventListener('keydown', e => {\n    e.stopPropagation()\n    const key = e.key\n    // console.log(e, key)\n    if (key === 'Enter' || key === 'Tab') {\n      // keep wrap for shift enter\n      if (e.shiftKey) return\n\n      e.preventDefault()\n      this.inputDiv.blur()\n      this.map.focus()\n    }\n  })\n  div.addEventListener('blur', () => {\n    if (!div) return // 防止重复blur\n    const node = tpc.nodeObj\n    const topic = div.textContent!.trim()\n    //添加图片支持\n    //去除节点缩放鼠标移动的监听\n    node.image=[]\n    div.childNodes.forEach((val)=>{\n      if(val.nodeName==='IMG'){\n          // console.log('宽度  ',div.clientWidth)\n          node.image.push({\n            url:(val as HTMLImageElement).src,\n            width:(val as HTMLImageElement).width,\n            height:(val as HTMLImageElement).height,\n          })\n      }\n    })\n    if (topic === ''&&node.image.length===0) node.topic = origin\n    else node.topic = topic\n    div.remove()\n    this.inputDiv = div = null\n    // TODO 优化\n    // if (topic === origin) return // 没有修改不做处理\n    tpc.childNodes[0].textContent = node.topic\n    //更新宽度控制条的高度\n    const widthControllLeft=tpc.querySelector('widthControllRight') as HTMLElement\n    const widthControllRight=tpc.querySelector('widthControllRight') as HTMLElement\n    if(!node.style) node.style={}\n    node.style.controllWidth=widthControllLeft.style.height=widthControllRight.style.height=tpc.clientHeight.toString()+'px'\n    //记录节点宽度\n    // node.style.width=tpc.clientWidth-Number(getComputedStyle(tpc).paddingLeft.replace('px',''))-Number(getComputedStyle(tpc).paddingRight.replace('px',''))+1+'px'\n    delete node.style.width\n    this.shapeTpc(tpc,node)\n    this.linkDiv()\n    this.bus.fire('operation', {\n      name: 'finishEdit',\n      obj: node,\n      origin,\n    })\n  })\n  console.timeEnd('createInputDiv')\n}\n\nexport const createExpander = function(expanded: boolean | undefined): Expander {\n  const expander: Expander = $d.createElement('epd')\n  // 包含未定义 expanded 的情况，未定义视为展开\n  expander.innerText = expanded !== false ? '-' : '+'\n  expander.expanded = expanded !== false\n  expander.className = expanded !== false ? 'minus' : ''\n  return expander\n}\n\n/**\n * traversal data and generate dom structure of mind map\n * @ignore\n * @param {object} data node data object\n * @param {object} container node container(mostly primary node)\n * @param {number} direction primary node direction\n * @return {ChildrenElement} children element.\n */\nexport function createChildren(data: NodeObj[], container?: HTMLElement, direction?) {\n  let chldr: HTMLElement\n  if (container) {\n    chldr = container\n  } else {\n    chldr = $d.createElement('children')\n  }\n  for (let i = 0; i < data.length; i++) {\n    const nodeObj = data[i]\n    const grp = $d.createElement('GRP')\n    if (direction === LEFT) {\n      grp.className = 'lhs'\n    } else if (direction === RIGHT) {\n      grp.className = 'rhs'\n    } else if (direction === SIDE) {\n      if (nodeObj.direction === LEFT) {\n        grp.className = 'lhs'\n      } else if (nodeObj.direction === RIGHT) {\n        grp.className = 'rhs'\n      }\n    }\n    const top = this.createTop(nodeObj)\n    if (nodeObj.children && nodeObj.children.length > 0) {\n      top.appendChild(createExpander(nodeObj.expanded))\n      grp.appendChild(top)\n      if (nodeObj.expanded !== false) {\n        const children = this.createChildren(nodeObj.children)\n        grp.appendChild(children)\n      }\n    } else {\n      grp.appendChild(top)\n    }\n    chldr.appendChild(grp)\n  }\n  return chldr\n}\n\n// Set primary nodes' direction and invoke createChildren()\nexport function layout() {\n  console.time('layout')\n  this.root.innerHTML = ''\n  this.box.innerHTML = ''\n  const tpc = this.createTopic(this.nodeData)\n  shapeTpc(tpc, this.nodeData) // shape root tpc\n  tpc.draggable = false\n  this.root.appendChild(tpc)\n\n  const primaryNodes: NodeObj[] = this.nodeData.children\n  if (!primaryNodes || primaryNodes.length === 0) return\n  if (this.direction === SIDE) {\n    // initiate direction of primary nodes\n    let lcount = 0\n    let rcount = 0\n    primaryNodes.map(node => {\n      if (node.direction === undefined) {\n        if (lcount <= rcount) {\n          node.direction = LEFT\n          lcount += 1\n        } else {\n          node.direction = RIGHT\n          rcount += 1\n        }\n      } else {\n        if (node.direction === LEFT) {\n          lcount += 1\n        } else {\n          rcount += 1\n        }\n      }\n    })\n  }\n  this.createChildren(this.nodeData.children, this.box, this.direction)\n  console.timeEnd('layout')\n}\n","const $d = document\nconst svgNS = 'http://www.w3.org/2000/svg'\nexport const createMainPath = function(d: string) {\n  const path = $d.createElementNS(svgNS, 'path')\n  path.setAttribute('d', d)\n  path.setAttribute('stroke', '#555')\n  path.setAttribute('fill', 'none')\n  path.setAttribute('stroke-width', '1')\n  path.setAttribute('stroke-linecap', 'square')\n  path.setAttribute('transform', 'translate(0.5,-0.5)')\n  return path\n}\n\nexport const createLinkSvg = function(klass: string) {\n  const svg = $d.createElementNS(svgNS, 'svg')\n  svg.setAttribute('class', klass)\n  return svg\n}\n\nexport const createLine = function(x1: number, y1: number, x2: number, y2: number) {\n  const line = $d.createElementNS(svgNS, 'line')\n  line.setAttribute('x1', x1.toString())\n  line.setAttribute('y1', y1.toString())\n  line.setAttribute('x2', x2.toString())\n  line.setAttribute('y2', y2.toString())\n  line.setAttribute('stroke', '#bbb')\n  line.setAttribute('fill', 'none')\n  line.setAttribute('stroke-width', '2')\n  return line\n}\n\nexport const createPath = function(d: string) {\n  const path = $d.createElementNS(svgNS, 'path')\n  path.setAttribute('d', d)\n  path.setAttribute('stroke', '#555')\n  path.setAttribute('fill', 'none')\n  path.setAttribute('stroke-linecap', 'square')\n  path.setAttribute('stroke-width', '1')\n  path.setAttribute('transform', 'translate(0.5,-0.5)')\n  // adding translate(0.5,-0.5) can fix render error on windows, but i still dunno why\n  return path\n}\n\nexport const createWidthControll = function(d: string) {\n  const g = $d.createElementNS(svgNS, 'g')\n  const left =$d.createElementNS(svgNS, 'rect')\n  const right =$d.createElementNS(svgNS, 'rect')\n  left.setAttribute('width','7')\n  left.setAttribute('height','30')\n  left.setAttribute('opacity','0')\n  left.setAttribute('style','cursor: ew-resize;')\n  left.setAttribute('x','22')\n  g.appendChild(right)\n  g.appendChild(left)\n  // adding translate(0.5,-0.5) can fix render error on windows, but i still dunno why\n  return g\n}\ninterface CustomSvg extends SVGElement{\n  linkObj?:object\n}\nexport const createSvgGroup = function(d: string, arrowd: string):CustomSvg {\n  const g = $d.createElementNS(svgNS, 'g')\n  const path = $d.createElementNS(svgNS, 'path')\n  const arrow = $d.createElementNS(svgNS, 'path')\n  arrow.setAttribute('d', arrowd)\n  arrow.setAttribute('stroke', 'rgb(235, 95, 82)')\n  arrow.setAttribute('fill', 'none')\n  arrow.setAttribute('stroke-linecap', 'cap')\n  arrow.setAttribute('stroke-width', '2')\n  path.setAttribute('d', d)\n  path.setAttribute('stroke', 'rgb(235, 95, 82)')\n  path.setAttribute('fill', 'none')\n  path.setAttribute('stroke-linecap', 'cap')\n  path.setAttribute('stroke-width', '2')\n\n  g.appendChild(path)\n  g.appendChild(arrow)\n  return g\n}\n","import type { NodeElement, NodeObj } from './index'\n\nimport {\n  moveNodeObj,\n  removeNodeObj,\n  insertNodeObj,\n  insertBeforeNodeObj,\n  insertParentNodeObj,\n  checkMoveValid,\n  addParentLink,\n  moveUpObj,\n  moveDownObj,\n  moveNodeBeforeObj,\n  moveNodeAfterObj,\n  refreshIds,\n} from './utils/index'\nimport { findEle, createExpander, shapeTpc } from './utils/dom'\nimport { rgbHex } from './utils/index'\nimport { LEFT, RIGHT, SIDE } from './const'\nconst $d = document\n\n/**\n * @exports NodeOperation\n * @namespace NodeOperation\n */\nexport const updateNodeStyle = function(object) {\n  if (!object.style) return\n  const nodeEle = findEle(object.id, this)\n  const origin = {\n    color: nodeEle.style.color && rgbHex(nodeEle.style.color),\n    background: nodeEle.style.background && rgbHex(nodeEle.style.background),\n    fontSize: nodeEle.style.fontSize && nodeEle.style.fontSize + 'px',\n    fontWeight: nodeEle.style.fontWeight,\n  }\n  nodeEle.style.color = object.style.color\n  nodeEle.style.background = object.style.background\n  nodeEle.style.fontSize = object.style.fontSize + 'px'\n  nodeEle.style.fontWeight = object.style.fontWeight || 'normal'\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'editStyle',\n    obj: object,\n    origin,\n  })\n}\n\nexport const updateNodeTags = function(object, tags) {\n  if (!tags) return\n  const oldVal = object.tags\n  object.tags = tags\n  const nodeEle = findEle(object.id)\n  shapeTpc.call(this,nodeEle, object)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'editTags',\n    obj: object,\n    origin: oldVal,\n  })\n}\n\nexport const updateNodeIcons = function(object, icons) {\n  if (!icons) return\n  const oldVal = object.icons\n  object.icons = icons\n  const nodeEle = findEle(object.id)\n  shapeTpc.call(this,nodeEle, object)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'editIcons',\n    obj: object,\n    origin: oldVal,\n  })\n}\n\nexport const updateNodeHyperLink = function(object, hyperLink) {\n  if (hyperLink==null||hyperLink==undefined) return\n  const oldVal = object.hyperLink\n  const hyperLinkArr=hyperLink.split(',')\n  object.linkJump=object.linkJump.filter(link=>{\n    return hyperLinkArr.find(val=>val===link.title)?true:false\n  })\n  object.hyperLink = hyperLink\n  const nodeEle = findEle(object.id)\n  shapeTpc.call(this,nodeEle, object)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'editHyperLink',\n    obj: object,\n    origin: oldVal,\n  })\n}\n\nexport const updateNodeRemark = function(object, remark) {\n  if (remark==null||remark==undefined) return\n  const oldVal = object.remark\n  object.remark = remark\n  const nodeEle = findEle(object.id)\n  shapeTpc.call(this,nodeEle, object)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'editRemark',\n    obj: object,\n    origin: oldVal,\n  })\n}\n\n// export const updateNodeImage = function(object, image) {\n//   if (!image) return\n//   const oldVal = object.image\n//   object.image = image\n//   const nodeEle = findEle(object.id)\n//   shapeTpc(nodeEle, object)\n//   this.linkDiv()\n//   this.bus.fire('operation', {\n//     name: 'editImage',\n//     obj: object,\n//     origin: oldVal,\n//   })\n// }\n\nexport const updateNodeSvgChart = function() {\n  // TODO\n}\n\n/**\n * @function\n * @instance\n * @name insertSibling\n * @memberof NodeOperation\n * @description Create a sibling node.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @param {node} node - New node information.\n * @example\n * insertSibling(E('bd4313fbac40284b'))\n */\nexport const insertSibling = function(el, node) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const nodeObj = nodeEle.nodeObj\n  if (nodeObj.root === true) {\n    this.addChild()\n    return\n  }\n  const newNodeObj = node || this.generateNewObj()\n  insertNodeObj(nodeObj, newNodeObj)\n  addParentLink(this.nodeData)\n  const t = nodeEle.parentElement\n  console.time('insertSibling_DOM')\n\n  const { grp, top } = this.createGroup(newNodeObj)\n\n  const children = t.parentNode.parentNode\n  children.insertBefore(grp, t.parentNode.nextSibling)\n  if (children.className === 'mindbox') {\n    this.processPrimaryNode(grp, newNodeObj)\n    this.linkDiv()\n  } else {\n    this.linkDiv(grp.offsetParent)\n  }\n  if (!node) {\n    this.createInputDiv(top.children[0])\n  }\n  this.selectNode(top.children[0], true)\n  console.timeEnd('insertSibling_DOM')\n  this.bus.fire('operation', {\n    name: 'insertSibling',\n    obj: newNodeObj,\n  })\n}\n\n/**\n * @function\n * @instance\n * @name insertBefore\n * @memberof NodeOperation\n * @description Create a sibling node before the selected node.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @param {node} node - New node information.\n * @example\n * insertBefore(E('bd4313fbac40284b'))\n */\nexport const insertBefore = function(el, node) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const nodeObj = nodeEle.nodeObj\n  if (nodeObj.root === true) {\n    this.addChild()\n    return\n  }\n  const newNodeObj = node || this.generateNewObj()\n  insertBeforeNodeObj(nodeObj, newNodeObj)\n  addParentLink(this.nodeData)\n  const t = nodeEle.parentElement\n  console.time('insertSibling_DOM')\n\n  const { grp, top } = this.createGroup(newNodeObj)\n\n  const children = t.parentNode.parentNode\n  children.insertBefore(grp, t.parentNode)\n  if (children.className === 'mindbox') {\n    this.processPrimaryNode(grp, newNodeObj)\n    this.linkDiv()\n  } else {\n    this.linkDiv(grp.offsetParent)\n  }\n  if (!node) {\n    this.createInputDiv(top.children[0])\n  }\n  this.selectNode(top.children[0], true)\n  console.timeEnd('insertSibling_DOM')\n  this.bus.fire('operation', {\n    name: 'insertSibling',\n    obj: newNodeObj,\n  })\n}\n\n/**\n * @function\n * @instance\n * @name insertParent\n * @memberof NodeOperation\n * @description Create a parent node of the selected node.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @param {node} node - New node information.\n * @example\n * insertParent(E('bd4313fbac40284b'))\n */\nexport const insertParent = function(el, node) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const nodeObj = nodeEle.nodeObj\n  if (nodeObj.root === true) {\n    return\n  }\n  const newNodeObj = node || this.generateNewObj()\n  insertParentNodeObj(nodeObj, newNodeObj)\n  addParentLink(this.nodeData)\n\n  const grp0 = nodeEle.parentElement.parentElement\n  console.time('insertParent_DOM')\n  const { grp, top } = this.createGroup(newNodeObj, true)\n  top.appendChild(createExpander(true))\n  const children0 = grp0.parentNode\n  grp0.insertAdjacentElement('afterend', grp)\n\n  const c = $d.createElement('children')\n  c.appendChild(grp0)\n\n  top.insertAdjacentElement('afterend', c)\n\n  if (children0.className === 'mindbox') {\n    grp.className = grp0.className // l/rhs\n    grp0.className = ''\n    grp0.querySelector('.svg3rd').remove()\n    this.linkDiv()\n  } else {\n    this.linkDiv(grp.offsetParent)\n  }\n\n  if (!node) {\n    this.createInputDiv(top.children[0])\n  }\n  this.selectNode(top.children[0], true)\n  console.timeEnd('insertParent_DOM')\n  this.bus.fire('operation', {\n    name: 'insertParent',\n    obj: newNodeObj,\n  })\n}\n\nexport const addChildFunction = function(nodeEle, node) {\n  if (!nodeEle) return undefined\n  const nodeObj = nodeEle.nodeObj\n  if (nodeObj.expanded === false) {\n    this.expandNode(nodeEle, true)\n    // dom had resetted\n    nodeEle = findEle(nodeObj.id)\n  }\n  const newNodeObj = node || this.generateNewObj()\n  if (nodeObj.children) nodeObj.children.push(newNodeObj)\n  else nodeObj.children = [newNodeObj]\n  addParentLink(this.nodeData)\n\n  const top = nodeEle.parentElement\n\n  const { grp, top: newTop } = this.createGroup(newNodeObj)\n\n  if (top.tagName === 'T') {\n    if (top.children[1]) {\n      top.nextSibling.appendChild(grp)\n    } else {\n      const c = $d.createElement('children')\n      c.appendChild(grp)\n      top.appendChild(createExpander(true))\n      top.insertAdjacentElement('afterend', c)\n    }\n    this.linkDiv(grp.offsetParent)\n  } else if (top.tagName === 'ROOT') {\n    this.processPrimaryNode(grp, newNodeObj)\n    top.nextSibling.appendChild(grp)\n    this.linkDiv()\n  }\n  return { newTop, newNodeObj }\n}\n\n/**\n * @function\n * @instance\n * @name addChild\n * @memberof NodeOperation\n * @description Create a child node.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @param {node} node - New node information.\n * @example\n * addChild(E('bd4313fbac40284b'))\n */\nexport const addChild = function(el: NodeElement, node: NodeObj) {\n  console.time('addChild')\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const { newTop, newNodeObj } = addChildFunction.call(this, nodeEle, node)\n  console.timeEnd('addChild')\n  if (!node) {\n    this.createInputDiv(newTop.children[0])\n  }\n  this.selectNode(newTop.children[0], true)\n  this.bus.fire('operation', {\n    name: 'addChild',\n    obj: newNodeObj,\n  })\n}\n// uncertain link disappear sometimes??\n// TODO while direction = SIDE, move up won't change the direction of primary node\n\n/**\n * @function\n * @instance\n * @name copyNode\n * @memberof NodeOperation\n * @description Copy node to another node.\n * @param {TargetElement} node - Target element return by E('...'), default value: currentTarget.\n * @param {TargetElement} to - The target(as parent node) you want to copy to.\n * @example\n * copyNode(E('bd4313fbac402842'),E('bd4313fbac402839'))\n */\nexport const copyNode = function(node: NodeElement, to: NodeElement) {\n  console.time('copyNode')\n  const deepCloneObj = JSON.parse(\n    JSON.stringify(node.nodeObj, (k, v) => {\n      if (k === 'parent') return undefined\n      return v\n    })\n  )\n  refreshIds(deepCloneObj)\n  const { newNodeObj } = addChildFunction.call(this, to, deepCloneObj)\n  console.timeEnd('copyNode')\n  this.bus.fire('operation', {\n    name: 'copyNode',\n    obj: newNodeObj,\n  })\n}\n\n/**\n * @function\n * @instance\n * @name moveUpNode\n * @memberof NodeOperation\n * @description Move the target node up.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @example\n * moveUpNode(E('bd4313fbac40284b'))\n */\nexport const moveUpNode = function(el) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const grp = nodeEle.parentNode.parentNode\n  const obj = nodeEle.nodeObj\n  moveUpObj(obj)\n  grp.parentNode.insertBefore(grp, grp.previousSibling)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'moveUpNode',\n    obj,\n  })\n}\n\n/**\n * @function\n * @instance\n * @name moveDownNode\n * @memberof NodeOperation\n * @description Move the target node down.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @example\n * moveDownNode(E('bd4313fbac40284b'))\n */\nexport const moveDownNode = function(el) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const grp = nodeEle.parentNode.parentNode\n  const obj = nodeEle.nodeObj\n  moveDownObj(obj)\n  if (grp.nextSibling) {\n    grp.insertAdjacentElement('beforebegin', grp.nextSibling)\n  } else {\n    grp.parentNode.prepend(grp)\n  }\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'moveDownNode',\n    obj,\n  })\n}\n\n/**\n * @function\n * @instance\n * @name removeNode\n * @memberof NodeOperation\n * @description Remove the target node.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @example\n * removeNode(E('bd4313fbac40284b'))\n */\nexport const removeNode = function(el) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const nodeObj = nodeEle.nodeObj\n  if (nodeObj.root === true) {\n    throw new Error('Can not remove root node')\n  }\n  const index = nodeObj.parent.children.findIndex(node => node === nodeObj)\n  const next = nodeObj.parent.children[index + 1]\n  const originSiblingId = next && next.id\n\n  const childrenLength = removeNodeObj(nodeObj)\n  const t = nodeEle.parentNode\n  if (t.tagName === 'ROOT') {\n    return\n  }\n  if (childrenLength === 0) {\n    // remove epd when children length === 0\n    const parentT = t.parentNode.parentNode.previousSibling\n    // root doesn't have epd\n    if (parentT.tagName !== 'ROOT') {\n      parentT.children[1].remove()\n    }\n    this.selectParent()\n  } else {\n    // select sibling automatically\n    const success = this.selectPrevSibling()\n    if (!success) this.selectNextSibling()\n  }\n  for (const prop in this.linkData) {\n    // MAYBEBUG should traversal all children node\n    const link = this.linkData[prop]\n    if (link.from === t.firstChild || link.to === t.firstChild) {\n      this.removeLink(\n        this.mindElixirBox.querySelector(\n          `[data-linkid=${this.linkData[prop].id}]`\n        )\n      )\n    }\n  }\n  // remove GRP\n  t.parentNode.remove()\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'removeNode',\n    obj: nodeObj,\n    originSiblingId,\n    originParentId: nodeObj.parent.id,\n  })\n}\n\n/**\n * @function\n * @instance\n * @name moveNode\n * @memberof NodeOperation\n * @description Move a node to another node (as child node).\n * @param {TargetElement} from - The target you want to move.\n * @param {TargetElement} to - The target(as parent node) you want to move to.\n * @example\n * moveNode(E('bd4313fbac402842'),E('bd4313fbac402839'))\n */\nexport const moveNode = function(from, to) {\n  const fromObj = from.nodeObj\n  const toObj = to.nodeObj\n  const originParentId = fromObj.parent.id\n  if (toObj.expanded === false) {\n    this.expandNode(to, true)\n    from = findEle(fromObj.id)\n    to = findEle(toObj.id)\n  }\n  if (!checkMoveValid(fromObj, toObj)) {\n    console.warn('Invalid move')\n    return\n  }\n  console.time('moveNode')\n  moveNodeObj(fromObj, toObj)\n  addParentLink(this.nodeData) // update parent property\n  const fromTop = from.parentElement\n  const fromChilren = fromTop.parentNode.parentNode\n  const toTop = to.parentElement\n  if (fromChilren.className === 'mindbox') {\n    // clear svg group of primary node\n    fromTop.parentNode.lastChild.remove()\n  } else if (fromTop.parentNode.className === 'mindbox') {\n    fromTop.style.cssText = '' // clear style\n  }\n  if (toTop.tagName === 'T') {\n    if (fromChilren.className === 'mindbox') {\n      // clear direaction class of primary node\n      fromTop.parentNode.className = ''\n    }\n    if (toTop.children[1]) {\n      // expander exist\n      toTop.nextSibling.appendChild(fromTop.parentNode)\n    } else {\n      // expander not exist, no child\n      const c = $d.createElement('children')\n      c.appendChild(fromTop.parentNode)\n      toTop.appendChild(createExpander(true))\n      toTop.parentElement.insertBefore(c, toTop.nextSibling)\n    }\n  } else if (toTop.tagName === 'ROOT') {\n    this.processPrimaryNode(fromTop.parentNode, fromObj)\n    toTop.nextSibling.appendChild(fromTop.parentNode)\n  }\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'moveNode',\n    obj: { fromObj, toObj, originParentId },\n  })\n  console.timeEnd('moveNode')\n}\n\n/**\n * @function\n * @instance\n * @name moveNodeBefore\n * @memberof NodeOperation\n * @description Move a node and become previous node of another node.\n * @param {TargetElement} from\n * @param {TargetElement} to\n * @example\n * moveNodeBefore(E('bd4313fbac402842'),E('bd4313fbac402839'))\n */\nexport const moveNodeBefore = function(from, to) {\n  const fromObj = from.nodeObj\n  const toObj = to.nodeObj\n  const originParentId = fromObj.parent.id\n  moveNodeBeforeObj(fromObj, toObj)\n  addParentLink(this.nodeData)\n  const fromTop = from.parentElement\n  const fromGrp = fromTop.parentNode\n  const toTop = to.parentElement\n  const toGrp = toTop.parentNode\n  const toChilren = toTop.parentNode.parentNode\n  toChilren.insertBefore(fromGrp, toGrp)\n  this.processPrimaryNode(fromTop.parentElement,fromObj)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'moveNodeBefore',\n    obj: { fromObj, toObj, originParentId },\n  })\n}\n\n/**\n * @function\n * @instance\n * @name moveNodeAfter\n * @memberof NodeOperation\n * @description Move a node and become next node of another node.\n * @param {TargetElement} from\n * @param {TargetElement} to\n * @example\n * moveNodeAfter(E('bd4313fbac402842'),E('bd4313fbac402839'))\n */\nexport const moveNodeAfter = function(from, to) {\n  const fromObj = from.nodeObj\n  const toObj = to.nodeObj\n  const originParentId = fromObj.parent.id\n  moveNodeAfterObj(fromObj, toObj)\n  addParentLink(this.nodeData)\n  const fromTop = from.parentElement\n  const fromGrp = fromTop.parentNode\n  const toTop = to.parentElement\n  const toGrp = toTop.parentNode\n  const toChilren = toTop.parentNode.parentNode\n  toChilren.insertBefore(fromGrp, toGrp.nextSibling)\n  this.processPrimaryNode(fromTop.parentElement,fromObj)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'moveNodeAfter',\n    obj: { fromObj, toObj, originParentId },\n  })\n}\n\n/**\n * @function\n * @instance\n * @name beginEdit\n * @memberof NodeOperation\n * @description Begin to edit the target node.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @example\n * beginEdit(E('bd4313fbac40284b'))\n */\nexport const beginEdit = function(el) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  this.createInputDiv(nodeEle)\n}\n\nexport const setNodeTopic = function(tpc, topic) {\n  tpc.childNodes[0].textContent = topic\n  tpc.nodeObj.topic = topic\n  this.linkDiv()\n}\n\n// Judge L or R\nexport function processPrimaryNode(primaryNode, obj) {\n  if (this.direction === LEFT) {\n    primaryNode.className = 'lhs'\n  } else if (this.direction === RIGHT) {\n    primaryNode.className = 'rhs'\n  } else if (this.direction === SIDE) {\n    const l = $d.querySelectorAll('.lhs').length\n    const r = $d.querySelectorAll('.rhs').length\n    if (l <= r) {\n      primaryNode.className = 'lhs'\n      obj.direction = LEFT\n    } else {\n      primaryNode.className = 'rhs'\n      obj.direction = RIGHT\n    }\n  }\n}\n","import {\n  LinkDragMoveHelper,\n  generateUUID,\n  getArrowPoints,\n  calcP1,\n  calcP4,\n} from './utils/index'\nimport { createSvgGroup } from './utils/svg'\n\n// TODO Link label\nexport const createLink = function(from, to, isInitPaint, obj) {\n  const map = this.map.getBoundingClientRect()\n  if (!from || !to) {\n    return // not expand\n  }\n  const pfrom = from.getBoundingClientRect()\n  const pto = to.getBoundingClientRect()\n  const fromCenterX = (pfrom.x + pfrom.width / 2 - map.x) / this.scaleVal\n  const fromCenterY = (pfrom.y + pfrom.height / 2 - map.y) / this.scaleVal\n  const toCenterX = (pto.x + pto.width / 2 - map.x) / this.scaleVal\n  const toCenterY = (pto.y + pto.height / 2 - map.y) / this.scaleVal\n\n  let p2x, p2y, p3x, p3y\n  if (isInitPaint) {\n    p2x = fromCenterX + obj.delta1.x\n    p2y = fromCenterY + obj.delta1.y\n    p3x = toCenterX + obj.delta2.x\n    p3y = toCenterY + obj.delta2.y\n  } else {\n    if ((fromCenterY + toCenterY) / 2 - fromCenterY <= pfrom.height / 2) {\n      // the situation that two div is too close\n      p2x = (pfrom.x + pfrom.width - map.x) / this.scaleVal + 100\n      p2y = fromCenterY\n      p3x = (pto.x + pto.width - map.x) / this.scaleVal + 100\n      p3y = toCenterY\n    } else {\n      p2x = (fromCenterX + toCenterX) / 2\n      p2y = (fromCenterY + toCenterY) / 2\n      p3x = (fromCenterX + toCenterX) / 2\n      p3y = (fromCenterY + toCenterY) / 2\n    }\n  }\n\n  const fromData = {\n    cx: fromCenterX,\n    cy: fromCenterY,\n    w: pfrom.width,\n    h: pfrom.height,\n  }\n  const toData = {\n    cx: toCenterX,\n    cy: toCenterY,\n    w: pto.width,\n    h: pto.height,\n  }\n\n  const p1 = calcP1(fromData, p2x, p2y)\n  const p1x = p1.x\n  const p1y = p1.y\n\n  const p4 = calcP4(toData, p3x, p3y)\n  const p4x = p4.x\n  const p4y = p4.y\n\n  const arrowPoint = getArrowPoints(p3x, p3y, p4x, p4y)\n\n  // TODO link lable\n  // const halfx = p1x / 8 + (p2x * 3) / 8 + (p3x * 3) / 8 + p4x / 8\n  // const halfy = p1y / 8 + (p2y * 3) / 8 + (p3y * 3) / 8 + p4y / 8\n\n  const newSvgGroup = createSvgGroup(\n    `M ${p1x} ${p1y} C ${p2x} ${p2y} ${p3x} ${p3y} ${p4x} ${p4y}`,\n    `M ${arrowPoint.x1} ${arrowPoint.y1} L ${p4x} ${p4y} L ${arrowPoint.x2} ${arrowPoint.y2}`\n  )\n\n  let newLinkObj\n  if (isInitPaint) {\n    newLinkObj = {\n      id: obj.id,\n      label: '',\n      from,\n      to,\n      delta1: {\n        x: p2x - fromCenterX,\n        y: p2y - fromCenterY,\n      },\n      delta2: {\n        x: p3x - toCenterX,\n        y: p3y - toCenterY,\n      },\n    }\n    // overwrite\n    this.linkData[obj.id] = newLinkObj\n    newSvgGroup.linkObj = newLinkObj\n    newSvgGroup.dataset.linkid = obj.id\n  } else {\n    newLinkObj = {\n      id: generateUUID(),\n      label: '',\n      from,\n      to,\n      delta1: {\n        x: p2x - fromCenterX,\n        y: p2y - fromCenterY,\n      },\n      delta2: {\n        x: p3x - toCenterX,\n        y: p3y - toCenterY,\n      },\n    }\n    // new\n    this.linkData[newLinkObj.id] = newLinkObj\n    newSvgGroup.linkObj = newLinkObj\n    newSvgGroup.dataset.linkid = newLinkObj.id\n    this.currentLink = newSvgGroup\n  }\n  this.linkSvgGroup.appendChild(newSvgGroup)\n  if (!isInitPaint) { this.showLinkController(p2x, p2y, p3x, p3y, newLinkObj, fromData, toData) }\n}\n\nexport const removeLink = function(linkSvg) {\n  let link\n  if (linkSvg) {\n    link = linkSvg\n  } else {\n    link = this.currentLink\n  }\n  if (!link) return\n  console.log(link)\n  this.hideLinkController()\n  const id = link.linkObj.id\n  console.log(id)\n  delete this.linkData[id]\n  link.remove()\n  link = null\n}\nexport const selectLink = function(targetElement) {\n  this.currentLink = targetElement\n  const obj = targetElement.linkObj\n  const from = obj.from\n  const to = obj.to\n\n  const map = this.map.getBoundingClientRect()\n  const pfrom = from.getBoundingClientRect()\n  const pto = to.getBoundingClientRect()\n  const fromCenterX = (pfrom.x + pfrom.width / 2 - map.x) / this.scaleVal\n  const fromCenterY = (pfrom.y + pfrom.height / 2 - map.y) / this.scaleVal\n  const toCenterX = (pto.x + pto.width / 2 - map.x) / this.scaleVal\n  const toCenterY = (pto.y + pto.height / 2 - map.y) / this.scaleVal\n\n  const fromData = {\n    cx: fromCenterX,\n    cy: fromCenterY,\n    w: pfrom.width,\n    h: pfrom.height,\n  }\n  const toData = {\n    cx: toCenterX,\n    cy: toCenterY,\n    w: pto.width,\n    h: pto.height,\n  }\n\n  const p2x = fromCenterX + obj.delta1.x\n  const p2y = fromCenterY + obj.delta1.y\n  const p3x = toCenterX + obj.delta2.x\n  const p3y = toCenterY + obj.delta2.y\n\n  this.showLinkController(p2x, p2y, p3x, p3y, obj, fromData, toData)\n}\nexport const hideLinkController = function() {\n  this.linkController.style.display = 'none'\n  this.P2.style.display = 'none'\n  this.P3.style.display = 'none'\n}\nexport const showLinkController = function(\n  p2x,\n  p2y,\n  p3x,\n  p3y,\n  linkObj,\n  fromData,\n  toData\n) {\n  this.linkController.style.display = 'initial'\n  this.P2.style.display = 'initial'\n  this.P3.style.display = 'initial'\n\n  const p1 = calcP1(fromData, p2x, p2y)\n  let p1x = p1.x\n  let p1y = p1.y\n\n  const p4 = calcP4(toData, p3x, p3y)\n  let p4x = p4.x\n  let p4y = p4.y\n\n  this.P2.style.cssText = `top:${p2y}px;left:${p2x}px;`\n  this.P3.style.cssText = `top:${p3y}px;left:${p3x}px;`\n  this.line1.setAttribute('x1', p1x)\n  this.line1.setAttribute('y1', p1y)\n  this.line1.setAttribute('x2', p2x)\n  this.line1.setAttribute('y2', p2y)\n  this.line2.setAttribute('x1', p3x)\n  this.line2.setAttribute('y1', p3y)\n  this.line2.setAttribute('x2', p4x)\n  this.line2.setAttribute('y2', p4y)\n\n  if (this.helper1) {\n    this.helper1.destory(this.map)\n    this.helper2.destory(this.map)\n  }\n\n  this.helper1 = new LinkDragMoveHelper(this.P2)\n  this.helper2 = new LinkDragMoveHelper(this.P3)\n\n  this.helper1.init(this.map, (deltaX, deltaY) => {\n    /**\n     * user will control bezier with p2 & p3\n     * p1 & p4 is depend on p2 & p3\n     */\n    p2x = p2x - deltaX / this.scaleVal\n    p2y = p2y - deltaY / this.scaleVal\n\n    const p1 = calcP1(fromData, p2x, p2y)\n    p1x = p1.x\n    p1y = p1.y\n\n    this.P2.style.top = p2y + 'px'\n    this.P2.style.left = p2x + 'px'\n    this.currentLink.children[0].setAttribute(\n      'd',\n      `M ${p1x} ${p1y} C ${p2x} ${p2y} ${p3x} ${p3y} ${p4x} ${p4y}`\n    )\n    this.line1.setAttribute('x1', p1x)\n    this.line1.setAttribute('y1', p1y)\n    this.line1.setAttribute('x2', p2x)\n    this.line1.setAttribute('y2', p2y)\n    linkObj.delta1.x = p2x - fromData.cx\n    linkObj.delta1.y = p2y - fromData.cy\n  })\n\n  this.helper2.init(this.map, (deltaX, deltaY) => {\n    p3x = p3x - deltaX / this.scaleVal\n    p3y = p3y - deltaY / this.scaleVal\n\n    const p4 = calcP4(toData, p3x, p3y)\n    p4x = p4.x\n    p4y = p4.y\n    const arrowPoint = getArrowPoints(p3x, p3y, p4x, p4y)\n\n    this.P3.style.top = p3y + 'px'\n    this.P3.style.left = p3x + 'px'\n    this.currentLink.children[0].setAttribute(\n      'd',\n      `M ${p1x} ${p1y} C ${p2x} ${p2y} ${p3x} ${p3y} ${p4x} ${p4y}`\n    )\n    this.currentLink.children[1].setAttribute(\n      'd',\n      `M ${arrowPoint.x1} ${arrowPoint.y1} L ${p4x} ${p4y} L ${arrowPoint.x2} ${arrowPoint.y2}`\n    )\n    this.line2.setAttribute('x1', p3x)\n    this.line2.setAttribute('y1', p3y)\n    this.line2.setAttribute('x2', p4x)\n    this.line2.setAttribute('y2', p4y)\n    linkObj.delta2.x = p3x - toData.cx\n    linkObj.delta2.y = p3y - toData.cy\n  })\n}\n","import { createPath, createMainPath, createLinkSvg } from './utils/svg'\nimport { findEle, Expander } from './utils/dom'\nimport {\n  SIDE,\n  GAP,\n  TURNPOINT_R,\n  PRIMARY_NODE_HORIZONTAL_GAP,\n  PRIMARY_NODE_VERTICAL_GAP,\n} from './const'\n\n/**\n * Link nodes with svg,\n * only link specific node if `primaryNode` is present\n *\n * procedure:\n * 1. calculate position of primary nodes\n * 2. layout primary node, generate primary link\n * 3. generate links inside primary node\n * 4. generate custom link\n * @param {object} primaryNode process the specific primary node only\n */\nexport default function linkDiv(primaryNode) {\n  var primaryNodeHorizontalGap = this.primaryNodeHorizontalGap || PRIMARY_NODE_HORIZONTAL_GAP\n  var primaryNodeVerticalGap = this.primaryNodeVerticalGap || PRIMARY_NODE_VERTICAL_GAP\n  console.time('linkDiv')\n  const root = this.root\n  root.style.cssText = `top:${10000 - root.offsetHeight / 2}px;left:${10000 - root.offsetWidth / 2}px;`\n  const primaryNodeList = this.box.children\n  this.svg2nd.innerHTML = ''\n\n  // 1. calculate position of primary nodes\n  let totalHeight = 0\n  let shortSide: string // l or r\n  let shortSideGap = 0 // balance heigt of two side\n  let currentOffsetL = 0 // left side total offset\n  let currentOffsetR = 0 // right side total offset\n  let totalHeightL = 0\n  let totalHeightR = 0\n  let base: number\n\n  if (this.direction === SIDE) {\n    let countL = 0\n    let countR = 0\n    let totalHeightLWithoutGap = 0\n    let totalHeightRWithoutGap = 0\n    for (let i = 0; i < primaryNodeList.length; i++) {\n      const el = primaryNodeList[i]\n      if (el.className === 'lhs') {\n        totalHeightL += el.offsetHeight + primaryNodeVerticalGap\n        totalHeightLWithoutGap += el.offsetHeight\n        countL += 1\n      } else {\n        totalHeightR += el.offsetHeight + primaryNodeVerticalGap\n        totalHeightRWithoutGap += el.offsetHeight\n        countR += 1\n      }\n    }\n    if (totalHeightL > totalHeightR) {\n      base = 10000 - Math.max(totalHeightL) / 2\n      shortSide = 'r'\n      shortSideGap = (totalHeightL - totalHeightRWithoutGap) / (countR - 1)\n    } else {\n      base = 10000 - Math.max(totalHeightR) / 2\n      shortSide = 'l'\n      shortSideGap = (totalHeightR - totalHeightLWithoutGap) / (countL - 1)\n    }\n  } else {\n    for (let i = 0; i < primaryNodeList.length; i++) {\n      const el = primaryNodeList[i]\n      totalHeight += el.offsetHeight + primaryNodeVerticalGap\n    }\n    base = 10000 - totalHeight / 2\n  }\n\n  // 2. layout primary node, generate primary link\n  let primaryPath = ''\n  const alignRight = 10000 - root.offsetWidth / 2 - primaryNodeHorizontalGap+60\n  const alignLeft = 10000 + root.offsetWidth / 2 + primaryNodeHorizontalGap-60\n  for (let i = 0; i < primaryNodeList.length; i++) {\n    let x2, y2\n    const el = primaryNodeList[i]\n    const elOffsetH = el.offsetHeight\n    let xMiddle=root.offsetLeft-10\n    if (el.className === 'lhs') {\n      el.style.top = base + currentOffsetL + 'px'\n      el.style.left = alignRight - el.offsetWidth + 'px'\n      x2 = alignRight - 15 // padding\n      y2 = base + currentOffsetL + elOffsetH / 2\n\n      // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d#path_commands\n      let LEFT = 10000\n      if (this.primaryLinkStyle === 2) {\n        if (this.direction === SIDE) {\n          LEFT = 10000 - root.offsetWidth / 6\n        }\n        if (y2 < 10000) {\n          primaryPath += `M ${LEFT} 10000 V ${y2 + 20} C ${LEFT} ${y2} ${LEFT} ${y2} ${LEFT - 20} ${y2} H ${x2}`\n        } else {\n          primaryPath += `M ${LEFT} 10000 V ${y2 - 20} C ${LEFT} ${y2} ${LEFT} ${y2} ${LEFT - 20} ${y2} H ${x2}`\n        }\n      } else {\n        primaryPath += `M 10000 10000 H ${xMiddle} V ${y2} H ${x2}`\n      }\n\n      if (shortSide === 'l') {\n        currentOffsetL += elOffsetH + shortSideGap\n      } else {\n        currentOffsetL += elOffsetH + primaryNodeVerticalGap\n      }\n    } else {\n      xMiddle=root.offsetLeft+root.offsetWidth+10\n      el.style.top = base + currentOffsetR + 'px'\n      el.style.left = alignLeft + 'px'\n      x2 = alignLeft + 15 // padding\n      y2 = base + currentOffsetR + elOffsetH / 2\n\n      let LEFT = 10000\n      if (this.primaryLinkStyle === 2) {\n        if (this.direction === SIDE) {\n          LEFT = 10000 + root.offsetWidth / 6\n        }\n        if (y2 < 10000) {\n          primaryPath += `M ${LEFT} 10000 V ${y2 + 20} C ${LEFT} ${y2} ${LEFT} ${y2} ${LEFT + 20} ${y2} H ${x2}`\n        } else {\n          primaryPath += `M ${LEFT} 10000 V ${y2 - 20} C ${LEFT} ${y2} ${LEFT} ${y2} ${LEFT + 20} ${y2} H ${x2}`\n        }\n      } else {\n        primaryPath += `M 10000 10000 H ${xMiddle} V ${y2} H ${x2}`\n      }\n      if (shortSide === 'r') {\n        currentOffsetR += elOffsetH + shortSideGap\n      } else {\n        currentOffsetR += elOffsetH + primaryNodeVerticalGap\n      }\n    }\n    // set position of expander\n    const expander = el.children[0].children[1]\n    if (expander) {\n      expander.style.top =\n        (expander.parentNode.offsetHeight - expander.offsetHeight) / 2 + 'px'\n      if (el.className === 'lhs') {\n        expander.style.left = -10 + 'px'\n      } else {\n        expander.style.left = expander.parentNode.offsetWidth - 10 + 'px'\n      }\n    }\n  }\n  this.svg2nd.appendChild(createMainPath(primaryPath))\n\n  // 3. generate link inside primary node\n  for (let i = 0; i < primaryNodeList.length; i++) {\n    const el = primaryNodeList[i]\n    if (primaryNode && primaryNode !== primaryNodeList[i]) {\n      continue\n    }\n    if (el.childElementCount) {\n      const svg = createLinkSvg('svg3rd')\n      // svg tag name is lower case\n      if (el.lastChild.tagName === 'svg') el.lastChild.remove()\n      el.appendChild(svg)\n      const parent = el.children[0]\n      const children = el.children[1].children\n      path = ''\n      loopChildren(children, parent, true)\n      svg.appendChild(createPath(path))\n    }\n  }\n\n  // 4. generate custom link\n  this.linkSvgGroup.innerHTML = ''\n  for (const prop in this.linkData) {\n    const link = this.linkData[prop]\n    if (typeof link.from === 'string') {\n      this.createLink(findEle(link.from), findEle(link.to), true, link)\n    } else {\n      this.createLink(\n        findEle(link.from.nodeObj.id),\n        findEle(link.to.nodeObj.id),\n        true,\n        link\n      )\n    }\n  }\n  console.timeEnd('linkDiv')\n}\n\nlet path = ''\nfunction loopChildren(children: HTMLCollection, parent: HTMLElement, first?: boolean) {\n  const parentOT = parent.offsetTop\n  const parentOL = parent.offsetLeft\n  const parentOW = parent.offsetWidth\n  const parentOH = parent.offsetHeight\n  for (let i = 0; i < children.length; i++) {\n    const child: HTMLElement = children[i] as HTMLElement\n    const childT: HTMLElement = child.children[0] as HTMLElement // t tag inside the child dom\n    const childTOT = childT.offsetTop\n    const childTOH = childT.offsetHeight\n    let y1: number\n    if (first) {\n      y1 = parentOT + parentOH / 2\n    } else {\n      y1 = parentOT + parentOH\n    }\n    const y2 = childTOT + childTOH\n    let x1: number, x2: number, xMiddle: number\n    const direction = child.offsetParent.className\n    if (direction === 'lhs') {\n      x1 = parentOL + GAP\n      xMiddle = parentOL\n      x2 = parentOL - childT.offsetWidth\n\n      if (\n        childTOT + childTOH < parentOT + parentOH / 2 + 50 &&\n        childTOT + childTOH > parentOT + parentOH / 2 - 50\n      ) {\n        // 相差+-50内直接直线\n        path += `M ${x1} ${y1} H ${xMiddle} V ${y2} H ${x2}`\n      } else if (childTOT + childTOH >= parentOT + parentOH / 2) {\n        // 子底部低于父中点\n        path += `M ${x1} ${y1} H ${xMiddle} V ${y2 } H ${x2}`\n      } else {\n        // 子底部高于父中点\n        path += `M ${x1} ${y1} H ${xMiddle} V ${y2 } H ${x2}`\n      }\n    } else if (direction === 'rhs') {\n      x1 = parentOL + parentOW - GAP\n      xMiddle = parentOL + parentOW\n      x2 = parentOL + parentOW + childT.offsetWidth\n\n      if (\n        childTOT + childTOH < parentOT + parentOH / 2 + 50 &&\n        childTOT + childTOH > parentOT + parentOH / 2 - 50\n      ) {\n        path += `M ${x1} ${y1} H ${xMiddle} V ${y2} H ${x2}`\n      } else if (childTOT + childTOH >= parentOT + parentOH / 2) {\n        path += `M ${x1} ${y1} H ${xMiddle} V ${y2 } H ${x2}`\n      } else {\n        path += `M ${x1} ${y1} H ${xMiddle} V ${y2 } H ${x2}`\n      }\n    }\n\n    const expander = childT.children[1] as Expander\n    if (expander) {\n      expander.style.top =\n        (childT.offsetHeight - expander.offsetHeight) / 2 + 'px'\n      if (direction === 'lhs') {\n        expander.style.left = -10 + 'px'\n      } else if (direction === 'rhs') {\n        expander.style.left = childT.offsetWidth - 10 + 'px'\n      }\n      // this property is added in the layout phase\n      if (!expander.expanded) continue\n    } else {\n      // expander not exist\n      continue\n    }\n    // traversal\n    const nextChildren = child.children[1].children\n    if (nextChildren.length > 0) loopChildren(nextChildren, childT)\n  }\n}\n","import { dragMoveHelper } from './utils/index'\nexport default function(mind) {\n  mind.map.addEventListener('click', e => {\n    // if (dragMoveHelper.afterMoving) return\n    // e.preventDefault() // can cause a tag don't work\n    if (e.target.nodeName === 'EPD') {\n      mind.expandNode(e.target.previousSibling)\n    } else if (\n      e.target.parentElement.nodeName === 'T' ||\n      e.target.parentElement.nodeName === 'ROOT'\n    ) {\n      mind.selectNode(e.target, false, e)\n    } else if (e.target.nodeName === 'path') {\n      if (e.target.parentElement.nodeName === 'g') {\n        mind.selectLink(e.target.parentElement)\n      }\n    } else if (e.target.className === 'circle') {\n      // skip circle\n    } else {\n      mind.unselectNode()\n      mind.hideLinkController()\n    }\n  })\n\n  mind.map.addEventListener('dblclick', e => {\n    e.preventDefault()\n    if (!mind.editable) return\n    if (\n      e.target.parentElement.nodeName === 'T' ||\n      e.target.parentElement.nodeName === 'ROOT'\n    ) {\n      mind.beginEdit(e.target)\n    }else if(e.target.className!=='content'){\n      let node = e.target\n      while(node.parentElement){\n        node=node.parentElement\n        if(node.nodeName === 'TPC'){\n          mind.beginEdit(node)\n          break\n        }\n      }\n    }\n  })\n\n  /**\n   * drag and move\n   */\n  mind.map.addEventListener('mousemove', e => {\n    // click trigger mousemove in windows chrome\n    // the 'true' is a string\n    if (e.target.contentEditable !== 'true') {\n      dragMoveHelper.onMove(e, mind.container)\n    }\n  })\n  mind.map.addEventListener('mousedown', e => {\n    if (e.target.contentEditable !== 'true') {\n      dragMoveHelper.afterMoving = false\n      dragMoveHelper.mousedown = true\n    }\n  })\n  mind.map.addEventListener('mouseleave', e => {\n    dragMoveHelper.clear()\n  })\n  mind.map.addEventListener('mouseup', e => {\n    dragMoveHelper.clear()\n  })\n\n  mind.map.addEventListener('wheel', e => {\n    // e.preventDefault()\n  })\n}\n","const cn = {\n  addChild: '插入子节点',\n  addParent: '插入父节点',\n  addSibling: '插入同级节点',\n  removeNode: '删除节点',\n  focus: '专注',\n  cancelFocus: '取消专注',\n  moveUp: '上移',\n  moveDown: '下移',\n  // link: '连接',\n  clickTips: '请点击目标节点',\n\n  font: '文字',\n  background: '背景',\n  tag: '标签',\n  icon: '图标',\n  tagsSeparate: '多个标签半角逗号分隔',\n  iconsSeparate: '多个图标半角逗号分隔',\n  link:'连线',\n  nodeLink:'主题内超链接',\n  hyperlink:'超链接',\n  linkSeparate:'链接地址,多个链接半角逗号分隔',\n  remark:'备注',\n  reamrkSeparate:'内容'\n}\nexport default {\n  cn,\n  zh_CN: cn,\n  zh_TW: {\n    addChild: '插入子節點',\n    addParent: '插入父節點',\n    addSibling: '插入同級節點',\n    removeNode: '刪除節點',\n    focus: '專注',\n    cancelFocus: '取消專注',\n    moveUp: '上移',\n    moveDown: '下移',\n    link: '連接',\n    clickTips: '請點擊目標節點',\n\n    font: '文字',\n    background: '背景',\n    tag: '標簽',\n    icon: '圖標',\n    tagsSeparate: '多個標簽半角逗號分隔',\n    iconsSeparate: '多個圖標半角逗號分隔',\n  },\n  en: {\n    addChild: 'Add child',\n    addParent: 'Add parent',\n    addSibling: 'Add sibling',\n    removeNode: 'Remove node',\n    focus: 'Focus Mode',\n    cancelFocus: 'Cancel Focus Mode',\n    moveUp: 'Move up',\n    moveDown: 'Move down',\n    link: 'Link',\n    clickTips: 'Please click the target node',\n\n    font: 'Font',\n    background: 'Background',\n    tag: 'Tag',\n    icon: 'Icon',\n    tagsSeparate: 'Separate tags by comma',\n    iconsSeparate: 'Separate icons by comma',\n    hyperlink:'hyperlink',\n    linkSeparate:'link address',\n    remark:'remark',\n    reamrkSeparate:'content'\n  },\n  ja: {\n    addChild: '子ノードを追加する',\n    addParent: '親ノードを追加します',\n    addSibling: '兄弟ノードを追加する',\n    removeNode: 'ノードを削除',\n    focus: '集中',\n    cancelFocus: '集中解除',\n    moveUp: '上へ移動',\n    moveDown: '下へ移動',\n    link: 'コネクト',\n    clickTips: 'ターゲットノードをクリックしてください',\n\n    font: 'フォント',\n    background: 'バックグラウンド',\n    tag: 'タグ',\n    icon: 'アイコン',\n    tagsSeparate: '複数タグはカンマ区切り',\n    iconsSeparate: '複数アイコンはカンマ区切り',\n  },\n  pt: {\n    addChild: 'Adicionar item filho',\n    addParent: 'Adicionar item pai',\n    addSibling: 'Adicionar item irmao',\n    removeNode: 'Remover item',\n    focus: 'Modo Foco',\n    cancelFocus: 'Cancelar Modo Foco',\n    moveUp: 'Mover para cima',\n    moveDown: 'Mover para baixo',\n    link: 'Link',\n    clickTips: 'Favor clicar no item alvo',\n\n    font: 'Fonte',\n    background: 'Cor de fundo',\n    tag: 'Tag',\n    icon: 'Icone',\n    tagsSeparate: 'Separe tags por virgula',\n    iconsSeparate: 'Separe icones por virgula',\n  },\n}\n","import i18n from '../i18n'\nimport linkDiv from '../linkDiv'\nimport { shapeTpc } from '../utils/dom'\nimport { encodeHTML } from '../utils/index'\n\nexport default function(mind, option) {\n  const createTips = words => {\n    const div = document.createElement('div')\n    div.innerText = words\n    div.style.cssText = 'position:absolute;bottom:20px;left:50%;transform:translateX(-50%);'\n    return div\n  }\n  const createLi = (id, name, keyname) => {\n    const li = document.createElement('li')\n    li.id = id\n    li.innerHTML = `<span>${encodeHTML(name)}</span><span>${encodeHTML(keyname)}</span>`\n    return li\n  }\n  const locale = i18n[mind.locale] ? mind.locale : 'en'\n\n  const add_child = createLi('cm-add_child', i18n[locale].addChild, 'tab')\n  const add_parent = createLi('cm-add_parent', i18n[locale].addParent, '')\n  const add_sibling = createLi('cm-add_sibling', i18n[locale].addSibling, 'enter')\n  const remove_child = createLi(\n    'cm-remove_child',\n    i18n[locale].removeNode,\n    'delete'\n  )\n  const focus = createLi('cm-fucus', i18n[locale].focus, '')\n  const unfocus = createLi('cm-unfucus', i18n[locale].cancelFocus, '')\n  const up = createLi('cm-up', i18n[locale].moveUp, 'PgUp')\n  const down = createLi('cm-down', i18n[locale].moveDown, 'Pgdn')\n  const link = createLi('cm-down', i18n[locale].link, '')\n  const nodeLink = createLi('cm-down', i18n[locale].nodeLink, '')\n\n  const menuUl = document.createElement('ul')\n  menuUl.className = 'menu-list'\n  menuUl.appendChild(add_child)\n  menuUl.appendChild(add_parent)\n  menuUl.appendChild(add_sibling)\n  menuUl.appendChild(remove_child)\n  if (!option || option.focus) {\n    menuUl.appendChild(focus)\n    menuUl.appendChild(unfocus)\n  }\n  menuUl.appendChild(up)\n  menuUl.appendChild(down)\n  if (!option || option.link) {\n    menuUl.appendChild(link)\n    menuUl.appendChild(nodeLink)\n  }\n  if (option && option.extend) {\n    for (let i = 0; i < option.extend.length; i++) {\n      const item = option.extend[i]\n      const dom = createLi(item.name, item.name, item.key || '')\n      menuUl.appendChild(dom)\n      dom.onclick = e => {\n        item.onclick(e)\n      }\n    }\n  }\n  const menuContainer = document.createElement('cmenu')\n  menuContainer.appendChild(menuUl)\n  menuContainer.hidden = true\n\n  mind.container.append(menuContainer)\n  let isRoot = true\n  mind.container.oncontextmenu = function(e) {\n    e.preventDefault()\n    if (!mind.editable) return\n    // console.log(e.pageY, e.screenY, e.clientY)\n    const target = e.target\n    if (target.tagName === 'TPC') {\n      if (target.parentElement.tagName === 'ROOT') {\n        isRoot = true\n      } else {\n        isRoot = false\n      }\n      if (isRoot) {\n        focus.className = 'disabled'\n        up.className = 'disabled'\n        down.className = 'disabled'\n        add_sibling.className = 'disabled'\n        remove_child.className = 'disabled'\n      } else {\n        focus.className = ''\n        up.className = ''\n        down.className = ''\n        add_sibling.className = ''\n        remove_child.className = ''\n      }\n      mind.selectNode(target)\n      menuContainer.hidden = false\n      const height = menuUl.offsetHeight\n      const width = menuUl.offsetWidth\n      if (height + e.clientY > window.innerHeight) {\n        menuUl.style.top = ''\n        menuUl.style.bottom = '0px'\n      } else {\n        menuUl.style.bottom = ''\n        menuUl.style.top = e.clientY + 15 + 'px'\n      }\n      if (width + e.clientX > window.innerWidth) {\n        menuUl.style.left = ''\n        menuUl.style.right = '0px'\n      } else {\n        menuUl.style.right = ''\n        menuUl.style.left = e.clientX + 10 + 'px'\n      }\n    }\n  }\n\n  menuContainer.onclick = e => {\n    if (e.target === menuContainer) menuContainer.hidden = true\n  }\n\n  add_child.onclick = e => {\n    mind.addChild()\n    menuContainer.hidden = true\n  }\n  add_parent.onclick = e => {\n    mind.insertParent()\n    menuContainer.hidden = true\n  }\n  add_sibling.onclick = e => {\n    if (isRoot) return\n    mind.insertSibling()\n    menuContainer.hidden = true\n  }\n  remove_child.onclick = e => {\n    if (isRoot) return\n    mind.removeNode()\n    menuContainer.hidden = true\n  }\n  focus.onclick = e => {\n    if (isRoot) return\n    mind.focusNode(mind.currentNode)\n    menuContainer.hidden = true\n  }\n  unfocus.onclick = e => {\n    mind.cancelFocus()\n    menuContainer.hidden = true\n  }\n  up.onclick = e => {\n    if (isRoot) return\n    mind.moveUpNode()\n    menuContainer.hidden = true\n  }\n  down.onclick = e => {\n    if (isRoot) return\n    mind.moveDownNode()\n    menuContainer.hidden = true\n  }\n  link.onclick = e => {\n    menuContainer.hidden = true\n    const from = mind.currentNode\n    const tips = createTips(i18n[locale].clickTips)\n    mind.container.appendChild(tips)\n    mind.map.addEventListener(\n      'click',\n      e => {\n        e.preventDefault()\n        tips.remove()\n        if (\n          e.target.parentElement.nodeName === 'T' ||\n          e.target.parentElement.nodeName === 'ROOT'\n        ) {\n          const to =mind.currentNode\n          mind.createLink(from,to)\n        } else {\n          console.log('取消连接')\n        }\n      },\n      {\n        once: true,\n      }\n    )\n  }\n  nodeLink.onclick = e => {\n    menuContainer.hidden = true\n    const from = mind.currentNode\n    const tips = createTips(i18n[locale].clickTips)\n    mind.container.appendChild(tips)\n    mind.map.addEventListener(\n      'click',\n      e => {\n        e.preventDefault()\n        tips.remove()\n        if (\n          e.target.parentElement.nodeName === 'T' ||\n          e.target.parentElement.nodeName === 'ROOT'\n        ) {\n          const to =mind.currentNode\n          if(!from.nodeObj.linkJump) from.nodeObj.linkJump=[]\n          from.nodeObj.linkJump.push({\n              toId:to.nodeObj.id,\n              title:to.nodeObj.topic\n            }\n          )\n          mind.shapeTpc(from,from.nodeObj)\n          mind.linkDiv()\n        } else {\n          console.log('取消连接')\n        }\n      },\n      {\n        once: true,\n      }\n    )\n  }\n}\n","import { NodeObj } from \"..\"\n\nfunction queryList(nodeData:NodeObj,cnt:number):string{\n    let res:string=''\n    for(let i =0;i<nodeData.children?.length;i++){\n        // res+=queryList(nodeData.children[i])`\n        res +=`<li class=\"sidebar-links\">${queryList(nodeData.children[i],cnt+1)}</li>`\n    }\n    if(!nodeData?.children||!nodeData.children.length){\n        return `<p class=\"sidebar-title\"><span class=\"arrow \"></span><span>${nodeData.topic}</span></p>`\n    }else{\n        return `<p class=\"sidebar-title\"><span class=\"arrow ${cnt<2?'down':'right'}\"></span><span>${nodeData.topic}</span></p><ul class=\"sidebar-heading open ${cnt<2?'':'hidden'}\">${res}</ul>`\n    }\n    \n}\n\nexport function updateSidebar(mind,sidebar:HTMLElement){\n    const nodeData=mind.nodeData\n    sidebar.innerHTML = `${queryList(nodeData,0)}`\n    sidebar.querySelectorAll('.sidebar-title').forEach((e:HTMLElement)=>{\n        e.onclick=()=>{\n              const down = e.querySelector('.down')\n              const right = e.querySelector('.right')\n              if(down){\n                e.parentElement.querySelector('ul').classList.add('hidden')\n                down.classList.replace('down','right')\n              }else{\n                e.parentElement.querySelector('ul').classList.remove('hidden')\n                right.classList.replace('right','down')\n              }\n        }\n    })\n}\n\nexport default function(mind){\n    const sidebar = document.createElement('sidebar')\n    const nodeData=mind.nodeData\n    sidebar.innerHTML = `${queryList(nodeData,0)}`\n    mind.container.append(sidebar)\n}\n","import { updateSidebar } from \"./sidebar\"\n\nconst createButton = (id, name) => {\n  const button = document.createElement('span')\n  button.id = id\n  button.innerHTML = `<svg class=\"icon\" aria-hidden=\"true\">\n    <use xlink:href=\"#icon-${name}\"></use>\n  </svg>`\n  return button\n}\n\nfunction createToolBarRBContainer(mind) {\n  const toolBarRBContainer = document.createElement('toolbar')\n  const fc = createButton('fullscreen', 'full')\n  const gc = createButton('toCenter', 'living')\n  const zo = createButton('zoomout', 'move')\n  const zi = createButton('zoomin', 'add')\n  const numberSelection=document.createElement('input')\n  numberSelection.className='numberSelection'\n  numberSelection.type='number'\n  numberSelection.min='3'\n  numberSelection.max='100'\n  numberSelection.step='1'\n  numberSelection.value=mind?.expandDeep?.toString()||'3'\n  const percentage = document.createElement('span')\n  percentage.innerText = '100%'\n  toolBarRBContainer.appendChild(numberSelection)\n  toolBarRBContainer.appendChild(fc)\n  toolBarRBContainer.appendChild(gc)\n  toolBarRBContainer.appendChild(zo)\n  toolBarRBContainer.appendChild(zi)\n  \n  // toolBarRBContainer.appendChild(percentage)\n  toolBarRBContainer.className = 'rb'\n  fc.onclick = () => {\n    mind.container.requestFullscreen()\n  }\n  gc.onclick = () => {\n    mind.toCenter()\n  }\n  zo.onclick = () => {\n    if (mind.scaleVal < 0.6) return\n    mind.scale((mind.scaleVal -= 0.2))\n  }\n  zi.onclick = () => {\n    if (mind.scaleVal > 1.6) return\n    mind.scale((mind.scaleVal += 0.2))\n  }\n  return toolBarRBContainer\n}\nfunction createToolBarLTContainer(mind) {\n  const toolBarLTContainer = document.createElement('toolbar')\n  const menu  = createButton('sidebar', 'menu')\n  const l = createButton('tbltl', 'left')\n  const r = createButton('tbltr', 'right')\n  const s = createButton('tblts', 'side')\n  toolBarLTContainer.appendChild(menu)\n  toolBarLTContainer.appendChild(l)\n  toolBarLTContainer.appendChild(r)\n  toolBarLTContainer.appendChild(s)\n  toolBarLTContainer.className = 'lt'\n\n  \n  menu.onclick=() => {\n    const sidebar =document.querySelector('sidebar')\n    updateSidebar(mind,sidebar as HTMLElement)\n    if(sidebar.classList.contains('selected')){\n      sidebar.removeAttribute('class')\n    }else{\n      sidebar.setAttribute('class','selected')\n    }\n  }\n  l.onclick = () => {\n    mind.initLeft()\n  }\n  r.onclick = () => {\n    mind.initRight()\n  }\n  s.onclick = () => {\n    mind.initSide()\n  }\n  return toolBarLTContainer\n}\n\nexport default function(mind) {\n  mind.container.append(createToolBarRBContainer(mind))\n  mind.container.append(createToolBarLTContainer(mind))\n}\n","import i18n from '../i18n'\n\nconst createDiv = (id) => {\n  const div = document.createElement('div')\n  div.id = id\n  return div\n}\n\nconst colorList = [\n  '#2c3e50',\n  '#34495e',\n  '#7f8c8d',\n  '#94a5a6',\n  '#bdc3c7',\n  '#ffffff',\n  '#8e44ad',\n  '#9b59b6',\n  '#2980b9',\n  '#3298db',\n  '#c0392c',\n  '#e74c3c',\n  '#d35400',\n  '#f39c11',\n  '#f1c40e',\n  '#17a085',\n  '#27ae61',\n  '#2ecc71',\n]\n\nexport default function(mind) {\n  const locale = i18n[mind.locale] ? mind.locale : 'en'\n  let bgOrFont\n  const styleDiv = createDiv('nm-style')\n  const tagDiv = createDiv('nm-tag')\n  const iconDiv = createDiv('nm-icon')\n  //different from \"linkDiv\" which is aims to link nodes with svg,\n  const linkDiv = createDiv('nm-link')\n  const remarkDiv = createDiv('nm-remark')\n  styleDiv.innerHTML = `\n      <div class=\"nm-fontsize-container\">\n        ${['15', '24', '32']\n    .map(size => {\n      return `<div class=\"size\"  data-size=\"${size}\">\n        <svg class=\"icon\" style=\"width: ${size}px;height: ${size}px\" aria-hidden=\"true\">\n          <use xlink:href=\"#icon-a\"></use>\n        </svg></div>`\n    })\n    .join('')}<div class=\"bold\"><svg class=\"icon\" aria-hidden=\"true\">\n  <use xlink:href=\"#icon-B\"></use>\n  </svg></div>\n      </div>\n      <div class=\"nm-fontcolor-container\">\n        ${colorList\n    .map(color => {\n      return `<div class=\"split6\"><div class=\"palette\" data-color=\"${color}\" style=\"background-color: ${color};\"></div></div>`\n    })\n    .join('')}\n      </div>\n      <div class=\"bof\">\n      <span class=\"font\">${i18n[locale].font}</span>\n      <span class=\"background\">${i18n[locale].background}</span>\n      </div>\n  `\n  tagDiv.innerHTML = `${i18n[locale].tag}<input class=\"nm-tag\" tabindex=\"-1\" placeholder=\"${i18n[locale].tagsSeparate}\" /><br>`\n  iconDiv.innerHTML = `${i18n[locale].icon}<input class=\"nm-icon\" tabindex=\"-1\" placeholder=\"${i18n[locale].iconsSeparate}\" /><br>`\n  linkDiv.innerHTML = `${i18n[locale].hyperlink}<input class=\"nm-link\" tabindex=\"-1\" placeholder=\"${i18n[locale].linkSeparate}\" /><br>`\n  remarkDiv.innerHTML = `${i18n[locale].remark}<input class=\"nm-remark\" tabindex=\"-1\" placeholder=\"${i18n[locale].reamrkSeparate}\" /><br>`\n\n  const menuContainer = document.createElement('nmenu')\n  menuContainer.innerHTML = `\n  <div class=\"button-container\"><svg class=\"icon\" aria-hidden=\"true\">\n  <use xlink:href=\"#icon-close\"></use>\n  </svg></div>\n  `\n  menuContainer.appendChild(styleDiv)\n  menuContainer.appendChild(tagDiv)\n  menuContainer.appendChild(iconDiv)\n  menuContainer.appendChild(linkDiv) \n  menuContainer.appendChild(remarkDiv)\n  menuContainer.hidden = true\n\n  function clearSelect(klass, remove) {\n    var elems = mind.container.querySelectorAll(klass)\n    ;[].forEach.call(elems, function(el) {\n      el.classList.remove(remove)\n    })\n  }\n\n  mind.container.append(menuContainer)\n  const sizeSelector = menuContainer.querySelectorAll('.size')\n  const bold:HTMLElement = menuContainer.querySelector('.bold')\n  const buttonContainer:HTMLElement = menuContainer.querySelector('.button-container')\n  const fontBtn:HTMLElement = menuContainer.querySelector('.font')\n  const tagInput:HTMLInputElement = mind.container.querySelector('.nm-tag')\n  const iconInput:HTMLInputElement = mind.container.querySelector('.nm-icon')\n  const linkInput:HTMLInputElement = mind.container.querySelector('.nm-link')\n  const remarkInput:HTMLInputElement = mind.container.querySelector('.nm-remark')\n  menuContainer.onclick = e => {\n    if (!mind.currentNode) return\n    const nodeObj = mind.currentNode.nodeObj\n    const target = e.target as HTMLElement\n    if (target.className === 'palette') {\n      if (!nodeObj.style) nodeObj.style = {}\n      clearSelect('.palette', 'nmenu-selected')\n      target.className = 'palette nmenu-selected'\n      if (bgOrFont === 'font') {\n        nodeObj.style.color = target.dataset.color\n      } else if (bgOrFont === 'background') {\n        nodeObj.style.background = target.dataset.color\n      }\n      mind.updateNodeStyle(nodeObj)\n    } else if (target.className === 'background') {\n      clearSelect('.palette', 'nmenu-selected')\n      bgOrFont = 'background'\n      target.className = 'background selected'\n      target.previousElementSibling.className = 'font'\n      if (nodeObj.style && nodeObj.style.background) {\n        menuContainer.querySelector(\n          '.palette[data-color=\"' + nodeObj.style.background + '\"]'\n        ).className = 'palette nmenu-selected'\n      }\n    } else if (target.className === 'font') {\n      clearSelect('.palette', 'nmenu-selected')\n      bgOrFont = 'font'\n      target.className = 'font selected'\n      target.nextElementSibling.className = 'background'\n      if (nodeObj.style && nodeObj.style.color) {\n        menuContainer.querySelector(\n          '.palette[data-color=\"' + nodeObj.style.color + '\"]'\n        ).className = 'palette nmenu-selected'\n      }\n    }\n  }\n  Array.from(sizeSelector).map(\n    dom => {\n      (dom as HTMLElement).onclick = e => {\n        if (!mind.currentNode.nodeObj.style) mind.currentNode.nodeObj.style = {}\n        clearSelect('.size', 'size-selected')\n        const size = e.currentTarget as HTMLElement\n        mind.currentNode.nodeObj.style.fontSize = size.dataset.size\n        size.className = 'size size-selected'\n        mind.updateNodeStyle(mind.currentNode.nodeObj)\n      }\n    }\n  )\n  bold.onclick = (e:MouseEvent & { currentTarget: Element}) => {\n    if (!mind.currentNode.nodeObj.style) mind.currentNode.nodeObj.style = {}\n    if (mind.currentNode.nodeObj.style.fontWeight === 'bold') {\n      delete mind.currentNode.nodeObj.style.fontWeight\n      e.currentTarget.className = 'bold'\n      mind.updateNodeStyle(mind.currentNode.nodeObj)\n    } else {\n      mind.currentNode.nodeObj.style.fontWeight = 'bold'\n      e.currentTarget.className = 'bold size-selected'\n      mind.updateNodeStyle(mind.currentNode.nodeObj)\n    }\n  }\n  tagInput.onchange = (e:InputEvent & { target: HTMLInputElement}) => {\n    if (!mind.currentNode) return\n    if (e.target.value!==null||e.target.value!==undefined) {\n      const newTags = e.target.value.split(',')\n      mind.updateNodeTags(mind.currentNode.nodeObj, newTags)\n    }\n  }\n  iconInput.onchange = (e:InputEvent & { target: HTMLInputElement}) => {\n    if (!mind.currentNode) return\n    if (e.target.value!==null||e.target.value!==undefined) {\n      const newIcons = e.target.value.split(',')\n      mind.updateNodeIcons(mind.currentNode.nodeObj, newIcons)\n    }\n  }\n  linkInput.onchange = (e:InputEvent & { target: HTMLInputElement}) => {\n    if (!mind.currentNode) return\n    if (e.target.value!==null||e.target.value!==undefined) {\n      const link = e.target.value\n      mind.updateNodeHyperLink(mind.currentNode.nodeObj, link)\n    }\n  }\n  remarkInput.onchange = (e:InputEvent & { target: HTMLInputElement}) => {\n    if (!mind.currentNode) return\n    if (e.target.value!==null||e.target.value!==undefined) {\n      const input = e.target.value\n      mind.updateNodeRemark(mind.currentNode.nodeObj, input)\n    }\n  }\n  let state = 'open'\n  buttonContainer.onclick = e => {\n    if (state === 'open') {\n      state = 'close'\n      menuContainer.className = 'close'\n      buttonContainer.innerHTML = `<svg class=\"icon\" aria-hidden=\"true\"><use xlink:href=\"#icon-menu\"></use></svg>`\n    } else {\n      state = 'open'\n      menuContainer.className = ''\n      buttonContainer.innerHTML = `<svg class=\"icon\" aria-hidden=\"true\"><use xlink:href=\"#icon-close\"></use></svg>`\n    }\n  }\n  mind.bus.addListener('unselectNode', function() {\n    menuContainer.hidden = true\n  })\n  mind.bus.addListener('selectNode', function(nodeObj, clickEvent) {\n    if (!clickEvent) return\n    menuContainer.hidden = false\n    clearSelect('.palette', 'nmenu-selected')\n    clearSelect('.size', 'size-selected')\n    clearSelect('.bold', 'size-selected')\n    bgOrFont = 'font'\n    fontBtn.className = 'font selected'\n    fontBtn.nextElementSibling.className = 'background'\n    if (nodeObj.style) {\n      if (nodeObj.style.fontSize) {\n        menuContainer.querySelector(\n          '.size[data-size=\"' + nodeObj.style.fontSize + '\"]'\n        ).className = 'size size-selected'\n      }\n      if (nodeObj.style.fontWeight) { menuContainer.querySelector('.bold').className = 'bold size-selected' }\n      if (nodeObj.style.color) {\n        menuContainer.querySelector(\n          '.palette[data-color=\"' + nodeObj.style.color + '\"]'\n        ).className = 'palette nmenu-selected'\n      }\n    }\n    if (nodeObj.tags) {\n      tagInput.value = nodeObj.tags.join(',')\n    } else {\n      tagInput.value = ''\n    }\n    if (nodeObj.icons) {\n      iconInput.value = nodeObj.icons.join(',')\n    } else {\n      iconInput.value = ''\n    }\n    if (nodeObj.hyperLink) {\n      linkInput.value = nodeObj.hyperLink\n    } else if(nodeObj.linkJump){\n      if(linkInput.value.length>0) linkInput.value+=','\n      linkInput.value += nodeObj.linkJump.map(val=>val.title).reduce((preVal,curVal)=>preVal+curVal,'')\n    } else{\n      linkInput.value = ''\n    }\n    if (nodeObj.remark) {\n      remarkInput.value = nodeObj.remark\n    } else {\n      remarkInput.value = ''\n    }\n  })\n}\n","import { dragMoveHelper, throttle } from '../utils/index'\nimport { findEle as E, Topic, Group } from '../utils/dom'\n// https://html.spec.whatwg.org/multipage/dnd.html#drag-and-drop-processing-model\n\nconst $d = document\nconst insertPreview = function(el, insertLocation) {\n  if (!insertLocation) {\n    clearPreview(el)\n    return el\n  }\n  const query = el.getElementsByClassName('insert-preview')\n  const className = `insert-preview ${insertLocation} show`\n  if (query.length > 0) {\n    query[0].className = className\n  } else {\n    const insertPreviewEL = $d.createElement('div')\n    insertPreviewEL.className = className\n    el.appendChild(insertPreviewEL)\n  }\n  return el\n}\n\nconst clearPreview = function(el) {\n  if (!el) return\n  const query = el.getElementsByClassName('insert-preview')\n  for (const queryElement of query || []) {\n    queryElement.remove()\n  }\n}\n\nconst canPreview = function(el:Element, dragged:Topic) {\n  const isContain = dragged.parentNode.parentNode.contains(el)\n  return (\n    el &&\n    el.tagName === 'TPC' &&\n    el !== dragged &&\n    !isContain &&\n    (el as Topic).nodeObj.root !== true\n  )\n}\n\nexport default function(mind) {\n  let dragged: Topic\n  let insertLocation:string\n  let meet: Element\n  const threshold = 12\n\n  mind.map.addEventListener('dragstart', function(e) {\n    dragged = e.target\n    ;(dragged.parentNode.parentNode as Group).style.opacity = '0.5'\n    dragMoveHelper.clear()\n  })\n\n  mind.map.addEventListener('dragend', async function(e: DragEvent) {\n    (e.target as HTMLElement).style.opacity = ''\n    clearPreview(meet)\n    const obj = dragged.nodeObj\n    switch (insertLocation) {\n      case 'before':\n        mind.moveNodeBefore(dragged, meet)\n        mind.selectNode(E(obj.id))\n        break\n      case 'after':\n        mind.moveNodeAfter(dragged, meet)\n        mind.selectNode(E(obj.id))\n        break\n      case 'in':\n        mind.moveNode(dragged, meet)\n        break\n    }\n    ;(dragged.parentNode.parentNode as Group).style.opacity = '1'\n    dragged = null\n  })\n\n  mind.map.addEventListener('dragover', throttle(function(e: DragEvent) {\n    // console.log('drag', e)\n    clearPreview(meet)\n    // minus threshold infer that postion of the cursor is above topic\n    const topMeet = $d.elementFromPoint(\n      e.clientX,\n      e.clientY - threshold\n    )\n    if (canPreview(topMeet, dragged)) {\n      meet = topMeet\n      const y = topMeet.getBoundingClientRect().y\n      if (e.clientY > y + topMeet.clientHeight) {\n        insertLocation = 'after'\n      } else if (e.clientY > y + topMeet.clientHeight / 2) {\n        insertLocation = 'in'\n      }\n    } else {\n      const bottomMeet = $d.elementFromPoint(\n        e.clientX,\n        e.clientY + threshold\n      )\n      if (canPreview(bottomMeet, dragged)) {\n        meet = bottomMeet\n        const y = bottomMeet.getBoundingClientRect().y\n        if (e.clientY < y) {\n          insertLocation = 'before'\n        } else if (e.clientY < y + bottomMeet.clientHeight / 2) {\n          insertLocation = 'in'\n        }\n      } else {\n        insertLocation = meet = null\n      }\n    }\n    if (meet) insertPreview(meet, insertLocation)\n  }, 200))\n}\n","export default function(mind) {\n  const key2func = {\n    13: () => {\n      // enter\n      mind.insertSibling()\n    },\n    9: () => {\n      // tab\n      mind.addChild()\n    },\n    113: () => {\n      // f2\n      mind.beginEdit()\n    },\n    38: () => {\n      // up\n      mind.selectPrevSibling()\n    },\n    40: () => {\n      // down\n      mind.selectNextSibling()\n    },\n    37: () => {\n      // left\n      if (!mind.currentNode) return\n      if (mind.currentNode.offsetParent.offsetParent.className === 'rhs') {\n        mind.selectParent()\n      } else if (\n        mind.currentNode.offsetParent.offsetParent.className === 'lhs' ||\n        mind.currentNode.nodeObj.root\n      ) {\n        mind.selectFirstChild()\n      }\n    },\n    39: () => {\n      // right\n      if (!mind.currentNode) return\n      if (\n        mind.currentNode.offsetParent.offsetParent.className === 'rhs' ||\n        mind.currentNode.nodeObj.root\n      ) {\n        mind.selectFirstChild()\n      } else if (\n        mind.currentNode.offsetParent.offsetParent.className === 'lhs'\n      ) {\n        mind.selectParent()\n      }\n    },\n    33() {\n      // pageUp\n      mind.moveUpNode()\n    },\n    34() {\n      // pageDown\n      mind.moveDownNode()\n    },\n    67(e) {\n      if (e.metaKey || e.ctrlKey) {\n      // ctrl c\n        mind.waitCopy = mind.currentNode\n      }\n    },\n    86(e) {\n      if (!mind.waitCopy) return\n      if (e.metaKey || e.ctrlKey) {\n      // ctrl v\n        mind.copyNode(mind.waitCopy, mind.currentNode)\n        mind.waitCopy = null\n      }\n    },\n    // ctrl z\n    90: e => {\n      if (!mind.allowUndo) return\n      if (e.metaKey || e.ctrlKey) mind.undo()\n    },\n    // ctrl +\n    187: e => {\n      if (e.metaKey || e.ctrlKey) {\n        if (mind.scaleVal > 1.6) return\n        mind.scale((mind.scaleVal += 0.2))\n      }\n    },\n    // ctrl -\n    189: e => {\n      if (e.metaKey || e.ctrlKey) {\n        if (mind.scaleVal < 0.6) return\n        mind.scale((mind.scaleVal -= 0.2))\n      }\n    },\n  }\n  mind.map.onkeydown = e => {\n    // console.log(e)\n    // e.preventDefault()\n    if (!mind.editable) return\n    // console.log(e, e.target)\n    if (e.target !== e.currentTarget) {\n      // input\n      return\n    }\n    if (e.keyCode === 8 || e.keyCode === 46) {\n      // del,backspace\n      if (mind.currentLink) mind.removeLink()\n      else mind.removeNode()\n    } else {\n      key2func[e.keyCode] && key2func[e.keyCode](e)\n    }\n  }\n}\n","export default function(mind, option?) {\n  const createLi = (id, name) => {\n    const div = document.createElement('div')\n    div.id = id\n    div.innerHTML = `<svg class=\"icon\" aria-hidden=\"true\">\n    <use xlink:href=\"#icon-${name}\"></use>\n  </svg>`\n    return div\n  }\n\n  const add_child = createLi('cm-add_child', 'zijiedian')\n  const add_sibling = createLi('cm-add_sibling', 'tongjijiedian-')\n  const remove_child = createLi('cm-remove_child', 'shanchu2')\n  // let focus = createLi('cm-fucus', i18n[locale].focus, '')\n  // let unfocus = createLi('cm-unfucus', i18n[locale].cancelFocus, '')\n  const up = createLi('cm-up', 'rising')\n  const down = createLi('cm-down', 'falling')\n  const edit = createLi('cm-edit', 'edit')\n  // let link = createLi('cm-down', i18n[locale].link, '')\n\n  const menuUl = document.createElement('ul')\n  menuUl.className = 'menu-list'\n  // if (!option || option.link) {\n  //   menuUl.appendChild(link)\n  // }\n  if (option && option.extend) {\n    for (let i = 0; i < option.extend.length; i++) {\n      const item = option.extend[i]\n      const dom = createLi(item.name, item.name)\n      menuUl.appendChild(dom)\n      dom.onclick = e => {\n        item.onclick(e)\n      }\n    }\n  }\n  const menuContainer = document.createElement('mmenu')\n  menuContainer.appendChild(add_child)\n  menuContainer.appendChild(add_sibling)\n  menuContainer.appendChild(remove_child)\n  // if (!option || option.focus) {\n  //   menuContainer.appendChild(focus)\n  //   menuContainer.appendChild(unfocus)\n  // }\n  menuContainer.appendChild(up)\n  menuContainer.appendChild(down)\n  menuContainer.appendChild(edit)\n  menuContainer.hidden = true\n\n  mind.container.append(menuContainer)\n  let isRoot = true\n  // mind.container.onclick = function (e) {\n  //   e.preventDefault()\n  //   // console.log(e.pageY, e.screenY, e.clientY)\n  //   let target = e.target\n  //   if (target.tagName === 'TPC') {\n  //     if (target.parentElement.tagName === 'ROOT') {\n  //       isRoot = true\n  //     } else {\n  //       isRoot = false\n  //     }\n  //     // if (isRoot) {\n  //     //   focus.className = 'disabled'\n  //     //   up.className = 'disabled'\n  //     //   down.className = 'disabled'\n  //     //   add_sibling.className = 'disabled'\n  //     //   remove_child.className = 'disabled'\n  //     // } else {\n  //     //   focus.className = ''\n  //     //   up.className = ''\n  //     //   down.className = ''\n  //     //   add_sibling.className = ''\n  //     //   remove_child.className = ''\n  //     // }\n  //     mind.selectNode(target)\n  //     menuContainer.hidden = false\n  //     let height = menuUl.offsetHeight\n  //     let width = menuUl.offsetWidth\n  //     let rect = target.getBoundingClientRect()\n  //     // menuUl.style.top = rect.top - 10 - height + 'px'\n  //     // menuUl.style.left = rect.left - (width - rect.width) / 2 + 'px'\n  //     // menuUl.style.left = e.clientX + 'px'\n  //   }\n  // }\n\n  mind.bus.addListener('unselectNode', function() {\n    menuContainer.hidden = true\n  })\n  mind.bus.addListener('selectNode', function(nodeObj) {\n    menuContainer.hidden = false\n    if (nodeObj.root) {\n      isRoot = true\n    } else {\n      isRoot = false\n    }\n  })\n  menuContainer.onclick = e => {\n    if (e.target === menuContainer) menuContainer.hidden = true\n  }\n\n  add_child.onclick = e => {\n    mind.addChild()\n  }\n  add_sibling.onclick = e => {\n    if (isRoot) return\n    mind.insertSibling()\n  }\n  remove_child.onclick = e => {\n    if (isRoot) return\n    mind.removeNode()\n  }\n  // focus.onclick = e => {\n  //   if (isRoot) return\n  //   mind.focusNode(mind.currentNode)\n  //   menuContainer.hidden = true\n  // }\n  // unfocus.onclick = e => {\n  //   mind.cancelFocus()\n  //   menuContainer.hidden = true\n  // }\n  up.onclick = e => {\n    if (isRoot) return\n    mind.moveUpNode()\n  }\n  down.onclick = e => {\n    if (isRoot) return\n    mind.moveDownNode()\n  }\n  edit.onclick = e => {\n    mind.beginEdit()\n  }\n  // link.onclick = e => {\n  //   let from = mind.currentNode\n  //   mind.map.addEventListener(\n  //     'click',\n  //     e => {\n  //       e.preventDefault()\n  //       if (\n  //         e.target.parentElement.nodeName === 'T' ||\n  //         e.target.parentElement.nodeName === 'ROOT'\n  //       ) {\n  //         mind.createLink(from, mind.currentNode)\n  //       } else {\n  //         console.log('取消连接')\n  //       }\n  //     },\n  //     {\n  //       once: true,\n  //     }\n  //   )\n  // }\n}\n","export default function Bus() {\n  this.handlers = {}\n}\nBus.prototype = {\n  showHandler: function() {\n    console.log(this.handlers)\n  },\n  addListener: function(type, handler) {\n    if (this.handlers[type] === undefined) this.handlers[type] = []\n    this.handlers[type].push(handler)\n  },\n  fire: function(type, ...payload) {\n    if (this.handlers[type] instanceof Array) {\n      var handlers = this.handlers[type]\n      for (var i = 0; i < handlers.length; i++) {\n        handlers[i](...payload)\n      }\n    }\n  },\n  removeListener: function(type, handler) {\n    if (!this.handlers[type]) return\n    var handlers = this.handlers[type]\n    if (!handler) {\n      handlers.length = 0\n    } else if (handlers.length) {\n      for (var i = 0; i < handlers.length; i++) {\n        if (handlers[i] === handler) {\n          this.handlers[type].splice(i, 1)\n        }\n      }\n    }\n  },\n}\n","!function(t){var c,l,a,e,o,i,n='<svg><symbol id=\"icon-edit\" viewBox=\"0 0 1024 1024\"><path d=\"M423.765333 128a42.666667 42.666667 0 0 1 3.2 85.205333L423.765333 213.333333H234.666667a64 64 0 0 0-63.872 60.245334L170.666667 277.333333v512a64 64 0 0 0 60.245333 63.872L234.666667 853.333333h512a64 64 0 0 0 63.872-60.245333L810.666667 789.333333v-189.098666a42.666667 42.666667 0 0 1 85.205333-3.2l0.128 3.2V789.333333a149.333333 149.333333 0 0 1-144.213333 149.248L746.666667 938.666667h-512a149.333333 149.333333 0 0 1-149.248-144.213334L85.333333 789.333333v-512a149.333333 149.333333 0 0 1 144.213334-149.248L234.666667 128h189.098666z m324.949334-53.248a42.666667 42.666667 0 0 1 60.330666 0l150.869334 150.869333a42.666667 42.666667 0 0 1 0 60.330667l-329.386667 329.386667a42.666667 42.666667 0 0 1-29.44 12.458666l-153.386667 2.517334a42.666667 42.666667 0 0 1-43.349333-43.349334l2.56-153.386666a42.666667 42.666667 0 0 1 12.458667-29.44z m30.165333 90.496L491.946667 452.266667l-1.493334 91.989333 92.032-1.493333 286.976-286.976-90.538666-90.538667z\"  ></path></symbol><symbol id=\"icon-rising\" viewBox=\"0 0 1024 1024\"><path d=\"M553.173333 803.84h-64l0.021334-474.581333-224.021334 224-45.269333-45.226667L521.6 206.293333l301.717333 301.696-45.269333 45.269334-224.853333-224.896v475.477333z\"  ></path></symbol><symbol id=\"icon-falling\" viewBox=\"0 0 1024 1024\"><path d=\"M553.173333 238.314667h-64l0.021334 474.602666-224.021334-224-45.269333 45.226667L521.6 835.861333l301.717333-301.717333-45.269333-45.226667-224.853333 224.853334V238.336z\"  ></path></symbol><symbol id=\"icon-shanchu2\" viewBox=\"0 0 1024 1024\"><path d=\"M516.60601807 107.93026734c-82.64382935 0-149.71865844 65.51751709-152.5729065 147.77160644H171.37136841c-21.40603638 0-38.92044068 17.38504028-38.92044068 38.92126465 0 21.40686036 17.38504028 38.92208862 38.92126466 38.92208862h42.94308471v435.40136719c0 81.73498536 55.39828492 148.55026245 123.90106201 148.55026245h348.99444581c68.37341309 0 123.90106201-66.42553711 123.901062-148.55026245V333.80477906h38.92126465c21.40686036 0 38.92126464-17.38586426 38.92126465-38.92208863 0-21.40686036-17.38504028-38.92126464-38.92126465-38.92126465H668.91854859C666.45321656 173.44860839 599.24902344 107.93109131 516.60601807 107.93109131z m-79.65939331 147.77160644c2.85424805-42.16442872 37.2354126-74.85809326 79.78875732-74.85809326s76.93450927 32.82302857 79.39984131 74.85809326H436.94662476z m-98.86047364 589.01165771c-24.2611084 0-50.98754883-31.13717651-50.98754883-75.76693725V333.80477906h450.97036744V769.33551026c0 44.50039673-26.72644043 75.76776123-50.98754884 75.76776122H338.08615112v-0.38973999z m0 0\"  ></path><path d=\"M390.37063599 751.17263794c17.77313232 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.77478027 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.27124023 40.08883667 32.43493653 40.08883667z m117.41308594 0c17.7739563 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.7739563 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.66098023 40.08883667 32.43493653 40.08883667z m123.51049804 0c17.7739563 0 32.43493653-17.7739563 32.43493652-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43493652-40.08966065-17.7739563 0-32.43411255 17.77478027-32.43411255 40.08966065v228.72875976c0 22.18469239 14.14105224 40.08883667 32.43411255 40.08883667z m0 0\"  ></path></symbol><symbol id=\"icon-zijiedian\" viewBox=\"0 0 1024 1024\"><path d=\"M312.208 472c19.568-157.856 153.432-280 315.656-280 175.68 0 318.112 143.272 318.112 320S803.552 832 627.864 832c-162.224 0-296.08-122.144-315.656-280H120a40 40 0 0 1 0-80h192.208zM632 752c132.552 0 240-107.448 240-240 0-132.552-107.448-240-240-240-132.552 0-240 107.448-240 240 0 132.552 107.448 240 240 240z m-40-280v-80a40 40 0 0 1 80 0v80h80a40 40 0 0 1 0 80h-80v80a40 40 0 0 1-80 0v-80h-80a40 40 0 0 1 0-80h80z\"  ></path></symbol><symbol id=\"icon-tongjijiedian-\" viewBox=\"0 0 1024 1024\"><path d=\"M803.84 131.626667H410.24A59.733333 59.733333 0 0 0 350.506667 192v45.226667H199.68a51.626667 51.626667 0 0 0-51.626667 51.626666v465.92a51.626667 51.626667 0 0 0 51.626667 51.626667h187.52v-55.466667h-162.133333a21.333333 21.333333 0 0 1-21.333334-21.333333V313.386667a21.333333 21.333333 0 0 1 21.333334-21.333334h125.653333v64a59.733333 59.733333 0 0 0 59.733333 59.733334h393.386667a59.733333 59.733333 0 0 0 59.733333-59.733334V192a59.733333 59.733333 0 0 0-59.733333-60.373333z m4.266667 224.64a4.266667 4.266667 0 0 1-4.266667 4.266666H410.24a4.266667 4.266667 0 0 1-4.266667-4.266666V192a4.266667 4.266667 0 0 1 4.266667-4.266667h393.6a4.266667 4.266667 0 0 1 4.266667 4.266667zM716.16 749.44h-81.28v-81.493333a27.733333 27.733333 0 0 0-55.466667 0v81.28h-81.493333a27.733333 27.733333 0 1 0 0 55.466666h81.28v81.28a27.733333 27.733333 0 1 0 55.466667 0v-81.066666h81.28a27.733333 27.733333 0 0 0 0-55.466667z\"  ></path></symbol><symbol id=\"icon-close\" viewBox=\"0 0 1024 1024\"><path d=\"M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512.128 467.904l-263.04-263.84c-12.448-12.48-32.704-12.544-45.248-0.064-12.512 12.48-12.544 32.736-0.064 45.28l262.976 263.776L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248a31.937 31.937 0 0 0 22.688 9.44c8.16 0 16.32-3.104 22.56-9.312l265.216-263.808 265.44 266.24c6.24 6.272 14.432 9.408 22.656 9.408a31.94 31.94 0 0 0 22.592-9.344c12.512-12.48 12.544-32.704 0.064-45.248L557.312 513.248z\" fill=\"\" ></path></symbol><symbol id=\"icon-menu\" viewBox=\"0 0 1024 1024\"><path d=\"M109.714 292.571h804.572c21.943 0 36.571-21.942 36.571-43.885 0-14.629-14.628-29.257-36.571-29.257H109.714c-21.943 0-36.571 14.628-36.571 36.571 0 14.629 14.628 36.571 36.571 36.571zM914.286 512H109.714c-21.943 0-36.571 14.629-36.571 36.571 0 14.629 14.628 36.572 36.571 36.572h804.572c21.943 0 36.571-21.943 36.571-43.886 0-14.628-14.628-29.257-36.571-29.257z m0 292.571H109.714c-21.943 0-36.571 14.629-36.571 36.572s14.628 36.571 36.571 36.571h804.572c21.943 0 36.571-21.943 36.571-36.571 0-21.943-14.628-36.572-36.571-36.572z\"  ></path></symbol><symbol id=\"icon-right\" viewBox=\"0 0 1024 1024\"><path d=\"M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z\" fill=\"#333333\" ></path></symbol><symbol id=\"icon-left\" viewBox=\"0 0 1024 1024\"><path d=\"M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z\" fill=\"#333333\" ></path></symbol><symbol id=\"icon-side\" viewBox=\"0 0 1024 1024\"><path d=\"M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z\"  ></path></symbol><symbol id=\"icon-B\" viewBox=\"0 0 1024 1024\"><path d=\"M98.067692 65.457231H481.28c75.854769 0 132.411077 3.150769 169.668923 9.452307 37.336615 6.301538 70.656 19.534769 100.036923 39.620924 29.459692 20.007385 53.956923 46.710154 73.570462 80.029538 19.692308 33.398154 29.459692 70.734769 29.459692 112.167385 0 44.898462-12.130462 86.094769-36.233846 123.588923a224.886154 224.886154 0 0 1-98.461539 84.283077c58.368 17.092923 103.266462 46.08 134.695385 87.04 31.350154 40.96 47.025231 89.088 47.025231 144.462769 0 43.638154-10.082462 86.016-30.404923 127.212308-20.243692 41.196308-47.891692 74.043077-83.02277 98.697846-35.052308 24.654769-78.296615 39.778462-129.732923 45.449846-32.295385 3.465846-110.119385 5.671385-233.472 6.537846H98.067692V65.457231z m193.536 159.507692V446.621538h126.818462c75.460923 0 122.328615-1.024 140.603077-3.229538 33.083077-3.938462 59.155692-15.36 78.139077-34.343385 18.904615-18.904615 28.435692-43.874462 28.435692-74.830769 0-29.696-8.192-53.720615-24.497231-72.310154-16.384-18.510769-40.644923-29.696-72.940307-33.634461-19.140923-2.205538-74.279385-3.308308-165.415385-3.308308h-111.064615z m0 381.243077v256.315077h179.2c69.710769 0 113.979077-1.969231 132.726154-5.907692 28.750769-5.198769 52.145231-17.959385 70.262154-38.281847 18.116923-20.243692 27.096615-47.340308 27.096615-81.368615 0-28.750769-6.931692-53.169231-20.873846-73.255385a118.232615 118.232615 0 0 0-60.494769-43.795692c-26.387692-9.137231-83.574154-13.705846-171.638154-13.705846H291.603692z\"  ></path></symbol><symbol id=\"icon-a\" viewBox=\"0 0 1024 1024\"><path d=\"M757.76 665.6q0 20.48 1.536 34.304t7.68 22.016 18.944 12.288 34.304 4.096q-3.072 25.6-15.36 44.032-11.264 16.384-33.28 29.696t-62.976 13.312q-11.264 0-20.48-0.512t-17.408-2.56l-6.144-2.048-1.024 0q-4.096-1.024-10.24-4.096-2.048-2.048-4.096-2.048-1.024-1.024-2.048-1.024-14.336-8.192-23.552-17.408t-14.336-17.408q-6.144-10.24-9.216-20.48-63.488 75.776-178.176 75.776-48.128 0-88.064-15.36t-69.12-44.032-45.056-68.096-15.872-88.576 16.896-89.088 47.616-67.584 74.24-42.496 96.768-14.848q48.128 0 88.576 17.408t66.048 49.152q0-8.192 0.512-16.384t0.512-15.36q0-71.68-39.936-104.448t-128-32.768q-43.008 0-84.992 6.656t-84.992 17.92q14.336-28.672 25.088-47.616t24.064-29.184q30.72-24.576 158.72-24.576 79.872 0 135.168 13.824t90.624 43.52 51.2 75.264 15.872 108.032l0 200.704zM487.424 743.424q50.176 0 79.872-33.28t29.696-95.744q0-61.44-28.672-93.696t-76.8-32.256q-52.224 0-82.944 33.28t-30.72 94.72q0 58.368 31.744 92.672t77.824 34.304z\"  ></path></symbol><symbol id=\"icon-full\" viewBox=\"0 0 1024 1024\"><path d=\"M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z\"  ></path><path d=\"M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z\"  ></path><path d=\"M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z\"  ></path><path d=\"M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z\"  ></path></symbol><symbol id=\"icon-add\" viewBox=\"0 0 1024 1024\"><path d=\"M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z\"  ></path></symbol><symbol id=\"icon-move\" viewBox=\"0 0 1024 1024\"><path d=\"M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z\"  ></path></symbol><symbol id=\"icon-living\" viewBox=\"0 0 1024 1024\"><path d=\"M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z\" fill=\"#666666\" ></path><path d=\"M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z\" fill=\"#666666\" ></path></symbol></svg>',h=(h=document.getElementsByTagName(\"script\"))[h.length-1].getAttribute(\"data-injectcss\");if(h&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write(\"<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>\")}catch(t){console&&console.log(t)}}function d(){o||(o=!0,a())}c=function(){var t,c,l,a;(a=document.createElement(\"div\")).innerHTML=n,n=null,(l=a.getElementsByTagName(\"svg\")[0])&&(l.setAttribute(\"aria-hidden\",\"true\"),l.style.position=\"absolute\",l.style.width=0,l.style.height=0,l.style.overflow=\"hidden\",t=l,(c=document.body).firstChild?(a=t,(l=c.firstChild).parentNode.insertBefore(a,l)):c.appendChild(t))},document.addEventListener?~[\"complete\",\"loaded\",\"interactive\"].indexOf(document.readyState)?setTimeout(c,0):(l=function(){document.removeEventListener(\"DOMContentLoaded\",l,!1),c()},document.addEventListener(\"DOMContentLoaded\",l,!1)):document.attachEvent&&(a=c,e=t.document,o=!1,(i=function(){try{e.documentElement.doScroll(\"left\")}catch(t){return void setTimeout(i,50)}d()})(),e.onreadystatechange=function(){\"complete\"==e.readyState&&(e.onreadystatechange=null,d())})}(window);","import { LEFT, RIGHT, SIDE } from './const'\nimport {\n  isMobile,\n  addParentLink,\n  getObjById,\n  generateUUID,\n  generateNewObj,\n} from './utils/index'\nimport { findEle, createInputDiv, layout, Topic, createChildren, createGroup, createTop, createTopic, shapeTpc } from './utils/dom'\nimport { createLinkSvg, createLine } from './utils/svg'\nimport {\n  selectNode,\n  unselectNode,\n  selectNextSibling,\n  selectPrevSibling,\n  selectFirstChild,\n  selectParent,\n  getAllDataString,\n  getAllData,\n  getAllDataWithAutoHide,\n  getAllDataMd,\n  scale,\n  toCenter,\n  focusNode,\n  cancelFocus,\n  initLeft,\n  initRight,\n  initSide,\n  setLocale,\n  enableEdit,\n  disableEdit,\n  expandNode,\n  refresh,\n} from './interact'\nimport {\n  insertSibling,\n  insertBefore,\n  insertParent,\n  addChild,\n  copyNode,\n  moveNode,\n  removeNode,\n  moveUpNode,\n  moveDownNode,\n  beginEdit,\n  updateNodeStyle,\n  updateNodeTags,\n  updateNodeIcons,\n  updateNodeHyperLink,\n  updateNodeRemark,\n  // updateNodeImage,\n  processPrimaryNode,\n  setNodeTopic,\n  moveNodeBefore,\n  moveNodeAfter,\n} from './nodeOperation'\nimport {\n  createLink,\n  removeLink,\n  selectLink,\n  hideLinkController,\n  showLinkController,\n} from './customLink'\nimport linkDiv from './linkDiv'\nimport initMouseEvent from './mouse'\n\nimport contextMenu from './plugin/contextMenu'\nimport toolBar from './plugin/toolBar'\nimport nodeMenu from './plugin/nodeMenu'\nimport sidebar from './plugin/sidebar'\nimport nodeDraggable from './plugin/nodeDraggable'\nimport keypress from './plugin/keypress'\nimport mobileMenu from './plugin/mobileMenu'\n\nimport Bus from './utils/pubsub'\n\nimport './index.less'\nimport './plugin/contextMenu.less'\nimport './plugin/toolBar.less'\nimport './plugin/nodeMenu.less'\nimport './plugin/sidebar.less'\nimport './plugin/mobileMenu.less'\n\nimport { exportSvg, exportSvgDom } from '../painter/index.foreignObject'\n\nimport './iconfont/iconfont.js'\n\n// TODO show up animation\nconst E = findEle\ntype LinkObj = object\ntype operation = {\n  name: string\n}\nexport interface NodeObj {\n  topic: string,\n  id: string,\n  style?: {\n    fontSize?: string,\n    color?: string,\n    background?: string,\n    fontWeight?: string,\n    width?:string,\n    controllWidth?:string\n  },\n  parent?: NodeObj,\n  children?: NodeObj[],\n  tags?: string[],\n  icons?: string[],\n  hyperLink?: string,\n  remark?:string,\n  image?:{\n    url:string,\n    width:number,\n    height?:number,\n  }[],\n  linkJump?:{\n    toId:string,\n    title:string\n  }[]\n  expanded?: boolean,\n  direction?: number,\n  root?: boolean\n}\n\nexport interface NodeElement extends HTMLElement {\n  nodeObj:Object\n}\nexport interface MindElixirData {\n  nodeData: NodeObj,\n  linkData?: LinkObj,\n  expandDeep?:number|null\n  direction?:number\n}\nexport interface MindElixirInstance {\n  mindElixirBox: HTMLElement,\n  nodeData: NodeObj,\n  linkData: LinkObj,\n  expandDeep:number|null\n  currentNode: Topic | null,\n  currentLink: SVGElement | null,\n  inputDiv: HTMLElement | null,\n  scaleVal: number,\n  tempDirection: number | null,\n  bus: object, // wip\n\n  // wip\n  history: operation[],\n  isUndo: boolean,\n  undo: () => void,\n\n  direction: number,\n  locale: string,\n  draggable: boolean,\n  editable: boolean,\n  contextMenu: boolean,\n  contextMenuOption: object,\n  toolBar: boolean,\n  nodeMenu: boolean,\n  keypress: boolean,\n  before: object,\n  newTopicName: string,\n  allowUndo: boolean,\n  overflowHidden: boolean,\n  primaryLinkStyle: number,\n  primaryNodeHorizontalGap: number,\n  primaryNodeVerticalGap: number,\n  mobileMenu: boolean,\n}\nexport interface Options {\n  el: string,\n  data: MindElixirData,\n  direction?: number,\n  locale?: string,\n  draggable?: boolean,\n  editable?: boolean,\n  contextMenu?: boolean,\n  contextMenuOption?: object,\n  toolBar?: boolean,\n  nodeMenu?: boolean,\n  keypress?: boolean,\n  before?: object,\n  newTopicName?: string,\n  allowUndo?: boolean,\n  overflowHidden?: boolean,\n  primaryLinkStyle?: number,\n  primaryNodeHorizontalGap?: number,\n  primaryNodeVerticalGap?: number,\n  mobileMenu?: boolean,\n}\nconst $d = document\n/**\n * @export MindElixir\n * @example\n * let mind = new MindElixir({\n  el: '#map',\n  direction: 2,\n  data: data,\n  draggable: true,\n  editable: true,\n  contextMenu: true,\n  toolBar: true,\n  nodeMenu: true,\n  keypress: true,\n})\nmind.init()\n *\n */\nfunction MindElixir(this: MindElixirInstance, {\n  el,\n  data,\n  direction,\n  locale,\n  draggable,\n  editable,\n  contextMenu,\n  contextMenuOption,\n  toolBar,\n  nodeMenu,\n  keypress,\n  before,\n  newTopicName,\n  allowUndo,\n  primaryLinkStyle,\n  overflowHidden,\n  primaryNodeHorizontalGap,\n  primaryNodeVerticalGap,\n  mobileMenu,\n}: Options) {\n  const box = document.getElementById(el) as HTMLElement\n  if (!box) return\n  this.mindElixirBox = box\n  this.before = before || {}\n  this.nodeData = data.nodeData\n  this.linkData = data.linkData || {}\n  this.expandDeep=data?.expandDeep\n  this.locale = locale\n  this.contextMenuOption = contextMenuOption\n  this.contextMenu = contextMenu === undefined ? true : contextMenu\n  this.toolBar = toolBar === undefined ? true : toolBar\n  this.nodeMenu = nodeMenu === undefined ? true : nodeMenu\n  this.keypress = keypress === undefined ? true : keypress\n  this.mobileMenu = mobileMenu\n  // record the direction before enter focus mode, must true in focus mode, reset to null after exit focus\n  // todo move direction to data\n  this.direction = data.direction!==undefined?data.direction:(typeof direction === 'number' ? direction : 1)\n  this.draggable = draggable === undefined ? true : draggable\n  this.newTopicName = newTopicName\n  this.editable = editable === undefined ? true : editable\n  this.allowUndo = allowUndo === undefined ? true : allowUndo\n  // this.parentMap = {} // deal with large amount of nodes\n  this.currentNode = null // the selected <tpc/> element\n  this.currentLink = null // the selected link svg element\n  this.inputDiv = null // editor\n  this.scaleVal = 1\n  this.tempDirection = null\n  this.primaryLinkStyle = primaryLinkStyle || 0\n  this.overflowHidden = overflowHidden\n  this.primaryNodeHorizontalGap = primaryNodeHorizontalGap\n  this.primaryNodeVerticalGap = primaryNodeVerticalGap\n\n  this.bus = new Bus()\n  ;(this.bus as any).addListener('operation', (operation: operation) => {\n    if (this.isUndo) {\n      this.isUndo = false\n      return\n    }\n    if (['moveNode', 'removeNode', 'addChild', 'finishEdit', 'editStyle', 'editTags', 'editIcons'].includes(\n      operation.name\n    )) {\n      this.history.push(operation)\n      // console.log(operation, this.history)\n    }\n  })\n\n  this.history = [] // TODO\n  this.isUndo = false\n  this.undo = function() {\n    const operation = this.history.pop()\n    if (!operation) return\n    this.isUndo = true\n    if (operation.name === 'moveNode') {\n      this.moveNode(\n        E(operation.obj.fromObj.id),\n        E(operation.obj.originParentId)\n      )\n    } else if (operation.name === 'removeNode') {\n      if (operation.originSiblingId) {\n        this.insertBefore(E(operation.originSiblingId), operation.obj)\n      } else {\n        this.addChild(E(operation.originParentId), operation.obj)\n      }\n    } else if (operation.name === 'addChild' || operation.name === 'copyNode') {\n      this.removeNode(E(operation.obj.id))\n    } else if (operation.name === 'finishEdit') {\n      this.setNodeTopic(E(operation.obj.id), operation.origin)\n    } else {\n      this.isUndo = false\n    }\n  }\n}\n\nfunction beforeHook(fn:(el:any, node?:any)=>void) {\n  return async function(...args:unknown[]) {\n    if (\n      !this.before[fn.name] ||\n      (await this.before[fn.name].apply(this, args))\n    ) {\n      fn.apply(this, args)\n    }\n  }\n}\n\nMindElixir.prototype = {\n  addParentLink,\n  getObjById,\n  generateNewObj,\n  // node operation\n  insertSibling: beforeHook(insertSibling),\n  insertBefore: beforeHook(insertBefore),\n  insertParent: beforeHook(insertParent),\n  addChild: beforeHook(addChild),\n  copyNode: beforeHook(copyNode),\n  moveNode: beforeHook(moveNode),\n  removeNode: beforeHook(removeNode),\n  moveUpNode: beforeHook(moveUpNode),\n  moveDownNode: beforeHook(moveDownNode),\n  beginEdit: beforeHook(beginEdit),\n  moveNodeBefore: beforeHook(moveNodeBefore),\n  moveNodeAfter: beforeHook(moveNodeAfter),\n  updateNodeStyle,\n  updateNodeTags,\n  updateNodeIcons,\n  updateNodeHyperLink,\n  updateNodeRemark,\n  // updateNodeImage,\n  processPrimaryNode,\n  setNodeTopic,\n\n  createLink,\n  removeLink,\n  selectLink,\n  hideLinkController,\n  showLinkController,\n\n  layout,\n  linkDiv,\n  createInputDiv,\n  shapeTpc,\n  createChildren, createGroup, createTop, createTopic,\n\n  selectNode,\n  unselectNode,\n  selectNextSibling,\n  selectPrevSibling,\n  selectFirstChild,\n  selectParent,\n  getAllDataString,\n  getAllData,\n  getAllDataWithAutoHide,\n  getAllDataMd,\n  scale,\n  toCenter,\n  focusNode,\n  cancelFocus,\n  initLeft,\n  initRight,\n  initSide,\n  setLocale,\n  enableEdit,\n  disableEdit,\n  expandNode,\n  refresh,\n  exportSvg,\n  exportSvgDom,\n  init: function() {\n    /**\n     * @function\n     * @global\n     * @name E\n     * @param {string} id Node id.\n     * @return {TargetElement} Target element.\n     * @example\n     * E('bd4313fbac40284b')\n     */\n    addParentLink(this.nodeData)\n    console.log('ME_version ' + MindElixir.version)\n    console.log(this)\n    if(this.mindElixirBox.className.indexOf('mind-elixir')===-1)\n      this.mindElixirBox.className += ' mind-elixir'\n    this.mindElixirBox.innerHTML = ''\n\n    this.container = $d.createElement('div') // map container\n    this.container.className = 'map-container'\n\n    if (this.overflowHidden) this.container.style.overflow = 'hidden'\n\n    this.map = $d.createElement('div') // map-canvas Element\n    this.map.className = 'map-canvas'\n    this.map.setAttribute('tabindex', '0')\n    this.container.appendChild(this.map)\n    this.mindElixirBox.appendChild(this.container)\n    this.root = $d.createElement('root')\n\n    this.box = $d.createElement('children')\n    this.box.className = 'mindbox'\n\n    // infrastructure\n\n    this.svg2nd = createLinkSvg('svg2nd') // main link container\n\n    this.linkController = createLinkSvg('linkcontroller') // bezier controller container\n    this.P2 = $d.createElement('div') // bezier P2\n    this.P3 = $d.createElement('div') // bezier P3\n    this.P2.className = this.P3.className = 'circle'\n    this.line1 = createLine(0, 0, 0, 0) // bezier auxiliary line1\n    this.line2 = createLine(0, 0, 0, 0) // bezier auxiliary line2\n    this.linkController.appendChild(this.line1)\n    this.linkController.appendChild(this.line2)\n\n    this.linkSvgGroup = createLinkSvg('topiclinks') // storage user custom link svg\n\n    this.map.appendChild(this.root)\n    this.map.appendChild(this.box)\n    this.map.appendChild(this.svg2nd)\n    this.map.appendChild(this.linkController)\n    this.map.appendChild(this.linkSvgGroup)\n    this.map.appendChild(this.P2)\n    this.map.appendChild(this.P3)\n\n    // plugin\n    this.toolBar && toolBar(this)\n    this.nodeMenu && nodeMenu(this)\n    this.keypress && keypress(this)\n    sidebar(this)\n    if (isMobile() && this.mobileMenu) {\n      mobileMenu(this)\n    } else {\n      this.contextMenu && contextMenu(this, this.contextMenuOption)\n    }\n    this.draggable && nodeDraggable(this)\n\n    \n    this.layout()\n    this.linkDiv()\n    this.toCenter()\n    if (!this.overflowHidden) initMouseEvent(this)\n  },\n}\n\nMindElixir.LEFT = LEFT\nMindElixir.RIGHT = RIGHT\nMindElixir.SIDE = SIDE\n/**\n * @memberof MindElixir\n * @static\n */\nMindElixir.version = '0.17.0'\nMindElixir.E = findEle\n\n/**\n * @function new\n * @memberof MindElixir\n * @static\n * @param {String} topic root topic\n */\nMindElixir.new = (topic: string): MindElixirData => ({\n  nodeData: {\n    id: generateUUID(),\n    topic: topic || 'new topic',\n    root: true,\n    style: {\n      color: \"#ffffff\",\n      background: \"#00aaff\"\n    },\n    children: [],\n  },\n  linkData: {},\n})\n\nexport default MindElixir\n\n// export {exportSvg,exportPng} something wrong comes with the rollup"],"names":["$d","E","toolBar","nodeMenu","sidebar","mobileMenu","contextMenu"],"mappings":"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"}