{"version":3,"file":"mind.umd.js","sources":["../src/utils/index.ts","../src/utils/dom.ts","../src/utils/svg.ts","../painter/index.foreignObject.js","../src/interact.ts","../src/nodeOperation.ts","../src/customLink.ts","../src/linkDiv.ts","../src/mouse.ts","../src/i18n.ts","../src/plugin/contextMenu.ts","../src/plugin/sidebar.ts","../src/plugin/toolBar.ts","../src/plugin/nodeMenu.ts","../src/plugin/nodeDraggable.ts","../src/plugin/keypress.ts","../src/plugin/mobileMenu.ts","../src/utils/pubsub.ts","../src/iconfont/iconfont.js","../src/index.ts"],"sourcesContent":["import { NodeObj } from '../index'\n\nexport function encodeHTML(s) {\n  return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;')\n}\n\nexport const isMobile = (): boolean =>\n  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n    navigator.userAgent\n  )\n\nexport const rgbHex = (rgb) => {\n  return rgb.replace(\n    /\\brgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/g,\n    function($0, $1, $2, $3) {\n      return '#' + ('0' + Number($1).toString(16)).substr(-2) + ('0' + Number($2).toString(16)).substr(-2) + ('0' + Number($3).toString(16)).substr(-2)\n    })\n}\n\nexport const getObjById = function(id: string, data: NodeObj) {\n  data = data || this.nodeData\n  if (data.id === id) {\n    return data\n  } else if (data.children && data.children.length) {\n    for (let i = 0; i < data.children.length; i++) {\n      const res = getObjById(id, data.children[i])\n      if (res) return res\n    }\n  } else {\n    return null\n  }\n}\n\nexport const addParentLink = (data: NodeObj, parent?: NodeObj) => {\n  data.parent = parent\n  if (data.children) {\n    for (let i = 0; i < data.children.length; i++) {\n      addParentLink(data.children[i], data)\n    }\n  }\n}\n\nexport function refreshIds(data: NodeObj) {\n  data.id = generateUUID()\n  if (data.children) {\n    for (let i = 0; i < data.children.length; i++) {\n      refreshIds(data.children[i])\n    }\n  }\n}\n\nexport const throttle = (fn: (any) => void, wait: number) => {\n  var pre = Date.now()\n  return function() {\n    var context = this\n    var args = arguments\n    var now = Date.now()\n    if (now - pre >= wait) {\n      fn.apply(context, args)\n      pre = Date.now()\n    }\n  }\n}\n\nexport function getArrowPoints(p3x: number, p3y: number, p4x: number, p4y: number) {\n  const deltay = p4y - p3y\n  const deltax = p3x - p4x\n  let angle = (Math.atan(Math.abs(deltay) / Math.abs(deltax)) / 3.14) * 180\n  if (deltax < 0 && deltay > 0) {\n    angle = 180 - angle\n  }\n  if (deltax < 0 && deltay < 0) {\n    angle = 180 + angle\n  }\n  if (deltax > 0 && deltay < 0) {\n    angle = 360 - angle\n  }\n  const arrowLength = 20\n  const arrowAngle = 30\n  var a1 = angle + arrowAngle\n  const a2 = angle - arrowAngle\n  return {\n    x1: p4x + Math.cos((Math.PI * a1) / 180) * arrowLength,\n    y1: p4y - Math.sin((Math.PI * a1) / 180) * arrowLength,\n    x2: p4x + Math.cos((Math.PI * a2) / 180) * arrowLength,\n    y2: p4y - Math.sin((Math.PI * a2) / 180) * arrowLength,\n  }\n}\n\nexport function calcP1(fromData, p2x, p2y) {\n  let x, y\n  const k = (fromData.cy - p2y) / (p2x - fromData.cx)\n  if (k > fromData.h / fromData.w || k < -fromData.h / fromData.w) {\n    if (fromData.cy - p2y < 0) {\n      x = fromData.cx - fromData.h / 2 / k\n      y = fromData.cy + fromData.h / 2\n    } else {\n      x = fromData.cx + fromData.h / 2 / k\n      y = fromData.cy - fromData.h / 2\n    }\n  } else {\n    // console.log('斜率', k)\n    // console.log('fromData.cx-x', fromData.cx - p2x)\n    if (fromData.cx - p2x < 0) {\n      x = fromData.cx + fromData.w / 2\n      y = fromData.cy - (fromData.w * k) / 2\n    } else {\n      x = fromData.cx - fromData.w / 2\n      y = fromData.cy + (fromData.w * k) / 2\n    }\n  }\n  return {\n    x,\n    y,\n  }\n}\n\nexport function calcP4(toData, p3x, p3y) {\n  let x, y\n  const k = (toData.cy - p3y) / (p3x - toData.cx)\n  if (k > toData.h / toData.w || k < -toData.h / toData.w) {\n    if (toData.cy - p3y < 0) {\n      x = toData.cx - toData.h / 2 / k\n      y = toData.cy + toData.h / 2\n    } else {\n      x = toData.cx + toData.h / 2 / k\n      y = toData.cy - toData.h / 2\n    }\n  } else {\n    // console.log('斜率', k)\n    // console.log('toData.cx-x', toData.cx - p3x)\n    if (toData.cx - p3x < 0) {\n      x = toData.cx + toData.w / 2\n      y = toData.cy - (toData.w * k) / 2\n    } else {\n      x = toData.cx - toData.w / 2\n      y = toData.cy + (toData.w * k) / 2\n    }\n  }\n  return {\n    x,\n    y,\n  }\n}\n\nexport function generateUUID(): string {\n  return (\n    new Date().getTime().toString(16) + Math.random().toString(16).substr(2)\n  ).substr(2, 16)\n}\n\nexport function generateNewObj(): NodeObj {\n  const id = generateUUID()\n  return {\n    topic: this.newTopicName || 'new node',\n    id,\n  }\n}\n\nexport function generateNewSummaryObj(): NodeObj {\n  const id = generateUUID()\n  return {\n    topic: this.newTopicName || 'new node',\n    id,\n    type:'summary'\n  }\n}\n\nexport function generateNewLink(from, to) {\n  const id = generateUUID()\n  return {\n    id,\n    name: '',\n    from,\n    to,\n    delta1: { x: 0, y: -100 },\n    delta2: { x: 0, y: -100 },\n  }\n}\n\nexport function checkMoveValid(from: NodeObj, to: NodeObj) {\n  let valid = true\n  while (to.parent) {\n    if (to.parent === from) {\n      valid = false\n      break\n    }\n    to = to.parent\n  }\n  return valid\n}\n\nexport function getObjSibling(obj: NodeObj): NodeObj {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  if (index + 1 >= childrenList.length) {\n    // 最后一个\n    return null\n  } else {\n    return childrenList[index + 1]\n  }\n}\n\nexport function moveUpObj(obj: NodeObj) {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  const t = childrenList[index]\n  if (index === 0) {\n    childrenList[index] = childrenList[childrenList.length - 1]\n    childrenList[childrenList.length - 1] = t\n  } else {\n    childrenList[index] = childrenList[index - 1]\n    childrenList[index - 1] = t\n  }\n}\n\nexport function moveDownObj(obj: NodeObj) {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  const t = childrenList[index]\n  if (index === childrenList.length - 1) {\n    childrenList[index] = childrenList[0]\n    childrenList[0] = t\n  } else {\n    childrenList[index] = childrenList[index + 1]\n    childrenList[index + 1] = t\n  }\n}\n\nexport function removeNodeObj(obj: NodeObj) {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  childrenList.splice(index, 1)\n  return childrenList.length\n}\n\nexport function insertNodeObj(obj: NodeObj, newObj: NodeObj) {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  childrenList.splice(index + 1, 0, newObj)\n}\n\nexport function insertBeforeNodeObj(obj: NodeObj, newObj: NodeObj) {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  childrenList.splice(index, 0, newObj)\n}\n\nexport function insertParentNodeObj(obj: NodeObj, newObj: NodeObj) {\n  const childrenList = obj.parent.children\n  const index = childrenList.indexOf(obj)\n  childrenList[index] = newObj\n  newObj.children = [obj]\n}\n\nexport function moveNodeObj(from: NodeObj, to: NodeObj) {\n  removeNodeObj(from)\n  if (to.children) to.children.push(from)\n  else to.children = [from]\n}\n\nexport function moveNodeBeforeObj(from: NodeObj, to: NodeObj) {\n  removeNodeObj(from)\n  const childrenList = to.parent.children\n  let toIndex = 0\n  for (let i = 0; i < childrenList.length; i++) {\n    if (childrenList[i] === to) {\n      toIndex = i\n      break\n    }\n  }\n  childrenList.splice(toIndex, 0, from)\n}\n\nexport function moveNodeAfterObj(from: NodeObj, to: NodeObj) {\n  removeNodeObj(from)\n  const childrenList = to.parent.children\n  let toIndex = 0\n  for (let i = 0; i < childrenList.length; i++) {\n    if (childrenList[i] === to) {\n      toIndex = i\n      break\n    }\n  }\n  childrenList.splice(toIndex + 1, 0, from)\n}\n\nexport const dragMoveHelper = {\n  afterMoving: false, // 区别click事件\n  mousedown: false,\n  lastX: null,\n  lastY: null,\n  onMove(e, container) {\n    if (this.mousedown) {\n      this.afterMoving = true\n      if (!this.lastX) {\n        this.lastX = e.pageX\n        this.lastY = e.pageY\n        return\n      }\n      const deltaX = this.lastX - e.pageX\n      const deltaY = this.lastY - e.pageY\n      container.scrollTo(\n        container.scrollLeft + deltaX,\n        container.scrollTop + deltaY\n      )\n      this.lastX = e.pageX\n      this.lastY = e.pageY\n    }\n  },\n  clear() {\n    this.afterMoving = false\n    this.mousedown = false\n    this.lastX = null\n    this.lastY = null\n  },\n}\n\nexport function LinkDragMoveHelper(dom) {\n  this.dom = dom\n  this.mousedown = false\n  this.lastX = null\n  this.lastY = null\n}\n\nLinkDragMoveHelper.prototype.init = function(map, cb) {\n  this.handleMouseMove = e => {\n    e.stopPropagation()\n    if (this.mousedown) {\n      if (!this.lastX) {\n        this.lastX = e.pageX\n        this.lastY = e.pageY\n        return\n      }\n      const deltaX = this.lastX - e.pageX\n      const deltaY = this.lastY - e.pageY\n      cb(deltaX, deltaY)\n      this.lastX = e.pageX\n      this.lastY = e.pageY\n    }\n  }\n  this.handleMouseDown = e => {\n    e.stopPropagation()\n    this.mousedown = true\n  }\n  this.handleClear = e => {\n    e.stopPropagation()\n    this.clear()\n  }\n  map.addEventListener('mousemove', this.handleMouseMove)\n  map.addEventListener('mouseleave', this.handleClear)\n  map.addEventListener('mouseup', this.handleClear)\n  this.dom.addEventListener('mousedown', this.handleMouseDown)\n}\n\nLinkDragMoveHelper.prototype.destory = function(map) {\n  map.removeEventListener('mousemove', this.handleMouseMove)\n  map.removeEventListener('mouseleave', this.handleClear)\n  map.removeEventListener('mouseup', this.handleClear)\n  this.dom.removeEventListener('mousedown', this.handleMouseDown)\n}\n\nLinkDragMoveHelper.prototype.clear = function() {\n  this.mousedown = false\n  this.lastX = null\n  this.lastY = null\n}\n","import { LEFT, RIGHT, SIDE } from '../const'\nimport MindElixir, { NodeObj } from '../index'\nimport { expandNodeChild, getHeightFromRootToAnotherNode, getWidthFromRootToAnotherNode } from '../interact'\nimport { encodeHTML } from '../utils/index'\nexport type Top = HTMLElement\nexport type Group = HTMLElement\n\nexport interface Topic extends HTMLElement {\n  nodeObj?: NodeObj\n}\n\nexport interface Expander extends HTMLElement {\n  expanded?: boolean\n}\n\n// DOM manipulation\nconst $d = document\nexport const findEle = (id: string, instance?) => {\n  const scope = instance ? instance.mindElixirBox : $d\n  return scope.querySelector(`[data-nodeid=me${id}]`)\n}\n\nfunction resizeNode(widthControll:HTMLElement,tpc:Topic,anotherWidthControll:HTMLElement){\n  widthControll.onpointerdown=eDown=>{\n    if(!tpc.classList.contains('selected')) return\n    const startX=eDown.clientX\n    const width=tpc.clientWidth-Number(getComputedStyle(tpc).paddingLeft.replace('px',''))-Number(getComputedStyle(tpc).paddingRight.replace('px',''))\n    widthControll.onpointermove=eMove=>{\n      const endX=eMove.clientX\n      tpc.style.width=(width+endX-startX).toString()+'px'\n      widthControll.style.height=anotherWidthControll.style.height=tpc.clientHeight.toString()+'px'\n      //保存样式\n      if(!tpc.nodeObj.style) tpc.nodeObj.style={}\n      tpc.nodeObj.style.width=tpc.style.width\n      //设置宽度控制条的高度\n      tpc.nodeObj.style.controllWidth=widthControll.style.height\n      //更新图片的宽度和高度 \n      eMove.preventDefault()\n    }\n    widthControll.setPointerCapture(eDown.pointerId)\n    eDown.preventDefault()\n  }\n  widthControll.onpointerup=eUp=>{\n    widthControll.onpointermove=null\n    widthControll.releasePointerCapture(eUp.pointerId)\n    this?.linkDiv?.()\n  }\n}\nexport const shapeTpc = function(tpc: Topic, nodeObj: NodeObj) {\n  \n  const widthControllRight=$d.createElement('widthControllRight')\n  const widthControllLeft=$d.createElement('widthControllLeft')\n\n  tpc.textContent = nodeObj.topic\n  //放在textContent之后，因为会清除子节点\n  if(this?.widthControll){\n    resizeNode.call(this,widthControllLeft,tpc,widthControllRight)\n    resizeNode.call(this,widthControllRight,tpc,widthControllLeft)\n    tpc.appendChild(widthControllRight)\n    tpc.appendChild(widthControllLeft)\n  }\n  \n  if (nodeObj.style) {\n    tpc.style.color = nodeObj.style.color || '#2c3e50'\n    tpc.style.background = nodeObj.style.background?nodeObj.style.background:nodeObj?.parent?.root?'#ffffff':'inherit'\n    tpc.style.fontSize = nodeObj.style.fontSize + 'px'\n    tpc.style.fontWeight = nodeObj.style.fontWeight || 'normal'\n    tpc.style.width= nodeObj.style.width || 'fit-content'\n    widthControllLeft.style.height=widthControllRight.style.height=nodeObj.style.controllWidth || '29px'\n  }\n\n  // TODO allow to add online image\n  if (nodeObj.image) {\n    const images=nodeObj.image\n    images.forEach(val=>{\n      const imgContainer = $d.createElement('img')\n      imgContainer.className='image'\n      imgContainer.src = val.url\n      imgContainer.style.width = val.width + 'px'\n      imgContainer.style.height = val.height + 'px'\n      imgContainer.style.display = 'block'\n      tpc.appendChild(imgContainer)\n    })\n  }\n  \n  if (nodeObj.hyperLink) {\n    const linkContainer =$d.createElement('a')\n    linkContainer.className = 'hyper-link'\n    linkContainer.target = '_blank'\n    // linkContainer.innerText = '🔗'\n    linkContainer.innerHTML='<svg t=\"1662346495524\" style=\"font-size:20px;margin-left: 3px\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2372\" width=\"22\" height=\"22\"><path d=\"M573.44 640a187.68 187.68 0 0 1-132.8-55.36L416 560l45.28-45.28 24.64 24.64a124.32 124.32 0 0 0 170.08 5.76l1.44-1.28a49.44 49.44 0 0 0 4-3.84l101.28-101.28a124.16 124.16 0 0 0 0-176l-1.92-1.92a124.16 124.16 0 0 0-176 0l-51.68 51.68a49.44 49.44 0 0 0-3.84 4l-20 24.96-49.92-40L480 276.32a108.16 108.16 0 0 1 8.64-9.28l51.68-51.68a188.16 188.16 0 0 1 266.72 0l1.92 1.92a188.16 188.16 0 0 1 0 266.72l-101.28 101.28a112 112 0 0 1-8.48 7.84 190.24 190.24 0 0 1-125.28 48z\" fill=\"#002fa7\" p-id=\"2373\"></path><path d=\"M350.72 864a187.36 187.36 0 0 1-133.28-55.36l-1.92-1.92a188.16 188.16 0 0 1 0-266.72l101.28-101.28a112 112 0 0 1 8.48-7.84 188.32 188.32 0 0 1 258.08 7.84L608 464l-45.28 45.28-24.64-24.64A124.32 124.32 0 0 0 368 478.88l-1.44 1.28a49.44 49.44 0 0 0-4 3.84l-101.28 101.28a124.16 124.16 0 0 0 0 176l1.92 1.92a124.16 124.16 0 0 0 176 0l51.68-51.68a49.44 49.44 0 0 0 3.84-4l20-24.96 50.08 40-20.8 25.12a108.16 108.16 0 0 1-8.64 9.28l-51.68 51.68A187.36 187.36 0 0 1 350.72 864z\" fill=\"#002fa7\" p-id=\"2374\"></path></svg>'\n    linkContainer.href = nodeObj.hyperLink\n    tpc.appendChild(linkContainer)\n  }\n  if (nodeObj.remark) {\n    const content=$d.createElement('div')\n    content.className='content hidden'\n    content.textContent=nodeObj.remark\n    const remarkContainer = $d.createElement('div')\n    remarkContainer.className = 'remark'\n    remarkContainer.innerHTML = `<svg t=\"1659682144612\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2580\" width=\"200\" height=\"200\"><path d=\"M625.728 57.472c19.264 0 34.688 6.848 48.128 20.16l208.96 207.04c14.272 13.12 21.568 29.568 21.568 49.28v504.576c0 71.808-56.256 127.744-128.576 127.744H252.16c-72.128 0-128.576-55.68-128.576-127.744V184.704c0-71.68 56.256-127.232 128.576-127.232z m-34.304 76.8H252.16c-30.144 0-51.776 21.376-51.776 50.432v653.824c0 29.44 21.888 50.944 51.776 50.944h523.648c30.016 0 51.84-21.632 51.84-50.944l-0.128-464.512H687.488A96 96 0 0 1 591.936 287.36l-0.448-9.216V134.208zM665.6 704a38.4 38.4 0 0 1 0 76.8H294.4a38.4 38.4 0 0 1 0-76.8h371.2z m0-192a38.4 38.4 0 0 1 0 76.8H294.4a38.4 38.4 0 0 1 0-76.8h371.2z m-192-192a38.4 38.4 0 1 1 0 76.8H294.4a38.4 38.4 0 1 1 0-76.8h179.2z m181.824-152.512v110.592a32 32 0 0 0 26.24 31.488l5.76 0.512h111.872L655.424 167.424z\" p-id=\"2581\"></path></svg>`\n    let delayTask\n    // 鼠标移入内容\n    content.onmouseover=()=>{\n      clearTimeout(delayTask)\n    }\n    //鼠标移入按钮\n    remarkContainer.onmouseover=()=>{\n      content.classList.remove('hidden')\n    }\n    //鼠标移出内容\n    content.onmouseleave=()=>{\n      delayTask=setTimeout(()=>{\n        if(!content.classList.contains('hidden')){\n          content.classList.add('hidden')\n        }\n      },300)\n    }\n    //鼠标移出按钮\n    remarkContainer.onmouseleave=()=>{\n      delayTask=setTimeout(()=>{\n        if(!content.classList.contains('hidden')){\n          content.classList.add('hidden')\n        }\n      },300)\n    }\n    remarkContainer.appendChild(content)\n    tpc.appendChild(remarkContainer)\n  }\n  if (nodeObj.icons) {\n    const iconsContainer = $d.createElement('span')\n    iconsContainer.className = 'icons'\n    iconsContainer.innerHTML = nodeObj.icons\n    .filter(icon=> icon!=='').map(icon => `<span>${encodeHTML(icon)}</span>`)\n      .join('')\n    tpc.appendChild(iconsContainer)\n  }\n  if (nodeObj.tags) {\n    const tagsContainer = $d.createElement('div')\n    tagsContainer.className = 'tags'\n    tagsContainer.innerHTML = nodeObj.tags\n      .filter(tag=> tag!=='').map(tag => `<span>${encodeHTML(tag)}</span>`)\n      .join('')\n    tpc.appendChild(tagsContainer)\n  }\n  if (nodeObj.linkJump) {\n    nodeObj.linkJump.forEach(val => {\n      const button = document.createElement('a')\n      button.className=\"linkJump\"\n      button.title=val.title\n      button.innerHTML='<svg t=\"1661493526135\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2220\" width=\"16\" height=\"16\"><path d=\"M1001.175714 593.762001L700.806246 293.324796a76.091491 76.091491 0 0 0-107.566725 0 76.023754 76.023754 0 0 0 0 107.544146l171.713884 171.826779H152.653982v-115.288769a76.046333 76.046333 0 0 0-152.115245 0v152.092666c0 6.931777 2.145012 13.253918 3.951338 19.621218-1.806326 6.389879-3.951339 12.644283-3.951338 19.621218a76.068912 76.068912 0 0 0 76.046333 76.068912h686.020111L593.239521 894.131468a76.046333 76.046333 0 1 0 107.566725 107.566726L1001.175714 701.328726a76.091491 76.091491 0 0 0 0-107.566725z\" fill=\"#1296db\" p-id=\"2221\"></path></svg>'\n      button.onclick=()=>{  \n        moveToNode.call(this,val.toId)\n      }\n      tpc.appendChild(button)\n    });\n  }\n}\n\nexport function moveToNode(id:string){\n  let toNode=this.container.querySelector(`tpc[data-nodeid=me${id}]`)\n  if(!toNode){\n    findUnExpandedParent(this.nodeData,id)\n    this.layout()\n    this.linkDiv()\n    toNode=this.container.querySelector(`tpc[data-nodeid=me${id}]`)\n  }\n  // this.container.scrollTo(\n  //   10000 - this.container.offsetWidth / 2 + getWidthFromRootToAnotherNode(this.container,toNode),\n  //   10000 - this.container.offsetHeight / 2 - getHeightFromRootToAnotherNode(this.container,toNode)\n  // )\n  toNode.scrollIntoView({block:'center',behavior:'smooth'})\n  toNode.className='blink'\n  setTimeout(() => {\n    toNode.classList.remove('blink')\n  }, 3000);\n}\n\nfunction findUnExpandedParent(node,toId){\n  if(node.id===toId){\n    return true\n  }\n  let flag=false\n  for(const val of (node.children||[])){\n    if(findUnExpandedParent(val,toId)) flag=true\n  }\n  if(flag) node.expanded=true\n  return flag\n}\n\nexport const createGroup = function(nodeObj: NodeObj, omitChildren?: boolean) {\n  const grp: Group = $d.createElement('GRP')\n  const top: Top = this.createTop(nodeObj)\n  grp.appendChild(top)\n  if (!omitChildren && nodeObj.children && nodeObj.children.length > 0) {\n    top.appendChild(createExpander(nodeObj.expanded))\n    if (nodeObj.expanded !== false) {\n      const children = this.createChildren(nodeObj.children)\n      grp.appendChild(children)\n    }\n  }\n  return { grp, top }\n}\n\nexport const createSummary = function(nodeObj: NodeObj, omitChildren?: boolean) {\n  const smy:HTMLElement = $d.createElement('SMY')\n  const top: Top = this.createTop(nodeObj)\n  smy.appendChild(top)\n  if (!omitChildren && nodeObj.children && nodeObj.children.length > 0) {\n    top.appendChild(createExpander(nodeObj.expanded))\n    if (nodeObj.expanded !== false) {\n      const children = this.createChildren(nodeObj.children)\n      smy.appendChild(children)\n    }\n  }\n  return { smy, top }\n}\n\nexport const createTop = function(nodeObj: NodeObj): Top {\n  const top = $d.createElement('t')\n  const tpc = this.createTopic(nodeObj)\n  shapeTpc.call(this,tpc, nodeObj)\n  top.appendChild(tpc)\n  return top\n}\n\nexport const createTopic = function(nodeObj: NodeObj): Topic {\n  const topic: Topic = $d.createElement('tpc')\n  topic.nodeObj = nodeObj\n  topic.dataset.nodeid = 'me' + nodeObj.id\n  topic.draggable = this.draggable\n  return topic\n}\n\nexport function selectText(div: HTMLElement) {\n  const range = $d.createRange()\n  range.selectNodeContents(div)\n  const getSelection = window.getSelection()\n  if (getSelection) {\n    getSelection.removeAllRanges()\n    getSelection.addRange(range)\n  }\n}\n\n\nexport function createInputDiv(tpc: Topic) {\n  console.time('createInputDiv')\n  if (!tpc) return\n  let div = $d.createElement('div')\n  const origin = tpc.childNodes[0].textContent as string\n  tpc.appendChild(div)\n  div.id = 'input-box'\n  // div.innerHTML=origin.replace(/<div(([\\s\\S])*?)<\\/div>/, '').replace('🔗','')\n  div.contentEditable = 'true'\n  div.spellcheck = false\n  div.textContent = origin\n  if(tpc.nodeObj.image){\n    const images=tpc.nodeObj.image\n    images.forEach(val=>{\n      const imgContainer = $d.createElement('img')\n      imgContainer.src = val.url\n      imgContainer.style.width = val.width + 'px'\n      imgContainer.style.display = 'block'\n      div.appendChild(imgContainer)\n    })\n  }\n  div.style.cssText = `min-width:${tpc.offsetWidth - 22}px;min-height:${tpc.clientHeight-16}px`\n  if(tpc.nodeObj?.style?.width){\n    div.style.width='auto'\n  }\n  if(tpc.nodeObj?.style?.color==='#ffffff'||(tpc.nodeObj?.id==='root'&&!tpc.nodeObj?.style?.color)){\n    div.style.color='#2c3e50'\n  }\n  if (this.direction === LEFT) div.style.right = '0'\n  div.focus()\n  selectText(div)\n  this.inputDiv = div\n\n  this.bus.fire('operation', {\n    name: 'beginEdit',\n    obj: tpc.nodeObj,\n  })\n\n  div.addEventListener('keydown', e => {\n    e.stopPropagation()\n    const key = e.key\n    // console.log(e, key)\n    if (key === 'Enter' || key === 'Tab') {\n      // keep wrap for shift enter\n      if (e.shiftKey) return\n\n      e.preventDefault()\n      this.inputDiv.blur()\n      this.map.focus()\n    }\n  })\n  div.addEventListener('blur', () => {\n    if (!div) return // 防止重复blur\n    const node = tpc.nodeObj\n    const topic = div.textContent!.trim()\n    //添加图片支持\n    //去除节点缩放鼠标移动的监听\n    node.image=[]\n    div.childNodes.forEach((val)=>{\n      if(val.nodeName==='IMG'){\n          // console.log('宽度  ',div.clientWidth)\n          node.image.push({\n            url:(val as HTMLImageElement).src,\n            width:(val as HTMLImageElement).width,\n            height:(val as HTMLImageElement).height,\n          })\n      }\n    })\n    if (topic === '' && node.image.length===0) node.topic = origin\n    else node.topic = topic\n    div.remove()\n    this.inputDiv = div = null\n    // TODO 优化\n    if (topic === origin && node.image.length===0) return // 没有修改不做处理\n    tpc.childNodes[0].textContent = node.topic\n    //更新宽度控制条的高度\n    const widthControllLeft=tpc.querySelector('widthControllRight') as HTMLElement\n    const widthControllRight=tpc.querySelector('widthControllRight') as HTMLElement\n    if(!node.style) node.style={}\n    node.style.controllWidth=widthControllLeft.style.height=widthControllRight.style.height=tpc.clientHeight.toString()+'px'\n    //记录节点宽度\n    // node.style.width=tpc.clientWidth-Number(getComputedStyle(tpc).paddingLeft.replace('px',''))-Number(getComputedStyle(tpc).paddingRight.replace('px',''))+1+'px'\n    delete node.style.width\n\n    this.shapeTpc(tpc,node)\n    this.linkDiv()\n    //时间分片，待优化\n    updateLinkJumpTitle.call(this,this.nodeData,node.id,node.topic)\n    this.bus.fire('operation', {\n      name: 'finishEdit',\n      obj: node,\n      origin,\n    })\n  })\n  console.timeEnd('createInputDiv')\n}\n\n\nfunction updateLinkJumpTitle(node:NodeObj,id,topic){\n  node?.linkJump?.forEach(({toId},index)=>{\n    if(toId===id){\n      node.linkJump[index].title=topic\n      const button=this.container.querySelector(`tpc[data-nodeid=me${node.id}] .linkJump`)\n      button.title=topic\n    }\n  })\n  for(const val of (node.children||[])){\n    updateLinkJumpTitle.call(this,val,id,topic)\n  }\n}\n\nexport const createExpander = function(expanded: boolean | undefined): Expander {\n  const expander: Expander = $d.createElement('epd')\n  // 包含未定义 expanded 的情况，未定义视为展开\n  expander.innerText = expanded !== false ? '-' : '+'\n  expander.expanded = expanded !== false\n  expander.className = expanded !== false ? 'minus' : ''\n  return expander\n}\n\n/**\n * traversal data and generate dom structure of mind map\n * @ignore\n * @param {object} data node data object\n * @param {object} container node container(mostly primary node)\n * @param {number} direction primary node direction\n * @return {ChildrenElement} children element.\n */\nexport function createChildren(data: NodeObj[], container?: HTMLElement, direction?) {\n  let chldr: HTMLElement\n  if (container) {\n    chldr = container\n  } else {\n    chldr = $d.createElement('children')\n  }\n  for (let i = 0; i < data.length; i++) {\n    const nodeObj = data[i]\n    const grp = $d.createElement('GRP')\n    if (direction === LEFT) {\n      grp.className = 'lhs'\n    } else if (direction === RIGHT) {\n      grp.className = 'rhs'\n    } else if (direction === SIDE) {\n      if (nodeObj.direction === LEFT) {\n        grp.className = 'lhs'\n      } else if (nodeObj.direction === RIGHT) {\n        grp.className = 'rhs'\n      }\n    }\n    const top = this.createTop(nodeObj)\n    if (nodeObj.children && nodeObj.children.length > 0) {\n      top.appendChild(createExpander(nodeObj.expanded))\n      grp.appendChild(top)\n      if (nodeObj.expanded !== false) {\n        const children = this.createChildren(nodeObj.children)\n        grp.appendChild(children)\n      }\n    } else {\n      grp.appendChild(top)\n    }\n    chldr.appendChild(grp)\n  }\n  return chldr\n}\n\n// Set primary nodes' direction and invoke createChildren()\nexport function layout() {\n  console.time('layout')\n  this.root.innerHTML = ''\n  this.box.innerHTML = ''\n  const tpc = this.createTopic(this.nodeData)\n  shapeTpc.call(this,tpc, this.nodeData) // shape root tpc\n  tpc.draggable = false\n  this.root.appendChild(tpc)\n\n  const primaryNodes: NodeObj[] = this.nodeData.children\n  if (!primaryNodes || primaryNodes.length === 0) return\n  if (this.direction === SIDE) {\n    // initiate direction of primary nodes\n    let lcount = 0\n    let rcount = 0\n    primaryNodes.map(node => {\n      if (node.direction === undefined) {\n        if (lcount <= rcount) {\n          node.direction = LEFT\n          lcount += 1\n        } else {\n          node.direction = RIGHT\n          rcount += 1\n        }\n      } else {\n        if (node.direction === LEFT) {\n          lcount += 1\n        } else {\n          rcount += 1\n        }\n      }\n    })\n  }\n  this.createChildren(this.nodeData.children, this.box, this.direction)\n  console.timeEnd('layout')\n}\n","const $d = document\nconst svgNS = 'http://www.w3.org/2000/svg'\nexport const createMainPath = function(d: string) {\n  const path = $d.createElementNS(svgNS, 'path')\n  path.setAttribute('d', d)\n  path.setAttribute('stroke', '#555')\n  path.setAttribute('fill', 'none')\n  path.setAttribute('stroke-width', '1')\n  path.setAttribute('stroke-linecap', 'square')\n  path.setAttribute('transform', 'translate(0.5,-0.5)')\n  return path\n}\n\nexport const createLinkSvg = function(klass: string) {\n  const svg = $d.createElementNS(svgNS, 'svg')\n  svg.setAttribute('class', klass)\n  return svg\n}\n\nexport const createLine = function(x1: number, y1: number, x2: number, y2: number) {\n  const line = $d.createElementNS(svgNS, 'line')\n  line.setAttribute('x1', x1.toString())\n  line.setAttribute('y1', y1.toString())\n  line.setAttribute('x2', x2.toString())\n  line.setAttribute('y2', y2.toString())\n  line.setAttribute('stroke', '#bbb')\n  line.setAttribute('fill', 'none')\n  line.setAttribute('stroke-width', '2')\n  return line\n}\n\nexport const createPath = function(d: string) {\n  const path = $d.createElementNS(svgNS, 'path')\n  path.setAttribute('d', d)\n  path.setAttribute('stroke', '#555')\n  path.setAttribute('fill', 'none')\n  path.setAttribute('stroke-linecap', 'square')\n  path.setAttribute('stroke-width', '1')\n  path.setAttribute('transform', 'translate(0.5,-0.5)')\n  // adding translate(0.5,-0.5) can fix render error on windows, but i still dunno why\n  return path\n}\n\nexport const createWidthControll = function(d: string) {\n  const g = $d.createElementNS(svgNS, 'g')\n  const left =$d.createElementNS(svgNS, 'rect')\n  const right =$d.createElementNS(svgNS, 'rect')\n  left.setAttribute('width','7')\n  left.setAttribute('height','30')\n  left.setAttribute('opacity','0')\n  left.setAttribute('style','cursor: ew-resize;')\n  left.setAttribute('x','22')\n  g.appendChild(right)\n  g.appendChild(left)\n  // adding translate(0.5,-0.5) can fix render error on windows, but i still dunno why\n  return g\n}\ninterface CustomSvg extends SVGElement{\n  linkObj?:object\n}\nexport const createSvgGroup = function(d: string, arrowd: string):CustomSvg {\n  const g = $d.createElementNS(svgNS, 'g')\n  const path = $d.createElementNS(svgNS, 'path')\n  const arrow = $d.createElementNS(svgNS, 'path')\n  arrow.setAttribute('d', arrowd)\n  arrow.setAttribute('stroke', 'rgb(235, 95, 82)')\n  arrow.setAttribute('fill', 'none')\n  arrow.setAttribute('stroke-linecap', 'cap')\n  arrow.setAttribute('stroke-width', '2')\n  path.setAttribute('d', d)\n  path.setAttribute('stroke', 'rgb(235, 95, 82)')\n  path.setAttribute('fill', 'none')\n  path.setAttribute('stroke-linecap', 'cap')\n  path.setAttribute('stroke-width', '2')\n\n  g.appendChild(path)\n  g.appendChild(arrow)\n  return g\n}\n","import { Canvg } from 'canvg';\nlet $d = document\nlet maxTop = 10000\nlet maxBottom = 10000\nlet maxLeft = 10000\nlet maxRight = 10000\nlet imgPadding = 40\nlet head = `<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">`\n\nfunction init(){\n  maxTop = 10000\n  maxBottom = 10000\n  maxLeft = 10000\n  maxRight = 10000\n  imgPadding = 40\n}\n\nfunction generateSvgDom() {\n  init()\n  let primaryNodes = $d.querySelectorAll('.mindbox > grp, root')\n  let svgContent = ''\n  for (let i = 0; i < primaryNodes.length; i++) {\n    let primaryNode = primaryNodes[i]\n    let rect = primaryNode.getBoundingClientRect()\n    let top = primaryNode.offsetTop\n    let bottom = top + rect.height\n    let left = primaryNode.offsetLeft\n    let right = left + rect.width\n    // console.log(top, bottom, left, right)\n    if (top < maxTop) {\n      maxTop = top\n    }\n    if (bottom > maxBottom) {\n      maxBottom = bottom\n    }\n    if (left < maxLeft) {\n      maxLeft = left\n    }\n    if (right > maxRight) {\n      maxRight = right\n    }\n    svgContent += PrimaryToSvg(primaryNode)\n  }\n  console.log(maxTop, maxBottom, maxLeft, maxRight)\n  svgContent += RootToSvg()\n  // 需要添加图片边缘padding\n  let svgHeight = maxBottom - maxTop + imgPadding * 2\n  let svgWidth = maxRight - maxLeft + imgPadding * 2\n  let svgFile = createSvg(svgHeight, svgWidth)\n  svgContent =\n    `<rect x=\"0\" y=\"0\" width=\"${svgWidth}\" height=\"${svgHeight}\" fill=\"#f6f6f6\"></rect>` +\n    svgContent\n  svgFile.innerHTML = svgContent\n  // document.body.append(svgFile)\n  return svgFile\n}\n\nexport function getHeightAndWidth() {\n  $d=this.container\n  init()\n  let primaryNodes = $d.querySelectorAll('.mindbox > grp, root')\n  let svgContent = ''\n  for (let i = 0; i < primaryNodes.length; i++) {\n    let primaryNode = primaryNodes[i]\n    let rect = primaryNode.getBoundingClientRect()\n    let top = primaryNode.offsetTop\n    let bottom = top + rect.height\n    let left = primaryNode.offsetLeft\n    let right = left + rect.width\n    // console.log(top, bottom, left, right)\n    if (top < maxTop) {\n      maxTop = top\n    }\n    if (bottom > maxBottom) {\n      maxBottom = bottom\n    }\n    if (left < maxLeft) {\n      maxLeft = left\n    }\n    if (right > maxRight) {\n      maxRight = right\n    }\n    svgContent += PrimaryToSvg(primaryNode)\n  }\n  console.log(maxTop, maxBottom, maxLeft, maxRight)\n  let svgHeight = maxBottom - maxTop\n  let svgWidth = maxRight - maxLeft\n  console.log('svgHeight',svgHeight)\n  return [svgHeight+5,svgWidth+5]\n}\n\nfunction createSvg(height, width) {\n  let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n  svg.setAttribute('height', height)\n  svg.setAttribute('width', width)\n  svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg')\n  svg.setAttribute('version', '1.2')\n  svg.setAttribute('xlink', 'http://www.w3.org/1999/xlink')\n  return svg\n}\n\nfunction RootToSvg() {\n  let root = document.querySelector('root')\n  let rootTpc = document.querySelector('root > tpc')\n  let rect = rootTpc.getBoundingClientRect()\n  let tpcStyle = getComputedStyle(rootTpc)\n  let t = rootTpc.parentNode\n  let top = 0\n  let left = 0\n  let nodeObj = document.querySelector('root > tpc').nodeObj\n  let tStyle = getComputedStyle(t)\n  let rootOffsetY = root.offsetTop - maxTop\n  let rootOffsetX = root.offsetLeft - maxLeft\n  let topicOffsetLeft =\n  left + parseInt(tStyle.paddingLeft) + parseInt(rect.paddingLeft)\n  let topicOffsetTop =\n  top +\n  parseInt(tStyle.paddingTop) +\n  parseInt(rect.paddingTop) +\n  parseInt(rect.fontSize)\n  let topicOffsetTopTop =\n  top +\n  parseInt(tStyle.paddingTop) +\n  parseInt(rect.paddingTop)\n  let svg2ndEle = document.querySelector('.svg2nd')\n\n  // render tags\n  let tags = ''\n  if (nodeObj.tags && nodeObj.tags.length) {\n    let tagsEle = rootTpc.querySelectorAll('.tags > span')\n    for (let i = 0; i < tagsEle.length; i++) {\n      let tag = tagsEle[i]\n      let tagRect = tag.getBoundingClientRect()\n      tags += `<rect x=\"${topicOffsetLeft}\" y=\"${\n        topicOffsetTop + 4\n        }\" rx=\"5px\" ry=\"5px\" width=\"${tagRect.width}\" height=\"${\n        tagRect.height\n        }\" style=\"fill: #d6f0f8;\"></rect>\n        <foreignObject x=\"${topicOffsetLeft}\" y=\"${\n          topicOffsetTop + 4\n          }\" rx=\"5px\" ry=\"5px\" width=\"${tagRect.width}\" height=\"${\n          tagRect.height\n          }\" > \n          <div sytle=\"font-size:12px\">${tag.innerHTML}</div>\n        </foreignObject>\n      `\n    }\n  }\n  let icons = ''\n  if (nodeObj.icons && nodeObj.icons.length) {\n    let iconsEle = rootTpc.querySelectorAll('.icons > span')\n    for (let i = 0; i < iconsEle.length; i++) {\n      let icon = iconsEle[i]\n      let iconRect = icon.getBoundingClientRect()\n      icons += `\n      <tspan>${icon.innerHTML}</tspan>`\n    }\n  }\n  //render images\n  let images = ''\n  if (nodeObj.image && nodeObj.image.length) {\n    let imagesEle = tpc.querySelectorAll('.image')\n    for (let i = 0; i < imagesEle.length; i++) {\n      let image = imagesEle[i]\n      let imageRect = image.getBoundingClientRect()\n      images += `${image.outerHTML}`\n    }\n  }\n\n  let svg2nd = `<g transform=\"translate(${imgPadding - maxLeft}, ${\n    imgPadding - maxTop\n    })\">${svg2ndEle.innerHTML}</g>`\n  // return (\n    svg2nd +=\n    `<g id=\"root\" transform=\"translate(${rootOffsetX + imgPadding}, ${\n    rootOffsetY + imgPadding\n    })\">\n      <rect x=\"${left}\" y=\"${top}\" rx=\"5px\" ry=\"5px\" width=\"${\n    rect.width\n    }\" height=\"${rect.height}\" style=\"fill: #00aaff;\"></rect>\n      <foreignObject x=\"${left + 15}\" y=\"${\n        top + 10\n        }\" width=\"${tpcStyle.width}\" height=\"${tpcStyle.height}\" \">\n        <div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"padding:0;margin:0;font-family:微软雅黑;font-size:${tpcStyle.fontSize};font-weight:${tpcStyle.fontWeight};color:${tpcStyle.color};word-break: break-all;line-height: 1\">\n        ${nodeObj.topic}\n        ${icons}\n        ${images}\n      </div>\n      </foreignObject>\n      ${tags}\n  </g>`\n  // )\n  let topiclinks=$d.querySelector('.topiclinks')\n  if(topiclinks){\n    svg2nd+=`<g transform=\"translate(${imgPadding - maxLeft}, ${\n      imgPadding - maxTop\n    })\">${topiclinks.innerHTML}</g>`\n  }\n  return svg2nd\n}\n\nfunction PrimaryToSvg(primaryNode) {\n  let topics = primaryNode.querySelectorAll('tpc')\n  let primaryNodeOffsetY = primaryNode.offsetTop - maxTop\n  let primaryNodeOffsetX = primaryNode.offsetLeft - maxLeft\n\n  let svg = ''\n  let svg3rd = primaryNode.querySelector('.svg3rd')\n  svg += `<g transform=\"translate(${primaryNodeOffsetX + imgPadding}, ${\n    primaryNodeOffsetY + imgPadding\n    })\">`\n  svg += svg3rd ? svg3rd.innerHTML : ''\n  for (let i = 0; i < topics.length; i++) {\n    let tpc = topics[i]\n    let t = tpc.parentNode\n    let nodeObj = tpc.nodeObj\n    if (nodeObj.root) { continue }\n    let tpcRect = tpc.getBoundingClientRect()\n    let top = t.offsetTop\n    let left = t.offsetLeft\n    let tpcStyle = getComputedStyle(tpc)\n    let tStyle = getComputedStyle(t)\n    let topicOffsetLeft =\n      left + parseInt(tStyle.paddingLeft) + parseInt(tpcStyle.paddingLeft)\n    let topicOffsetTop =\n      top +\n      parseInt(tStyle.paddingTop) +\n      parseInt(tpcStyle.paddingTop) +\n      parseInt(tpcStyle.fontSize)\n    let topicOffsetTopTop =\n      top +\n      parseInt(tStyle.paddingTop) +\n      parseInt(tpcStyle.paddingTop)\n    // style render\n    let border = ''\n    if (tpcStyle.borderWidth != '0px') {\n      border = `<rect x=\"${left + 15}\" y=\"${top}\" rx=\"5px\" ry=\"5px\" width=\"${\n        tpcRect.width\n        }\" height=\"${\n        tpcRect.height\n        }\" style=\"fill: rgba(0,0,0,0); stroke:#444;stroke-width:1px;\"></rect>`\n    }\n    let backgroundColor = ''\n    if (tpcStyle.backgroundColor != 'rgba(0, 0, 0, 0)') {\n      backgroundColor = `<rect x=\"${\n        left + 15\n        }\" y=\"${top}\" rx=\"5px\" ry=\"5px\" width=\"${tpcRect.width}\" height=\"${\n        tpcRect.height\n        }\" style=\"fill: ${tpcStyle.backgroundColor};\"></rect>`\n    }\n    // render tags\n    let tags = ''\n    if (nodeObj.tags && nodeObj.tags.length) {\n      let tagsEle = tpc.querySelectorAll('.tags > span')\n      for (let i = 0; i < tagsEle.length; i++) {\n        let tag = tagsEle[i]\n        let tagRect = tag.getBoundingClientRect()\n        tags += `<rect x=\"${topicOffsetLeft}\" y=\"${\n          topicOffsetTop + 4\n          }\" rx=\"5px\" ry=\"5px\" width=\"${tagRect.width}\" height=\"${\n          tagRect.height\n          }\" style=\"fill: #d6f0f8;\"></rect>\n          <foreignObject x=\"${topicOffsetLeft}\" y=\"${\n            topicOffsetTop + 4\n            }\" rx=\"5px\" ry=\"5px\" width=\"${tagRect.width}\" height=\"${\n            tagRect.height\n            }\" > \n            <div sytle=\"font-size:12px\">${tag.innerHTML}</div>\n          </foreignObject>`\n      }\n    }\n    let icons = ''\n    if (nodeObj.icons && nodeObj.icons.length) {\n      let iconsEle = tpc.querySelectorAll('.icons > span')\n      for (let i = 0; i < iconsEle.length; i++) {\n        let icon = iconsEle[i]\n        let iconRect = icon.getBoundingClientRect()\n        icons += `\n        <tspan>${icon.innerHTML}</tspan>`\n      }\n    }\n      //render images\n    let images = ''\n    if (nodeObj.image && nodeObj.image.length) {\n      let imagesEle = tpc.querySelectorAll('.image')\n      for (let i = 0; i < imagesEle.length; i++) {\n        let image = imagesEle[i]\n        let imageRect = image.getBoundingClientRect()\n        images += `${image.outerHTML}`\n      }\n    }\n    // render every single node\n    svg += `<g id=\"${nodeObj.id}\">\n      ${border}\n      ${backgroundColor}\n      <foreignObject  x=\"${topicOffsetLeft}\" y=\"${topicOffsetTopTop}\" width=\"${tpcStyle.width}\" height=\"${tpcStyle.height}\">\n      <div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"padding:0;margin:0;font-family:微软雅黑;font-size:${tpcStyle.fontSize};font-weight:${tpcStyle.fontWeight};color:${tpcStyle.color};word-break: break-all;line-height: 1\">\n        ${nodeObj.topic}\n        ${icons}\n        ${images}\n      </div>\n      </foreignObject>\n      ${tags}\n  </g>`\n  }\n  svg += '</g>'\n  return svg\n}\n\nexport let exportSvg = function () {\n  let svgFile = generateSvgDom()\n  let dlUrl = URL.createObjectURL(\n    new Blob([head + svgFile.outerHTML.replace(/&nbsp;/g, ' ')])\n  )\n  let a = document.createElement('a')\n  a.href = dlUrl\n  a.download = 'me-mindmap.svg'\n  a.click()\n}\n\nexport let exportSvgDom = function (instance=this, fileName='default') {\n  // if (!instance) throw new Error('Mind-elixir instance is not presented. ---> exportSvg(instance, fileName)') \n  // initVar()\n  $d = instance.container\n  let svgFile = generateSvgDom()\n  return svgFile\n}\n\nexport let exportPng = async function () {\n  let svgFile = generateSvgDom()\n  const canvas = document.createElement('canvas')\n  canvas.style.display = 'none'\n  const ctx = canvas.getContext('2d')\n  // Canvg do not support foreignObject\n  let v = await Canvg.fromString(\n    ctx,\n    head + svgFile.outerHTML.replace(/&nbsp;/g, ' ')\n  )\n  v.start()\n  let imgURL = canvas.toDataURL('image/png')\n  let a = document.createElement('a')\n  a.href = imgURL\n  a.download = 'me-mindmap.png'\n  a.click()\n}\n\n\nexport default {\n  exportSvg, exportPng\n}","import { node } from 'canvg/dist/presets'\nimport { MindElixirInstance, NodeObj } from '.'\nimport { getHeightAndWidth } from '../painter/index.foreignObject'\nimport { MindElixirData } from './index.lite'\nimport { findEle } from './utils/dom'\n/**\n * @exports -\n * workaround for jsdoc\n */\n/**\n * @exports MapInteraction\n * @namespace MapInteraction\n */\nfunction getData(instance) {\n  return instance.isFocusMode ? instance.nodeDataBackup : instance.nodeData\n}\n\ninterface ISummaryNode{\n  NodeObj\n}\n/**\n * @function\n * @instance\n * @name selectNode\n * @memberof MapInteraction\n * @description Select a node and add solid border to it.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n */\nexport const selectNode = function(targetElement, isNewNode, clickEvent) {\n  if (!targetElement) return\n  console.time('selectNode')\n  if (typeof targetElement === 'string') {\n    return this.selectNode(findEle(targetElement))\n  }\n  // if ((this.currentNode&&!this.ctrlRepeat)||this.currentNode?.nodeObj.id===targetElement?.nodeObj.id) this.currentNode.className = ''\n  // else targetElement.className = 'selected'\n  if(this.ctrlRepeat){\n    let flag=false\n    this.currentSummaryNodeArr=this.currentSummaryNodeArr??[]\n    this.currentSummaryNodeArr=this.currentSummaryNodeArr.filter(node=>{\n      if(node.nodeObj.id===targetElement.nodeObj.id){\n        flag=true\n        return false\n      }else{\n        return true\n      }\n    })\n    if(!flag){\n      this.currentSummaryNodeArr.push(targetElement)\n      targetElement.className='selected'\n    }else{\n      targetElement.className=''\n    }\n  }else{\n    if (this.currentNode) this.currentNode.className = ''\n    targetElement.className = 'selected'\n  }\n  if(this?.widthControll){\n    const widthControllRight=targetElement.querySelector('widthControllRight')\n    widthControllRight.className='width-controll-right'\n    const widthControllLeft=targetElement.querySelector('widthControllLeft')\n    widthControllLeft.className='width-controll-left'\n  }\n  this.currentNode = targetElement\n  if (isNewNode) {\n    this.bus.fire('selectNewNode', targetElement.nodeObj, clickEvent)\n  } else {\n    this.bus.fire('selectNode', targetElement.nodeObj, clickEvent)\n  }\n  console.timeEnd('selectNode')\n}\nexport const unselectNode = function() {\n  if (this.currentNode) {\n    this.currentNode.className = ''\n    if(this.widthControll){\n      const widthControllRight=this.currentNode.querySelector('widthControllRight')\n      widthControllRight.className=''\n      const widthControllLeft=this.currentNode.querySelector('widthControllLeft')\n      widthControllLeft.className=''\n    }\n  }\n  this.currentNode = null\n  this.bus.fire('unselectNode')\n}\nexport const selectNextSibling = function() {\n  if (!this.currentNode || this.currentNode.dataset.nodeid === 'meroot') return undefined\n\n  const sibling = this.currentNode.parentElement.parentElement.nextSibling\n  let target: HTMLElement\n  const grp = this.currentNode.parentElement.parentElement\n  if (grp.className === 'rhs' || grp.className === 'lhs') {\n    const siblingList = this.mindElixirBox.querySelectorAll('.' + grp.className)\n    const i = Array.from(siblingList).indexOf(grp)\n    if (i + 1 < siblingList.length) {\n      target = siblingList[i + 1].firstChild.firstChild\n    } else {\n      return false\n    }\n  } else if (sibling) {\n    target = sibling.firstChild.firstChild\n  } else {\n    return false\n  }\n  this.selectNode(target)\n  return true\n}\nexport const selectPrevSibling = function() {\n  if (!this.currentNode || this.currentNode.dataset.nodeid === 'meroot') return undefined\n\n  const sibling = this.currentNode.parentElement.parentElement.previousSibling\n  let target\n  const grp = this.currentNode.parentElement.parentElement\n  if (grp.className === 'rhs' || grp.className === 'lhs') {\n    const siblingList = this.mindElixirBox.querySelectorAll('.' + grp.className)\n    const i = Array.from(siblingList).indexOf(grp)\n    if (i - 1 >= 0) {\n      target = siblingList[i - 1].firstChild.firstChild\n    } else {\n      return false\n    }\n  } else if (sibling) {\n    target = sibling.firstChild.firstChild\n  } else {\n    return false\n  }\n  this.selectNode(target)\n  return true\n}\nexport const selectFirstChild = function() {\n  if (!this.currentNode) return\n  const children = this.currentNode.parentElement.nextSibling\n  if (children && children.firstChild) {\n    const target = children.firstChild.firstChild.firstChild\n    this.selectNode(target)\n  }\n}\nexport const selectParent = function() {\n  if (!this.currentNode || this.currentNode.dataset.nodeid === 'meroot') return undefined\n\n  const parent = this.currentNode.parentElement.parentElement.parentElement\n    .previousSibling\n  if (parent) {\n    const target = parent.firstChild\n    this.selectNode(target)\n  }\n}\n/**\n * @function\n * @instance\n * @name getAllDataString\n * @description Get all node data as string.\n * @memberof MapInteraction\n * @return {string}\n */\nexport const getAllDataString = function() {\n  const data = {\n    direction:this.direction,\n    nodeData: getData(this),\n    linkData: this.linkData,\n  }\n  return JSON.stringify(data, (k, v) => {\n    if (k === 'parent') return undefined\n    if (k === 'from') return v.nodeObj.id\n    if (k === 'to') return v.nodeObj.id\n    return v\n  })\n}\n/**\n * @function\n * @instance\n * @name getAllData\n * @description Get all node data as object.\n * @memberof MapInteraction\n * @return {Object}\n */\nexport const getAllData = function(): object {\n  const data = {\n    direction:this.direction,\n    nodeData: getData(this),\n    linkData: this.linkData,\n  }\n  return JSON.parse(\n    JSON.stringify(data, (k, v) => {\n      if (k === 'parent') return undefined\n      if (k === 'from') return v.nodeObj.id\n      if (k === 'to') return v.nodeObj.id\n      return v\n    })\n  )\n}\n\n/**\n * @function\n * @instance\n * @name getAllDataWithAutoHide\n * @description Get all the data of automatically hidden third-level nodes\n * @memberof MapInteraction\n * @return {Object}\n */\n\nfunction autoHide(nodeData:NodeObj,cnt,deep){\n  if(cnt<deep){\n    nodeData.expanded=true\n  }else{\n    nodeData.expanded=false\n  }\n  for(const val of (nodeData.children||[])){\n    autoHide(val,cnt+1,deep)\n  }\n}\ntype data = {\n  [key: string]: any;\n  nodeData: string;\n};\n\nexport const getAllDataWithAutoHide = function(): data {\n  const expandDeep=Number(this.container.querySelector('.numberSelection').value)||2\n  const data = {\n    direction:this.direction,\n    nodeData: getData(this),\n    linkData: this.linkData,\n    height:getHeightAndWidth.call(this),\n    expandDeep\n  }\n  autoHide(data.nodeData,0,expandDeep)\n  return JSON.parse(\n    JSON.stringify(data, (k, v) => {\n      if (k === 'parent') return undefined\n      if (k === 'from') return v.nodeObj.id\n      if (k === 'to') return v.nodeObj.id\n      return v\n    })\n  )\n}\n\n/**\n * @function\n * @instance\n * @name getAllDataMd\n * @description Get all node data as markdown.\n * @memberof MapInteraction\n * @return {String}\n */\nexport const getAllDataMd = function():string {\n  const data = getData(this)\n  let mdString = '# ' + data.topic + '\\n\\n'\n  function writeMd(children, deep) {\n    for (let i = 0; i < children.length; i++) {\n      if (deep <= 6) {\n        mdString += ''.padStart(deep, '#') + ' ' + children[i].topic + '\\n\\n'\n      } else {\n        mdString +=\n          ''.padStart(deep - 7, '\\t') + '- ' + children[i].topic + '\\n'\n      }\n      if (children[i].children) {\n        writeMd(children[i].children, deep + 1)\n      }\n    }\n  }\n  writeMd(data.children, 2)\n  return mdString\n}\n\n/**\n * @function\n * @instance\n * @name enableEdit\n * @memberof MapInteraction\n */\nexport const enableEdit = function() {\n  this.editable = true\n}\n\n/**\n * @function\n * @instance\n * @name disableEdit\n * @memberof MapInteraction\n */\nexport const disableEdit = function() {\n  this.editable = false\n}\n\n/**\n * @function\n * @instance\n * @name scale\n * @description Change the scale of the mind map.\n * @memberof MapInteraction\n * @param {number}\n */\nexport const scale = function(scaleVal) {\n  this.scaleVal = scaleVal\n  this.map.style.transform = 'scale(' + scaleVal + ')'\n}\n\nfunction getRootWidth(node:HTMLElement){\n  const root=node.querySelector('root')as HTMLElement\n  return root.offsetWidth||150\n}\nfunction getRootHeight(node:HTMLElement){\n  const root=node.querySelector('root')as HTMLElement\n  return root.offsetHeight||150\n}\n\nfunction getHeightDistance(a:HTMLElement,b:HTMLElement){\n  const aHeight=a?.getBoundingClientRect()?.top||0\n  const bHeight=b?.getBoundingClientRect()?.top||aHeight\n  console.log(aHeight,bHeight)\n  return Math.abs(aHeight-bHeight)\n}\n\nfunction getWidthDistance(a:HTMLElement,b:HTMLElement){\n  const aWidth=a?.getBoundingClientRect()?.left||0\n  const bWidth=b?.getBoundingClientRect()?.left||aWidth\n  console.log(aWidth,bWidth)\n  return Math.abs(aWidth-bWidth)\n}\n\nexport function getHeightFromRootToAnotherNode(node:HTMLElement,anotherNode:HTMLElement){\n  const tpc=node.querySelector('root')as HTMLElement\n  return getHeightDistance(tpc,anotherNode)\n}\n\nexport function getWidthFromRootToAnotherNode(node:HTMLElement,anotherNode:HTMLElement){\n  const tpc=node.querySelector('root')as HTMLElement\n  return getWidthDistance(tpc,anotherNode)\n}\n\nfunction getHeightFromRootToChild(node:HTMLElement){\n  const tpc=node.querySelector('root')as HTMLElement\n  const childTpc=node.querySelector('.map-canvas children grp')as HTMLElement\n  return getHeightDistance(tpc,childTpc)\n}\n/**\n * @function\n * @instance\n * @name toCenter\n * @description Reset position of the map to center.\n * @memberof MapInteraction\n */\nexport const toCenter = function() {\n  this.container.scrollTo(\n    10000 - this.container.offsetWidth / 2,\n    10000 - this.container.offsetHeight / 2\n  )\n}\n\n/**\n * @function\n * @instance\n * @name toCenter\n * @description Reset position of the map to top left.\n * @memberof MapInteraction\n */\n export const toTopLeft = function() {\n  if(this.nodeData?.children.length>0){\n    this.container.scrollTo(\n      10000 - getRootWidth(this.container)/2-10,\n      10000 - getRootHeight(this.container)/2-getHeightFromRootToChild(this.container)-5\n    )\n  }else{\n    this.container.scrollTo(\n      10000 - this.container.offsetWidth / 2,\n      10000 - this.container.offsetHeight / 2\n    )\n  }\n  \n}\n\nexport const install = function(plugin) {\n  plugin(this)\n}\n/**\n * @function\n * @instance\n * @name focusNode\n * @description Enter focus mode, set the target element as root.\n * @memberof MapInteraction\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n */\nexport const focusNode = function(tpcEl) {\n  if (tpcEl.nodeObj.root) return\n  if (this.tempDirection === null) {\n    this.tempDirection = this.direction\n  }\n  if (!this.isFocusMode) {\n    this.nodeDataBackup = this.nodeData // help reset focus mode\n    this.isFocusMode = true\n  }\n  this.nodeData = tpcEl.nodeObj\n  this.nodeData.root = true\n  this.initRight()\n}\n/**\n * @function\n * @instance\n * @name cancelFocus\n * @description Exit focus mode.\n * @memberof MapInteraction\n */\nexport const cancelFocus = function() {\n  this.isFocusMode = false\n  if (this.tempDirection !== null) {\n    delete this.nodeData.root\n    this.nodeData = this.nodeDataBackup\n    this.direction = this.tempDirection\n    this.tempDirection = null\n    this.init()\n  }\n}\n/**\n * @function\n * @instance\n * @name initLeft\n * @description Child nodes will distribute on the left side of the root node.\n * @memberof MapInteraction\n */\nexport const initLeft = function() {\n  this.direction = 0\n  this.init()\n}\n/**\n * @function\n * @instance\n * @name initRight\n * @description Child nodes will distribute on the right side of the root node.\n * @memberof MapInteraction\n */\nexport const initRight = function() {\n  this.direction = 1\n  this.init()\n}\n/**\n * @function\n * @instance\n * @name initSide\n * @description Child nodes will distribute on both left and right side of the root node.\n * @memberof MapInteraction\n */\nexport const initSide = function() {\n  this.direction = 2\n  this.init()\n}\n\n/**\n * @function\n * @instance\n * @name setLocale\n * @memberof MapInteraction\n */\nexport const setLocale = function(locale) {\n  this.locale = locale\n  this.init()\n}\n\nexport const expandNode = function(el, isExpand) {\n  const node = el.nodeObj\n  if (typeof isExpand === 'boolean') {\n    node.expanded = isExpand\n  } else if (node.expanded !== false) {\n    node.expanded = false\n  } else {\n    node.expanded = true\n    expandNodeChild(node)\n  }\n  // TODO 在此函数构造 html 结构，而非调用 layout\n  this.layout()\n  // linkDiv 已实现只更新特定主节点\n  this.linkDiv()\n  this.bus.fire('expandNode', node)\n}\n\n/**\n * @function\n * @instance\n * @name refresh\n * @description Refresh mind map, you can use it after modified `this.nodeData`\n * @memberof MapInteraction\n */\nexport const refresh = function() {\n  // add parent property to every node\n  this.addParentLink(this.nodeData)\n  // create dom element for every node\n  this.layout()\n  // generate links between nodes\n  this.linkDiv()\n}\n\n/**\n * 一键展开子主题\n * @param nodeData \n */\n export function expandNodeChild(nodeData:NodeObj){\n  nodeData.expanded=true\n  for(const val of (nodeData.children||[])){\n    expandNodeChild(val)\n  }\n}","import type { NodeElement, NodeObj } from './index'\n\nimport {\n  moveNodeObj,\n  removeNodeObj,\n  insertNodeObj,\n  insertBeforeNodeObj,\n  insertParentNodeObj,\n  checkMoveValid,\n  addParentLink,\n  moveUpObj,\n  moveDownObj,\n  moveNodeBeforeObj,\n  moveNodeAfterObj,\n  refreshIds,\n} from './utils/index'\nimport { findEle, createExpander, shapeTpc } from './utils/dom'\nimport { rgbHex } from './utils/index'\nimport { LEFT, RIGHT, SIDE } from './const'\nconst $d = document\n\n/**\n * @exports NodeOperation\n * @namespace NodeOperation\n */\nexport const updateNodeStyle = function(object) {\n  if (!object.style) return\n  const nodeEle = findEle(object.id, this)\n  const origin = {\n    color: nodeEle.style.color && rgbHex(nodeEle.style.color),\n    background: nodeEle.style.background && rgbHex(nodeEle.style.background),\n    fontSize: nodeEle.style.fontSize && nodeEle.style.fontSize + 'px',\n    fontWeight: nodeEle.style.fontWeight,\n  }\n  nodeEle.style.color = object.style.color\n  nodeEle.style.background = object.style.background\n  nodeEle.style.fontSize = object.style.fontSize + 'px'\n  nodeEle.style.fontWeight = object.style.fontWeight || 'normal'\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'editStyle',\n    obj: object,\n    origin,\n  })\n}\n\nexport const updateNodeTags = function(object, tags) {\n  if (!tags) return\n  const oldVal = object.tags\n  object.tags = tags\n  const nodeEle = findEle(object.id)\n  shapeTpc.call(this,nodeEle, object)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'editTags',\n    obj: object,\n    origin: oldVal,\n  })\n}\n\nexport const updateNodeIcons = function(object, icons) {\n  if (!icons) return\n  const oldVal = object.icons\n  object.icons = icons\n  const nodeEle = findEle(object.id)\n  shapeTpc.call(this,nodeEle, object)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'editIcons',\n    obj: object,\n    origin: oldVal,\n  })\n}\n\nexport const updateNodeHyperLink = function(object, hyperLink) {\n  if (hyperLink==null||hyperLink==undefined) return\n  const oldVal = object.hyperLink\n  const hyperLinkArr=hyperLink.split(',')\n  object.linkJump=object.linkJump?.filter(link=>{\n    return hyperLinkArr.find(val=>val===link.title)?true:false\n  })\n  if(object.linkJump?.length===0) delete object.linkJump\n  object.hyperLink = hyperLink\n  const nodeEle = findEle(object.id)\n  shapeTpc.call(this,nodeEle, object)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'editHyperLink',\n    obj: object,\n    origin: oldVal,\n  })\n}\n\nexport const updateNodeRemark = function(object, remark) {\n  if (remark==null||remark==undefined) return\n  const oldVal = object.remark\n  object.remark = remark\n  const nodeEle = findEle(object.id)\n  shapeTpc.call(this,nodeEle, object)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'editRemark',\n    obj: object,\n    origin: oldVal,\n  })\n}\n\n// export const updateNodeImage = function(object, image) {\n//   if (!image) return\n//   const oldVal = object.image\n//   object.image = image\n//   const nodeEle = findEle(object.id)\n//   shapeTpc(nodeEle, object)\n//   this.linkDiv()\n//   this.bus.fire('operation', {\n//     name: 'editImage',\n//     obj: object,\n//     origin: oldVal,\n//   })\n// }\n\nexport const updateNodeSvgChart = function() {\n  // TODO\n}\n\n/**\n * @function\n * @instance\n * @name insertSibling\n * @memberof NodeOperation\n * @description Create a sibling node.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @param {node} node - New node information.\n * @example\n * insertSibling(E('bd4313fbac40284b'))\n */\nexport const insertSibling = function(el, node) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const nodeObj = nodeEle.nodeObj\n  if (nodeObj.root === true) {\n    this.addChild()\n    return\n  }\n  const newNodeObj = node || this.generateNewObj()\n  insertNodeObj(nodeObj, newNodeObj)\n  addParentLink(this.nodeData)\n  const t = nodeEle.parentElement\n  console.time('insertSibling_DOM')\n\n  const { grp, top } = this.createGroup(newNodeObj)\n\n  const children = t.parentNode.parentNode\n  children.insertBefore(grp, t.parentNode.nextSibling)\n  if (children.className === 'mindbox') {\n    this.processPrimaryNode(grp, newNodeObj)\n    this.linkDiv()\n  } else {\n    this.linkDiv(grp.offsetParent)\n  }\n  if (!node) {\n    this.createInputDiv(top.children[0])\n  }\n  this.selectNode(top.children[0], true)\n  console.timeEnd('insertSibling_DOM')\n  this.bus.fire('operation', {\n    name: 'insertSibling',\n    obj: newNodeObj,\n  })\n}\n\n/**\n * @function\n * @instance\n * @name insertBefore\n * @memberof NodeOperation\n * @description Create a sibling node before the selected node.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @param {node} node - New node information.\n * @example\n * insertBefore(E('bd4313fbac40284b'))\n */\nexport const insertBefore = function(el, node) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const nodeObj = nodeEle.nodeObj\n  if (nodeObj.root === true) {\n    this.addChild()\n    return\n  }\n  const newNodeObj = node || this.generateNewObj()\n  insertBeforeNodeObj(nodeObj, newNodeObj)\n  addParentLink(this.nodeData)\n  const t = nodeEle.parentElement\n  console.time('insertSibling_DOM')\n\n  const { grp, top } = this.createGroup(newNodeObj)\n\n  const children = t.parentNode.parentNode\n  children.insertBefore(grp, t.parentNode)\n  if (children.className === 'mindbox') {\n    this.processPrimaryNode(grp, newNodeObj)\n    this.linkDiv()\n  } else {\n    this.linkDiv(grp.offsetParent)\n  }\n  if (!node) {\n    this.createInputDiv(top.children[0])\n  }\n  this.selectNode(top.children[0], true)\n  console.timeEnd('insertSibling_DOM')\n  this.bus.fire('operation', {\n    name: 'insertSibling',\n    obj: newNodeObj,\n  })\n}\n\n/**\n * @function\n * @instance\n * @name insertParent\n * @memberof NodeOperation\n * @description Create a parent node of the selected node.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @param {node} node - New node information.\n * @example\n * insertParent(E('bd4313fbac40284b'))\n */\nexport const insertParent = function(el, node) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const nodeObj = nodeEle.nodeObj\n  if (nodeObj.root === true) {\n    return\n  }\n  const newNodeObj = node || this.generateNewObj()\n  insertParentNodeObj(nodeObj, newNodeObj)\n  addParentLink(this.nodeData)\n\n  const grp0 = nodeEle.parentElement.parentElement\n  console.time('insertParent_DOM')\n  const { grp, top } = this.createGroup(newNodeObj, true)\n  top.appendChild(createExpander(true))\n  const children0 = grp0.parentNode\n  grp0.insertAdjacentElement('afterend', grp)\n\n  const c = $d.createElement('children')\n  c.appendChild(grp0)\n\n  top.insertAdjacentElement('afterend', c)\n\n  if (children0.className === 'mindbox') {\n    grp.className = grp0.className // l/rhs\n    grp0.className = ''\n    grp0.querySelector('.svg3rd').remove()\n    this.linkDiv()\n  } else {\n    this.linkDiv(grp.offsetParent)\n  }\n\n  if (!node) {\n    this.createInputDiv(top.children[0])\n  }\n  this.selectNode(top.children[0], true)\n  console.timeEnd('insertParent_DOM')\n  this.bus.fire('operation', {\n    name: 'insertParent',\n    obj: newNodeObj,\n  })\n}\n\nexport const addSummaryFunction = function(nodeEle,node){\n  if (!nodeEle) return undefined\n  const nodeObj = nodeEle.nodeObj\n  // if (nodeObj.expanded === false) {\n  //   this.expandNode(nodeEle, true)\n  //   // dom had resetted\n  //   nodeEle = findEle(nodeObj.id)\n  // }\n  const newNodeObj = node || this.generateNewSummaryObj()\n  // if (nodeObj.children) nodeObj.children.push(newNodeObj)\n  // else nodeObj.children = [newNodeObj]\n  nodeObj.parent.children.push(newNodeObj)\n  addParentLink(this.nodeData)\n\n  const top = nodeEle.parentNode.parentNode.parentNode.parentNode\n\n  const { smy, top: newTop } = this.createSummary(newNodeObj)\n  // const { grp, top: newTop } = this.createGroup(newNodeObj)\n  top.appendChild(smy) \n  this.linkDiv()\n  // if (top.tagName === 'T') {\n  //   if (top.children[1]) {\n  //     top.nextSibling.appendChild(grp)\n  //   } else {\n  //     const c = $d.createElement('children')\n  //     c.appendChild(grp)\n  //     top.appendChild(createExpander(true))\n  //     top.insertAdjacentElement('afterend', c)\n  //   }\n  //   this.linkDiv(grp.offsetParent)\n  // } else if (top.tagName === 'ROOT') {\n  //   this.processPrimaryNode(grp, newNodeObj)\n  //   top.nextSibling.appendChild(grp)\n  //   this.linkDiv()\n  // }\n\n  return { newTop, newNodeObj }\n}\n\nexport const addChildFunction = function(nodeEle, node) { \n  if (!nodeEle) return undefined\n  const nodeObj = nodeEle.nodeObj\n  if (nodeObj.expanded === false) {\n    this.expandNode(nodeEle, true)\n    // dom had resetted\n    nodeEle = findEle(nodeObj.id)\n  }\n  const newNodeObj = node || this.generateNewObj()\n  if (nodeObj.children) nodeObj.children.push(newNodeObj)\n  else nodeObj.children = [newNodeObj]\n  addParentLink(this.nodeData)\n\n  const top = nodeEle.parentElement\n\n  const { grp, top: newTop } = this.createGroup(newNodeObj)\n\n  if (top.tagName === 'T') {\n    if (top.children[1]) {\n      top.nextSibling.appendChild(grp)\n    } else {\n      const c = $d.createElement('children')\n      c.appendChild(grp)\n      top.appendChild(createExpander(true))\n      top.insertAdjacentElement('afterend', c)\n    }\n    this.linkDiv(grp.offsetParent)\n  } else if (top.tagName === 'ROOT') {\n    this.processPrimaryNode(grp, newNodeObj)\n    top.nextSibling.appendChild(grp)\n    this.linkDiv()\n  }\n  return { newTop, newNodeObj }\n}\n\nexport const addSummary = function(el: NodeElement, node: NodeObj) {\n  console.time('addSummary')\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const { newTop, newNodeObj } = addSummaryFunction.call(this, nodeEle, node)\n  console.timeEnd('addSummary')\n  if (!node) {\n    this.createInputDiv(newTop.children[0])\n  }\n  this.selectNode(newTop.children[0], true)\n  this.bus.fire('operation', {\n    name: 'addSummary',\n    obj: newNodeObj,\n  })\n}\n\n/**\n * @function\n * @instance\n * @name addChild\n * @memberof NodeOperation\n * @description Create a child node.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @param {node} node - New node information.\n * @example\n * addChild(E('bd4313fbac40284b'))\n */\nexport const addChild = function(el: NodeElement, node: NodeObj) {\n  console.time('addChild')\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const { newTop, newNodeObj } = addChildFunction.call(this, nodeEle, node)\n  console.timeEnd('addChild')\n  if (!node) {\n    this.createInputDiv(newTop.children[0])\n  }\n  this.selectNode(newTop.children[0], true)\n  this.bus.fire('operation', {\n    name: 'addChild',\n    obj: newNodeObj,\n  })\n}\n// uncertain link disappear sometimes??\n// TODO while direction = SIDE, move up won't change the direction of primary node\n\n/**\n * @function\n * @instance\n * @name copyNode\n * @memberof NodeOperation\n * @description Copy node to another node.\n * @param {TargetElement} node - Target element return by E('...'), default value: currentTarget.\n * @param {TargetElement} to - The target(as parent node) you want to copy to.\n * @example\n * copyNode(E('bd4313fbac402842'),E('bd4313fbac402839'))\n */\nexport const copyNode = function(node: NodeElement, to: NodeElement) {\n  console.time('copyNode')\n  const deepCloneObj = JSON.parse(\n    JSON.stringify(node.nodeObj, (k, v) => {\n      if (k === 'parent') return undefined\n      return v\n    })\n  )\n  refreshIds(deepCloneObj)\n  const { newNodeObj } = addChildFunction.call(this, to, deepCloneObj)\n  console.timeEnd('copyNode')\n  this.bus.fire('operation', {\n    name: 'copyNode',\n    obj: newNodeObj,\n  })\n}\n\n/**\n * @function\n * @instance\n * @name moveUpNode\n * @memberof NodeOperation\n * @description Move the target node up.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @example\n * moveUpNode(E('bd4313fbac40284b'))\n */\nexport const moveUpNode = function(el) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const grp = nodeEle.parentNode.parentNode\n  const obj = nodeEle.nodeObj\n  moveUpObj(obj)\n  grp.parentNode.insertBefore(grp, grp.previousSibling)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'moveUpNode',\n    obj,\n  })\n}\n\n/**\n * @function\n * @instance\n * @name moveDownNode\n * @memberof NodeOperation\n * @description Move the target node down.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @example\n * moveDownNode(E('bd4313fbac40284b'))\n */\nexport const moveDownNode = function(el) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const grp = nodeEle.parentNode.parentNode\n  const obj = nodeEle.nodeObj\n  moveDownObj(obj)\n  if (grp.nextSibling) {\n    grp.insertAdjacentElement('beforebegin', grp.nextSibling)\n  } else {\n    grp.parentNode.prepend(grp)\n  }\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'moveDownNode',\n    obj,\n  })\n}\n\n/**\n * @function\n * @instance\n * @name removeNode\n * @memberof NodeOperation\n * @description Remove the target node.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @example\n * removeNode(E('bd4313fbac40284b'))\n */\nexport const removeNode = function(el) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  const nodeObj = nodeEle.nodeObj\n  if (nodeObj.root === true) {\n    throw new Error('Can not remove root node')\n  }\n  const index = nodeObj.parent.children.findIndex(node => node === nodeObj)\n  const next = nodeObj.parent.children[index + 1]\n  const originSiblingId = next && next.id\n\n  const childrenLength = removeNodeObj(nodeObj)\n  const t = nodeEle.parentNode\n  if (t.tagName === 'ROOT') {\n    return\n  }\n  if (childrenLength === 0) {\n    // remove epd when children length === 0\n    const parentT = t.parentNode.parentNode.previousSibling\n    // root doesn't have epd\n    if (parentT.tagName !== 'ROOT') {\n      parentT.children[1].remove()\n    }\n    this.selectParent()\n  } else {\n    // select sibling automatically\n    const success = this.selectPrevSibling()\n    if (!success) this.selectNextSibling()\n  }\n  for (const prop in this.linkData) {\n    // MAYBEBUG should traversal all children node\n    const link = this.linkData[prop]\n    if (link.from === t.firstChild || link.to === t.firstChild) {\n      this.removeLink(\n        this.mindElixirBox.querySelector(\n          `[data-linkid=${this.linkData[prop].id}]`\n        )\n      )\n    }\n  }\n  // remove GRP\n  t.parentNode.remove()\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'removeNode',\n    obj: nodeObj,\n    originSiblingId,\n    originParentId: nodeObj.parent.id,\n  })\n}\n\n/**\n * @function\n * @instance\n * @name moveNode\n * @memberof NodeOperation\n * @description Move a node to another node (as child node).\n * @param {TargetElement} from - The target you want to move.\n * @param {TargetElement} to - The target(as parent node) you want to move to.\n * @example\n * moveNode(E('bd4313fbac402842'),E('bd4313fbac402839'))\n */\nexport const moveNode = function(from, to) {\n  const fromObj = from.nodeObj\n  const toObj = to.nodeObj\n  const originParentId = fromObj.parent.id\n  if (toObj.expanded === false) {\n    this.expandNode(to, true)\n    from = findEle(fromObj.id)\n    to = findEle(toObj.id)\n  }\n  if (!checkMoveValid(fromObj, toObj)) {\n    console.warn('Invalid move')\n    return\n  }\n  console.time('moveNode')\n  moveNodeObj(fromObj, toObj)\n  addParentLink(this.nodeData) // update parent property\n  const fromTop = from.parentElement\n  const fromChilren = fromTop.parentNode.parentNode\n  const toTop = to.parentElement\n  if (fromChilren.className === 'mindbox') {\n    // clear svg group of primary node\n    fromTop.parentNode.lastChild.remove()\n  } else if (fromTop.parentNode.className === 'mindbox') {\n    fromTop.style.cssText = '' // clear style\n  }\n  if (toTop.tagName === 'T') {\n    if (fromChilren.className === 'mindbox') {\n      // clear direaction class of primary node\n      fromTop.parentNode.className = ''\n    }\n    if (toTop.children[1]) {\n      // expander exist\n      toTop.nextSibling.appendChild(fromTop.parentNode)\n    } else {\n      // expander not exist, no child\n      const c = $d.createElement('children')\n      c.appendChild(fromTop.parentNode)\n      toTop.appendChild(createExpander(true))\n      toTop.parentElement.insertBefore(c, toTop.nextSibling)\n    }\n  } else if (toTop.tagName === 'ROOT') {\n    this.processPrimaryNode(fromTop.parentNode, fromObj)\n    toTop.nextSibling.appendChild(fromTop.parentNode)\n  }\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'moveNode',\n    obj: { fromObj, toObj, originParentId },\n  })\n  console.timeEnd('moveNode')\n}\n\n/**\n * @function\n * @instance\n * @name moveNodeBefore\n * @memberof NodeOperation\n * @description Move a node and become previous node of another node.\n * @param {TargetElement} from\n * @param {TargetElement} to\n * @example\n * moveNodeBefore(E('bd4313fbac402842'),E('bd4313fbac402839'))\n */\nexport const moveNodeBefore = function(from, to) {\n  const fromObj = from.nodeObj\n  const toObj = to.nodeObj\n  const originParentId = fromObj.parent.id\n  moveNodeBeforeObj(fromObj, toObj)\n  addParentLink(this.nodeData)\n  const fromTop = from.parentElement\n  const fromGrp = fromTop.parentNode\n  const toTop = to.parentElement\n  const toGrp = toTop.parentNode\n  const toChilren = toTop.parentNode.parentNode\n  toChilren.insertBefore(fromGrp, toGrp)\n  this.processPrimaryNode(fromTop.parentElement,fromObj)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'moveNodeBefore',\n    obj: { fromObj, toObj, originParentId },\n  })\n}\n\n/**\n * @function\n * @instance\n * @name moveNodeAfter\n * @memberof NodeOperation\n * @description Move a node and become next node of another node.\n * @param {TargetElement} from\n * @param {TargetElement} to\n * @example\n * moveNodeAfter(E('bd4313fbac402842'),E('bd4313fbac402839'))\n */\nexport const moveNodeAfter = function(from, to) {\n  const fromObj = from.nodeObj\n  const toObj = to.nodeObj\n  const originParentId = fromObj.parent.id\n  moveNodeAfterObj(fromObj, toObj)\n  addParentLink(this.nodeData)\n  const fromTop = from.parentElement\n  const fromGrp = fromTop.parentNode\n  const toTop = to.parentElement\n  const toGrp = toTop.parentNode\n  const toChilren = toTop.parentNode.parentNode\n  toChilren.insertBefore(fromGrp, toGrp.nextSibling)\n  this.processPrimaryNode(fromTop.parentElement,fromObj)\n  this.linkDiv()\n  this.bus.fire('operation', {\n    name: 'moveNodeAfter',\n    obj: { fromObj, toObj, originParentId },\n  })\n}\n\n/**\n * @function\n * @instance\n * @name beginEdit\n * @memberof NodeOperation\n * @description Begin to edit the target node.\n * @param {TargetElement} el - Target element return by E('...'), default value: currentTarget.\n * @example\n * beginEdit(E('bd4313fbac40284b'))\n */\nexport const beginEdit = function(el) {\n  const nodeEle = el || this.currentNode\n  if (!nodeEle) return\n  this.createInputDiv(nodeEle)\n}\n\nexport const setNodeTopic = function(tpc, topic) {\n  tpc.childNodes[0].textContent = topic\n  tpc.nodeObj.topic = topic\n  this.linkDiv()\n}\n\n// Judge L or R\nexport function processPrimaryNode(primaryNode, obj) {\n  if (this.direction === LEFT) {\n    primaryNode.className = 'lhs'\n  } else if (this.direction === RIGHT) {\n    primaryNode.className = 'rhs'\n  } else if (this.direction === SIDE) {\n    const l = $d.querySelectorAll('.lhs').length\n    const r = $d.querySelectorAll('.rhs').length\n    if (l <= r) {\n      primaryNode.className = 'lhs'\n      obj.direction = LEFT\n    } else {\n      primaryNode.className = 'rhs'\n      obj.direction = RIGHT\n    }\n  }\n}\n","import {\n  LinkDragMoveHelper,\n  generateUUID,\n  getArrowPoints,\n  calcP1,\n  calcP4,\n} from './utils/index'\nimport { createSvgGroup } from './utils/svg'\n\n// TODO Link label\nexport const createLink = function(from, to, isInitPaint, obj) {\n  const map = this.map.getBoundingClientRect()\n  if (!from || !to) {\n    return // not expand\n  }\n  const pfrom = from.getBoundingClientRect()\n  const pto = to.getBoundingClientRect()\n  const fromCenterX = (pfrom.x + pfrom.width / 2 - map.x) / this.scaleVal\n  const fromCenterY = (pfrom.y + pfrom.height / 2 - map.y) / this.scaleVal\n  const toCenterX = (pto.x + pto.width / 2 - map.x) / this.scaleVal\n  const toCenterY = (pto.y + pto.height / 2 - map.y) / this.scaleVal\n\n  let p2x, p2y, p3x, p3y\n  if (isInitPaint) {\n    p2x = fromCenterX + obj.delta1.x\n    p2y = fromCenterY + obj.delta1.y\n    p3x = toCenterX + obj.delta2.x\n    p3y = toCenterY + obj.delta2.y\n  } else {\n    if ((fromCenterY + toCenterY) / 2 - fromCenterY <= pfrom.height / 2) {\n      // the situation that two div is too close\n      p2x = (pfrom.x + pfrom.width - map.x) / this.scaleVal + 100\n      p2y = fromCenterY\n      p3x = (pto.x + pto.width - map.x) / this.scaleVal + 100\n      p3y = toCenterY\n    } else {\n      p2x = (fromCenterX + toCenterX) / 2\n      p2y = (fromCenterY + toCenterY) / 2\n      p3x = (fromCenterX + toCenterX) / 2\n      p3y = (fromCenterY + toCenterY) / 2\n    }\n  }\n\n  const fromData = {\n    cx: fromCenterX,\n    cy: fromCenterY,\n    w: pfrom.width,\n    h: pfrom.height,\n  }\n  const toData = {\n    cx: toCenterX,\n    cy: toCenterY,\n    w: pto.width,\n    h: pto.height,\n  }\n\n  const p1 = calcP1(fromData, p2x, p2y)\n  const p1x = p1.x\n  const p1y = p1.y\n\n  const p4 = calcP4(toData, p3x, p3y)\n  const p4x = p4.x\n  const p4y = p4.y\n\n  const arrowPoint = getArrowPoints(p3x, p3y, p4x, p4y)\n\n  // TODO link lable\n  // const halfx = p1x / 8 + (p2x * 3) / 8 + (p3x * 3) / 8 + p4x / 8\n  // const halfy = p1y / 8 + (p2y * 3) / 8 + (p3y * 3) / 8 + p4y / 8\n\n  const newSvgGroup = createSvgGroup(\n    `M ${p1x} ${p1y} C ${p2x} ${p2y} ${p3x} ${p3y} ${p4x} ${p4y}`,\n    `M ${arrowPoint.x1} ${arrowPoint.y1} L ${p4x} ${p4y} L ${arrowPoint.x2} ${arrowPoint.y2}`\n  )\n\n  let newLinkObj\n  if (isInitPaint) {\n    newLinkObj = {\n      id: obj.id,\n      label: '',\n      from,\n      to,\n      delta1: {\n        x: p2x - fromCenterX,\n        y: p2y - fromCenterY,\n      },\n      delta2: {\n        x: p3x - toCenterX,\n        y: p3y - toCenterY,\n      },\n    }\n    // overwrite\n    this.linkData[obj.id] = newLinkObj\n    newSvgGroup.linkObj = newLinkObj\n    newSvgGroup.dataset.linkid = obj.id\n  } else {\n    newLinkObj = {\n      id: generateUUID(),\n      label: '',\n      from,\n      to,\n      delta1: {\n        x: p2x - fromCenterX,\n        y: p2y - fromCenterY,\n      },\n      delta2: {\n        x: p3x - toCenterX,\n        y: p3y - toCenterY,\n      },\n    }\n    // new\n    this.linkData[newLinkObj.id] = newLinkObj\n    newSvgGroup.linkObj = newLinkObj\n    newSvgGroup.dataset.linkid = newLinkObj.id\n    this.currentLink = newSvgGroup\n  }\n  this.linkSvgGroup.appendChild(newSvgGroup)\n  if (!isInitPaint) { this.showLinkController(p2x, p2y, p3x, p3y, newLinkObj, fromData, toData) }\n}\n\nexport const removeLink = function(linkSvg) {\n  let link\n  if (linkSvg) {\n    link = linkSvg\n  } else {\n    link = this.currentLink\n  }\n  if (!link) return\n  console.log(link)\n  this.hideLinkController()\n  const id = link.linkObj.id\n  console.log(id)\n  delete this.linkData[id]\n  link.remove()\n  link = null\n}\nexport const selectLink = function(targetElement) {\n  this.currentLink = targetElement\n  const obj = targetElement.linkObj\n  const from = obj.from\n  const to = obj.to\n\n  const map = this.map.getBoundingClientRect()\n  const pfrom = from.getBoundingClientRect()\n  const pto = to.getBoundingClientRect()\n  const fromCenterX = (pfrom.x + pfrom.width / 2 - map.x) / this.scaleVal\n  const fromCenterY = (pfrom.y + pfrom.height / 2 - map.y) / this.scaleVal\n  const toCenterX = (pto.x + pto.width / 2 - map.x) / this.scaleVal\n  const toCenterY = (pto.y + pto.height / 2 - map.y) / this.scaleVal\n\n  const fromData = {\n    cx: fromCenterX,\n    cy: fromCenterY,\n    w: pfrom.width,\n    h: pfrom.height,\n  }\n  const toData = {\n    cx: toCenterX,\n    cy: toCenterY,\n    w: pto.width,\n    h: pto.height,\n  }\n\n  const p2x = fromCenterX + obj.delta1.x\n  const p2y = fromCenterY + obj.delta1.y\n  const p3x = toCenterX + obj.delta2.x\n  const p3y = toCenterY + obj.delta2.y\n\n  this.showLinkController(p2x, p2y, p3x, p3y, obj, fromData, toData)\n}\nexport const hideLinkController = function() {\n  this.linkController.style.display = 'none'\n  this.P2.style.display = 'none'\n  this.P3.style.display = 'none'\n}\nexport const showLinkController = function(\n  p2x,\n  p2y,\n  p3x,\n  p3y,\n  linkObj,\n  fromData,\n  toData\n) {\n  this.linkController.style.display = 'initial'\n  this.P2.style.display = 'initial'\n  this.P3.style.display = 'initial'\n\n  const p1 = calcP1(fromData, p2x, p2y)\n  let p1x = p1.x\n  let p1y = p1.y\n\n  const p4 = calcP4(toData, p3x, p3y)\n  let p4x = p4.x\n  let p4y = p4.y\n\n  this.P2.style.cssText = `top:${p2y}px;left:${p2x}px;`\n  this.P3.style.cssText = `top:${p3y}px;left:${p3x}px;`\n  this.line1.setAttribute('x1', p1x)\n  this.line1.setAttribute('y1', p1y)\n  this.line1.setAttribute('x2', p2x)\n  this.line1.setAttribute('y2', p2y)\n  this.line2.setAttribute('x1', p3x)\n  this.line2.setAttribute('y1', p3y)\n  this.line2.setAttribute('x2', p4x)\n  this.line2.setAttribute('y2', p4y)\n\n  if (this.helper1) {\n    this.helper1.destory(this.map)\n    this.helper2.destory(this.map)\n  }\n\n  this.helper1 = new LinkDragMoveHelper(this.P2)\n  this.helper2 = new LinkDragMoveHelper(this.P3)\n\n  this.helper1.init(this.map, (deltaX, deltaY) => {\n    /**\n     * user will control bezier with p2 & p3\n     * p1 & p4 is depend on p2 & p3\n     */\n    p2x = p2x - deltaX / this.scaleVal\n    p2y = p2y - deltaY / this.scaleVal\n\n    const p1 = calcP1(fromData, p2x, p2y)\n    p1x = p1.x\n    p1y = p1.y\n\n    this.P2.style.top = p2y + 'px'\n    this.P2.style.left = p2x + 'px'\n    this.currentLink.children[0].setAttribute(\n      'd',\n      `M ${p1x} ${p1y} C ${p2x} ${p2y} ${p3x} ${p3y} ${p4x} ${p4y}`\n    )\n    this.line1.setAttribute('x1', p1x)\n    this.line1.setAttribute('y1', p1y)\n    this.line1.setAttribute('x2', p2x)\n    this.line1.setAttribute('y2', p2y)\n    linkObj.delta1.x = p2x - fromData.cx\n    linkObj.delta1.y = p2y - fromData.cy\n  })\n\n  this.helper2.init(this.map, (deltaX, deltaY) => {\n    p3x = p3x - deltaX / this.scaleVal\n    p3y = p3y - deltaY / this.scaleVal\n\n    const p4 = calcP4(toData, p3x, p3y)\n    p4x = p4.x\n    p4y = p4.y\n    const arrowPoint = getArrowPoints(p3x, p3y, p4x, p4y)\n\n    this.P3.style.top = p3y + 'px'\n    this.P3.style.left = p3x + 'px'\n    this.currentLink.children[0].setAttribute(\n      'd',\n      `M ${p1x} ${p1y} C ${p2x} ${p2y} ${p3x} ${p3y} ${p4x} ${p4y}`\n    )\n    this.currentLink.children[1].setAttribute(\n      'd',\n      `M ${arrowPoint.x1} ${arrowPoint.y1} L ${p4x} ${p4y} L ${arrowPoint.x2} ${arrowPoint.y2}`\n    )\n    this.line2.setAttribute('x1', p3x)\n    this.line2.setAttribute('y1', p3y)\n    this.line2.setAttribute('x2', p4x)\n    this.line2.setAttribute('y2', p4y)\n    linkObj.delta2.x = p3x - toData.cx\n    linkObj.delta2.y = p3y - toData.cy\n  })\n}\n","import { createPath, createMainPath, createLinkSvg } from './utils/svg'\nimport { findEle, Expander } from './utils/dom'\nimport {\n  SIDE,\n  GAP,\n  TURNPOINT_R,\n  PRIMARY_NODE_HORIZONTAL_GAP,\n  PRIMARY_NODE_VERTICAL_GAP,\n} from './const'\n\n/**\n * Link nodes with svg,\n * only link specific node if `primaryNode` is present\n *\n * procedure:\n * 1. calculate position of primary nodes\n * 2. layout primary node, generate primary link\n * 3. generate links inside primary node\n * 4. generate custom link\n * @param {object} primaryNode process the specific primary node only\n */\nexport default function linkDiv(primaryNode) {\n  var primaryNodeHorizontalGap = this.primaryNodeHorizontalGap || PRIMARY_NODE_HORIZONTAL_GAP\n  var primaryNodeVerticalGap = this.primaryNodeVerticalGap || PRIMARY_NODE_VERTICAL_GAP\n  console.time('linkDiv')\n  const root = this.root\n  root.style.cssText = `top:${10000 - root.offsetHeight / 2}px;left:${10000 - root.offsetWidth / 2}px;`\n  const primaryNodeList = this.box.children\n  this.svg2nd.innerHTML = ''\n\n  // 1. calculate position of primary nodes\n  let totalHeight = 0\n  let shortSide: string // l or r\n  let shortSideGap = 0 // balance heigt of two side\n  let currentOffsetL = 0 // left side total offset\n  let currentOffsetR = 0 // right side total offset\n  let totalHeightL = 0\n  let totalHeightR = 0\n  let base: number\n\n  if (this.direction === SIDE) {\n    let countL = 0\n    let countR = 0\n    let totalHeightLWithoutGap = 0\n    let totalHeightRWithoutGap = 0\n    for (let i = 0; i < primaryNodeList.length; i++) {\n      const el = primaryNodeList[i]\n      if (el.className === 'lhs') {\n        totalHeightL += el.offsetHeight + primaryNodeVerticalGap\n        totalHeightLWithoutGap += el.offsetHeight\n        countL += 1\n      } else {\n        totalHeightR += el.offsetHeight + primaryNodeVerticalGap\n        totalHeightRWithoutGap += el.offsetHeight\n        countR += 1\n      }\n    }\n    if (totalHeightL > totalHeightR) {\n      base = 10000 - Math.max(totalHeightL) / 2\n      shortSide = 'r'\n      shortSideGap = (totalHeightL - totalHeightRWithoutGap) / (countR - 1)\n    } else {\n      base = 10000 - Math.max(totalHeightR) / 2\n      shortSide = 'l'\n      shortSideGap = (totalHeightR - totalHeightLWithoutGap) / (countL - 1)\n    }\n  } else {\n    for (let i = 0; i < primaryNodeList.length; i++) {\n      const el = primaryNodeList[i]\n      totalHeight += el.offsetHeight + primaryNodeVerticalGap\n    }\n    base = 10000 - totalHeight / 2\n  }\n\n  // 2. layout primary node, generate primary link\n  let primaryPath = ''\n  const alignRight = 10000 - root.offsetWidth / 2 - primaryNodeHorizontalGap+60\n  const alignLeft = 10000 + root.offsetWidth / 2 + primaryNodeHorizontalGap-60\n  for (let i = 0; i < primaryNodeList.length; i++) {\n    let x2, y2\n    const el = primaryNodeList[i]\n    const elOffsetH = el.offsetHeight\n    let xMiddle=root.offsetLeft-10\n    if (el.className === 'lhs') {\n      el.style.top = base + currentOffsetL + 'px'\n      el.style.left = alignRight - el.offsetWidth + 'px'\n      x2 = alignRight - 15 // padding\n      y2 = base + currentOffsetL + elOffsetH / 2\n\n      // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d#path_commands\n      let LEFT = 10000\n      if (this.primaryLinkStyle === 2) {\n        if (this.direction === SIDE) {\n          LEFT = 10000 - root.offsetWidth / 6\n        }\n        if (y2 < 10000) {\n          primaryPath += `M ${LEFT} 10000 V ${y2 + 20} C ${LEFT} ${y2} ${LEFT} ${y2} ${LEFT - 20} ${y2} H ${x2}`\n        } else {\n          primaryPath += `M ${LEFT} 10000 V ${y2 - 20} C ${LEFT} ${y2} ${LEFT} ${y2} ${LEFT - 20} ${y2} H ${x2}`\n        }\n      } else {\n        primaryPath += `M 10000 10000 H ${xMiddle} V ${y2} H ${x2}`\n      }\n\n      if (shortSide === 'l') {\n        currentOffsetL += elOffsetH + shortSideGap\n      } else {\n        currentOffsetL += elOffsetH + primaryNodeVerticalGap\n      }\n    } else {\n      xMiddle=root.offsetLeft+root.offsetWidth+10\n      el.style.top = base + currentOffsetR + 'px'\n      el.style.left = alignLeft + 'px'\n      x2 = alignLeft + 15 // padding\n      y2 = base + currentOffsetR + elOffsetH / 2\n\n      let LEFT = 10000\n      if (this.primaryLinkStyle === 2) {\n        if (this.direction === SIDE) {\n          LEFT = 10000 + root.offsetWidth / 6\n        }\n        if (y2 < 10000) {\n          primaryPath += `M ${LEFT} 10000 V ${y2 + 20} C ${LEFT} ${y2} ${LEFT} ${y2} ${LEFT + 20} ${y2} H ${x2}`\n        } else {\n          primaryPath += `M ${LEFT} 10000 V ${y2 - 20} C ${LEFT} ${y2} ${LEFT} ${y2} ${LEFT + 20} ${y2} H ${x2}`\n        }\n      } else {\n        primaryPath += `M 10000 10000 H ${xMiddle} V ${y2} H ${x2}`\n      }\n      if (shortSide === 'r') {\n        currentOffsetR += elOffsetH + shortSideGap\n      } else {\n        currentOffsetR += elOffsetH + primaryNodeVerticalGap\n      }\n    }\n    // set position of expander\n    const expander = el.children[0].children[1]\n    if (expander) {\n      expander.style.top =\n        (expander.parentNode.offsetHeight - expander.offsetHeight) / 2 + 'px'\n      if (el.className === 'lhs') {\n        expander.style.left = -10 + 'px'\n      } else {\n        expander.style.left = expander.parentNode.offsetWidth - 10 + 'px'\n      }\n    }\n  }\n  this.svg2nd.appendChild(createMainPath(primaryPath))\n\n  // 3. generate link inside primary node\n  for (let i = 0; i < primaryNodeList.length; i++) {\n    const el = primaryNodeList[i]\n    if (primaryNode && primaryNode !== primaryNodeList[i]) {\n      continue\n    }\n    if (el.childElementCount) {\n      const svg = createLinkSvg('svg3rd')\n      // svg tag name is lower case\n      if (el.lastChild.tagName === 'svg') el.lastChild.remove()\n      el.appendChild(svg)\n      const parent = el.children[0]\n      const children = el.children[1].children\n      path = ''\n      loopChildren(children, parent, true)\n      svg.appendChild(createPath(path))\n    }\n  }\n\n  // 4. generate custom link\n  this.linkSvgGroup.innerHTML = ''\n  for (const prop in this.linkData) {\n    const link = this.linkData[prop]\n    if (typeof link.from === 'string') {\n      this.createLink(findEle(link.from), findEle(link.to), true, link)\n    } else {\n      this.createLink(\n        findEle(link.from.nodeObj.id),\n        findEle(link.to.nodeObj.id),\n        true,\n        link\n      )\n    }\n  }\n  console.timeEnd('linkDiv')\n}\n\nlet path = ''\nfunction loopChildren(children: HTMLCollection, parent: HTMLElement, first?: boolean) {\n  const parentOT = parent.offsetTop\n  const parentOL = parent.offsetLeft\n  const parentOW = parent.offsetWidth\n  const parentOH = parent.offsetHeight\n  for (let i = 0; i < children.length; i++) {\n    const child: HTMLElement = children[i] as HTMLElement\n    const childT: HTMLElement = child.children[0] as HTMLElement // t tag inside the child dom\n    const childTOT = childT.offsetTop\n    const childTOH = childT.offsetHeight\n    let y1: number\n    if (first) {\n      y1 = parentOT + parentOH / 2\n    } else {\n      y1 = parentOT + parentOH\n    }\n    const y2 = childTOT + childTOH\n    let x1: number, x2: number, xMiddle: number\n    const direction = child.offsetParent.className\n    if (direction === 'lhs') {\n      x1 = parentOL + GAP\n      xMiddle = parentOL\n      x2 = parentOL - childT.offsetWidth\n\n      if (\n        childTOT + childTOH < parentOT + parentOH / 2 + 50 &&\n        childTOT + childTOH > parentOT + parentOH / 2 - 50\n      ) {\n        // 相差+-50内直接直线\n        path += `M ${x1} ${y1} H ${xMiddle} V ${y2} H ${x2}`\n      } else if (childTOT + childTOH >= parentOT + parentOH / 2) {\n        // 子底部低于父中点\n        path += `M ${x1} ${y1} H ${xMiddle} V ${y2 } H ${x2}`\n      } else {\n        // 子底部高于父中点\n        path += `M ${x1} ${y1} H ${xMiddle} V ${y2 } H ${x2}`\n      }\n    } else if (direction === 'rhs') {\n      x1 = parentOL + parentOW - GAP\n      xMiddle = parentOL + parentOW\n      x2 = parentOL + parentOW + childT.offsetWidth\n\n      if (\n        childTOT + childTOH < parentOT + parentOH / 2 + 50 &&\n        childTOT + childTOH > parentOT + parentOH / 2 - 50\n      ) {\n        if(child.tagName==='SMY'){\n          console.log('1111')\n          // smypath+=`M ${x1} ${y1} H ${xMiddle} V ${y2} H ${x2}`\n        }else{\n          path += `M ${x1} ${y1} H ${xMiddle} V ${y2} H ${x2}`\n        }\n        \n      } else if (childTOT + childTOH >= parentOT + parentOH / 2) {\n        path += `M ${x1} ${y1} H ${xMiddle} V ${y2 } H ${x2}`\n      } else {\n        path += `M ${x1} ${y1} H ${xMiddle} V ${y2 } H ${x2}`\n      }\n    }\n\n    const expander = childT.children[1] as Expander\n    if (expander) {\n      expander.style.top =\n        (childT.offsetHeight - expander.offsetHeight) / 2 + 'px'\n      if (direction === 'lhs') {\n        expander.style.left = -10 + 'px'\n      } else if (direction === 'rhs') {\n        expander.style.left = childT.offsetWidth - 10 + 'px'\n      }\n      // this property is added in the layout phase\n      if (!expander.expanded) continue\n    } else {\n      // expander not exist\n      continue\n    }\n    // traversal\n    const nextChildren = child.children[1].children\n    if (nextChildren.length > 0) loopChildren(nextChildren, childT)\n  }\n}\n","import { dragMoveHelper } from './utils/index'\nexport default function(mind) {\n  mind.map.addEventListener('click', e => {\n    // if (dragMoveHelper.afterMoving) return\n    // e.preventDefault() // can cause a tag don't work\n    if (e.target.nodeName === 'EPD') {\n      mind.expandNode(e.target.previousSibling)\n    } else if (\n      e.target.parentElement.nodeName === 'T' ||\n      e.target.parentElement.nodeName === 'ROOT'\n    ) {\n      mind.selectNode(e.target, false, e)\n    } else if (e.target.nodeName === 'path') {\n      if (e.target.parentElement.nodeName === 'g') {\n        mind.selectLink(e.target.parentElement)\n      }\n    } else if (e.target.className === 'circle') {\n      // skip circle\n    } else {\n      mind.unselectNode()\n      mind.hideLinkController()\n    }\n  })\n\n  mind.map.addEventListener('dblclick', e => {\n    e.preventDefault()\n    if (!mind.editable) return\n    if (\n      e.target.parentElement.nodeName === 'T' ||\n      e.target.parentElement.nodeName === 'ROOT'\n    ) {\n      mind.beginEdit(e.target)\n    }else if(e.target.className!=='content'){\n      let node = e.target\n      while(node.parentElement){\n        node=node.parentElement\n        if(node.nodeName === 'TPC'){\n          mind.beginEdit(node)\n          break\n        }\n      }\n    }\n  })\n\n  /**\n   * drag and move\n   */\n  mind.map.addEventListener('mousemove', e => {\n    // click trigger mousemove in windows chrome\n    // the 'true' is a string\n    if (e.target.contentEditable !== 'true') {\n      dragMoveHelper.onMove(e, mind.container)\n    }\n  })\n  mind.map.addEventListener('mousedown', e => {\n    if (e.target.contentEditable !== 'true') {\n      dragMoveHelper.afterMoving = false\n      dragMoveHelper.mousedown = true\n    }\n  })\n  mind.map.addEventListener('mouseleave', e => {\n    dragMoveHelper.clear()\n  })\n  mind.map.addEventListener('mouseup', e => {\n    dragMoveHelper.clear()\n  })\n\n  mind.map.addEventListener('wheel', e => {\n    // e.preventDefault()\n  })\n}\n","const cn = {\n  addChild: '插入子节点',\n  addParent: '插入父节点',\n  addSibling: '插入同级节点',\n  removeNode: '删除节点',\n  focus: '专注',\n  cancelFocus: '取消专注',\n  moveUp: '上移',\n  moveDown: '下移',\n  // link: '连接',\n  clickTips: '请点击目标节点',\n\n  font: '文字',\n  background: '背景',\n  tag: '标签',\n  icon: '图标',\n  tagsSeparate: '多个标签半角逗号分隔',\n  iconsSeparate: '多个图标半角逗号分隔',\n  link:'连线',\n  nodeLink:'主题内超链接',\n  hyperlink:'超链接',\n  linkSeparate:'链接地址,多个链接半角逗号分隔',\n  remark:'备注',\n  reamrkSeparate:'内容' ,\n  summary:'概要'\n}\nexport default {\n  cn,\n  zh_CN: cn,\n  zh_TW: {\n    addChild: '插入子節點',\n    addParent: '插入父節點',\n    addSibling: '插入同級節點',\n    removeNode: '刪除節點',\n    focus: '專注',\n    cancelFocus: '取消專注',\n    moveUp: '上移',\n    moveDown: '下移',\n    link: '連接',\n    clickTips: '請點擊目標節點',\n\n    font: '文字',\n    background: '背景',\n    tag: '標簽',\n    icon: '圖標',\n    tagsSeparate: '多個標簽半角逗號分隔',\n    iconsSeparate: '多個圖標半角逗號分隔',\n  },\n  en: {\n    addChild: 'Add child',\n    addParent: 'Add parent',\n    addSibling: 'Add sibling',\n    removeNode: 'Remove node',\n    focus: 'Focus Mode',\n    cancelFocus: 'Cancel Focus Mode',\n    moveUp: 'Move up',\n    moveDown: 'Move down',\n    link: 'Link',\n    clickTips: 'Please click the target node',\n\n    font: 'Font',\n    background: 'Background',\n    tag: 'Tag',\n    icon: 'Icon',\n    tagsSeparate: 'Separate tags by comma',\n    iconsSeparate: 'Separate icons by comma',\n    hyperlink:'hyperlink',\n    linkSeparate:'link address',\n    remark:'remark',\n    reamrkSeparate:'content',\n    summary:'summary',\n    nodeLink:'inner link'\n  },\n  ja: {\n    addChild: '子ノードを追加する',\n    addParent: '親ノードを追加します',\n    addSibling: '兄弟ノードを追加する',\n    removeNode: 'ノードを削除',\n    focus: '集中',\n    cancelFocus: '集中解除',\n    moveUp: '上へ移動',\n    moveDown: '下へ移動',\n    link: 'コネクト',\n    clickTips: 'ターゲットノードをクリックしてください',\n\n    font: 'フォント',\n    background: 'バックグラウンド',\n    tag: 'タグ',\n    icon: 'アイコン',\n    tagsSeparate: '複数タグはカンマ区切り',\n    iconsSeparate: '複数アイコンはカンマ区切り',\n  },\n  pt: {\n    addChild: 'Adicionar item filho',\n    addParent: 'Adicionar item pai',\n    addSibling: 'Adicionar item irmao',\n    removeNode: 'Remover item',\n    focus: 'Modo Foco',\n    cancelFocus: 'Cancelar Modo Foco',\n    moveUp: 'Mover para cima',\n    moveDown: 'Mover para baixo',\n    link: 'Link',\n    clickTips: 'Favor clicar no item alvo',\n\n    font: 'Fonte',\n    background: 'Cor de fundo',\n    tag: 'Tag',\n    icon: 'Icone',\n    tagsSeparate: 'Separe tags por virgula',\n    iconsSeparate: 'Separe icones por virgula',\n  },\n}\n","import i18n from '../i18n'\nimport linkDiv from '../linkDiv'\nimport { shapeTpc } from '../utils/dom'\nimport { encodeHTML } from '../utils/index'\n\nexport default function(mind, option) {\n  const createTips = words => {\n    const div = document.createElement('div')\n    div.innerText = words\n    div.style.cssText = 'position:absolute;bottom:20px;left:50%;transform:translateX(-50%);'\n    return div\n  }\n  const createLi = (id, name, keyname) => {\n    const li = document.createElement('li')\n    li.id = id\n    li.innerHTML = `<span>${encodeHTML(name)}</span><span>${encodeHTML(keyname)}</span>`\n    return li\n  }\n  const locale = i18n[mind.locale] ? mind.locale : 'en'\n\n  const add_child = createLi('cm-add_child', i18n[locale].addChild, 'tab')\n  const add_parent = createLi('cm-add_parent', i18n[locale].addParent, '')\n  const add_sibling = createLi('cm-add_sibling', i18n[locale].addSibling, 'enter')\n  const remove_child = createLi(\n    'cm-remove_child',\n    i18n[locale].removeNode,\n    'delete'\n  )\n  const focus = createLi('cm-fucus', i18n[locale].focus, '')\n  const unfocus = createLi('cm-unfucus', i18n[locale].cancelFocus, '')\n  const up = createLi('cm-up', i18n[locale].moveUp, 'PgUp')\n  const down = createLi('cm-down', i18n[locale].moveDown, 'Pgdn')\n  const link = createLi('cm-link', i18n[locale].link, '')\n  const nodeLink = createLi('cm-nodelink', i18n[locale].nodeLink, '')\n  const summary = createLi('cm-summary', i18n[locale].summary, '')\n\n  const menuUl = document.createElement('ul')\n  menuUl.className = 'menu-list'\n  menuUl.appendChild(add_child)\n  menuUl.appendChild(add_parent)\n  menuUl.appendChild(add_sibling)\n  menuUl.appendChild(remove_child)\n  if (!option || option.focus) {\n    menuUl.appendChild(focus)\n    menuUl.appendChild(unfocus)\n  }\n  menuUl.appendChild(up)\n  menuUl.appendChild(down)\n  if (!option || option.link) {\n    menuUl.appendChild(link)\n    menuUl.appendChild(nodeLink)\n  }\n  menuUl.appendChild(summary)\n  if (option && option.extend) {\n    for (let i = 0; i < option.extend.length; i++) {\n      const item = option.extend[i]\n      const dom = createLi(item.name, item.name, item.key || '')\n      menuUl.appendChild(dom)\n      dom.onclick = e => {\n        item.onclick(e)\n      }\n    }\n  }\n  const menuContainer = document.createElement('cmenu')\n  menuContainer.appendChild(menuUl)\n  menuContainer.hidden = true\n\n  mind.container.append(menuContainer)\n  let isRoot = true\n  mind.container.oncontextmenu = function(e) {\n    e.preventDefault()\n    if (!mind.editable) return\n    // console.log(e.pageY, e.screenY, e.clientY)\n    const target = e.target\n    if (target.tagName === 'TPC') {\n      if (target.parentElement.tagName === 'ROOT') {\n        isRoot = true\n      } else {\n        isRoot = false\n      }\n      if (isRoot) {\n        focus.className = 'disabled'\n        up.className = 'disabled'\n        down.className = 'disabled'\n        add_sibling.className = 'disabled'\n        remove_child.className = 'disabled'\n      } else {\n        focus.className = ''\n        up.className = ''\n        down.className = ''\n        add_sibling.className = ''\n        remove_child.className = ''\n      }\n      mind.selectNode(target)\n      menuContainer.hidden = false\n      const height = menuUl.offsetHeight\n      const width = menuUl.offsetWidth\n      if (height + e.clientY > window.innerHeight) {\n        menuUl.style.top = ''\n        menuUl.style.bottom = '0px'\n      } else {\n        menuUl.style.bottom = ''\n        menuUl.style.top = e.clientY + 15 + 'px'\n      }\n      if (width + e.clientX > window.innerWidth) {\n        menuUl.style.left = ''\n        menuUl.style.right = '0px'\n      } else {\n        menuUl.style.right = ''\n        menuUl.style.left = e.clientX + 10 + 'px'\n      }\n    }\n  }\n\n  menuContainer.onclick = e => {\n    if (e.target === menuContainer) menuContainer.hidden = true\n  }\n\n  add_child.onclick = e => {\n    mind.addChild()\n    menuContainer.hidden = true\n  }\n  summary.onclick = e => {\n    mind.addSummary()\n    menuContainer.hidden = true\n  }\n  add_parent.onclick = e => {\n    mind.insertParent()\n    menuContainer.hidden = true\n  }\n  add_sibling.onclick = e => {\n    if (isRoot) return\n    mind.insertSibling()\n    menuContainer.hidden = true\n  }\n  remove_child.onclick = e => {\n    if (isRoot) return\n    mind.removeNode()\n    menuContainer.hidden = true\n  }\n  focus.onclick = e => {\n    if (isRoot) return\n    mind.focusNode(mind.currentNode)\n    menuContainer.hidden = true\n  }\n  unfocus.onclick = e => {\n    mind.cancelFocus()\n    menuContainer.hidden = true\n  }\n  up.onclick = e => {\n    if (isRoot) return\n    mind.moveUpNode()\n    menuContainer.hidden = true\n  }\n  down.onclick = e => {\n    if (isRoot) return\n    mind.moveDownNode()\n    menuContainer.hidden = true\n  }\n  link.onclick = e => {\n    menuContainer.hidden = true\n    const from = mind.currentNode\n    const tips = createTips(i18n[locale].clickTips)\n    mind.container.appendChild(tips)\n    mind.map.addEventListener(\n      'click',\n      e => {\n        e.preventDefault()\n        tips.remove()\n        if (\n          e.target.parentElement.nodeName === 'T' ||\n          e.target.parentElement.nodeName === 'ROOT'\n        ) {\n          const to =mind.currentNode\n          mind.createLink(from,to)\n        } else {\n          console.log('取消连接')\n        }\n      },\n      {\n        once: true,\n      }\n    )\n  }\n  nodeLink.onclick = e => {\n    menuContainer.hidden = true\n    const from = mind.currentNode\n    const tips = createTips(i18n[locale].clickTips)\n    mind.container.appendChild(tips)\n    mind.map.addEventListener(\n      'click',\n      e => {\n        e.preventDefault()\n        tips.remove()\n        if (\n          e.target.parentElement.nodeName === 'T' ||\n          e.target.parentElement.nodeName === 'ROOT'\n        ) {\n          const to =mind.currentNode\n          if(!from.nodeObj.linkJump) from.nodeObj.linkJump=[]\n          from.nodeObj.linkJump.push({\n              toId:to.nodeObj.id,\n              title:to.nodeObj.topic\n            }\n          )\n          mind.shapeTpc(from,from.nodeObj)\n          mind.linkDiv()\n        } else {\n          console.log('取消连接')\n        }\n      },\n      {\n        once: true,\n      }\n    )\n  }\n}\n","import { NodeObj } from \"..\"\nimport { moveToNode } from \"../utils/dom\"\n\nfunction queryList(nodeData:NodeObj,cnt:number):string{\n    let res:string=''\n    for(let i =0;i<nodeData.children?.length;i++){\n        // res+=queryList(nodeData.children[i])`\n        res +=`<li class=\"sidebar-links\">${queryList(nodeData.children[i],cnt+1)}</li>`\n    }\n    if(!nodeData?.children||!nodeData.children.length){\n        return `<p class=\"sidebar-title\" id=\"sidebar${nodeData.id}\"><span class=\"arrow\"></span><span>${nodeData.topic}</span></p>`\n    }else{\n        return `<p class=\"sidebar-title\" id=\"sidebar${nodeData.id}\"><span class=\"arrow ${cnt<2?'down':'right'}\"></span><span>${nodeData.topic}</span></p><ul class=\"sidebar-heading open ${cnt<2?'':'hidden'}\">${res}</ul>`\n    }\n    \n}\n\nexport function updateSidebar(mind,sidebar:HTMLElement){\n    const nodeData=mind.nodeData\n    sidebar.innerHTML = `${queryList(nodeData,0)}`\n    sidebar.querySelectorAll('.sidebar-title').forEach((e:HTMLElement)=>{\n        e.onclick=()=>{\n              const down = e.querySelector('.down')\n              const right = e.querySelector('.right')\n              const curActive=mind.container.querySelector('.sidebar-title.active')\n              curActive?.classList.remove('active')\n              if(down){\n                e.parentElement.querySelector('ul').classList.add('hidden')\n                down.classList.replace('down','right')\n              }else if(right){\n                e.parentElement.querySelector('ul').classList.remove('hidden')\n                right.classList.replace('right','down')\n              }\n              e.classList.add('active')\n              moveToNode.call(mind,e.id.replace('sidebar',''))\n        }\n    })\n}\n\nexport default function(mind){\n    const sidebar = document.createElement('sidebar')\n    const nodeData=mind.nodeData\n    sidebar.innerHTML = `${queryList(nodeData,0)}`\n    mind.container.append(sidebar)\n}\n","import { expandNodeChild, getAllDataWithAutoHide } from \"../interact\"\nimport { updateSidebar } from \"./sidebar\"\n\nconst createButton = (id, name) => {\n  const button = document.createElement('span')\n  button.id = id\n  button.innerHTML = `<svg class=\"icon\" aria-hidden=\"true\">\n    <use xlink:href=\"#icon-${name}\"></use>\n  </svg>`\n  return button\n}\n\nlet timer = null;\nfunction debounce (fun,wait) {\n  return function () {\n  \tconst argu = arguments;\n  \t// 事件触发，如果之前有等待的事件，则清空计时，重新进行事件等待执行\n    if (timer) {\n      clearTimeout(timer);\n    }\n    timer = setTimeout(function () {\n      fun.apply(this, argu);\n    }, wait);\n  }\n}\n\nfunction createToolBarRBContainer(mind) {\n  const toolBarRBContainer = document.createElement('toolbar')\n  const fc = createButton('fullscreen', 'full')\n  const gc = createButton('toCenter', 'living')\n  const zo = createButton('zoomout', 'move')\n  const zi = createButton('zoomin', 'add')\n  // 上传图标: <svg t=\"1662362270319\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2591\" width=\"200\" height=\"200\"><path d=\"M324.6592 352.13312c7.1168 0 13.34272-2.66752 18.688-8.00768l141.50656-141.51168v443.2128c0 15.12448 11.5712 26.70592 26.7008 26.70592s26.7008-11.58144 26.7008-26.70592V202.61376l141.50656 141.51168c5.34528 5.34016 12.4672 8.00768 18.688 8.00768 6.23616 0 13.35296-2.66752 18.69312-8.00768 10.68032-10.68032 10.68032-27.59168 0-37.38112l-186.9056-186.89536c-0.88576-0.89088-2.66752-2.66752-4.44416-3.5584-0.88576 0-1.77664-0.89088-1.77664-0.89088-0.896-0.88576-1.78688-0.88576-2.67776-1.77664-0.89088 0-1.77664-0.89088-2.66752-0.89088-0.896 0-1.77664-0.89088-2.66752-0.89088a21.67296 21.67296 0 0 0-10.68032 0c-0.89088 0-1.77664 0.89088-2.66752 0.89088-0.89088 0-1.78176 0.89088-2.67264 0.89088-0.89088 0-1.77664 0.89088-2.66752 1.77664-0.89088 0-1.77664 0.89088-1.77664 0.89088-1.78176 0.89088-2.66752 1.78176-4.4544 3.5584L304.18944 306.74432c-10.68032 10.68032-10.68032 27.59168 0 37.38112 7.1168 5.34016 13.34784 8.00768 20.46976 8.00768z\" fill=\"#333333\" p-id=\"2592\"></path><path d=\"M929.84832 556.83072c-15.1296 0-26.7008 11.5712-26.7008 26.7008v206.47936c0 38.272-31.15008 69.42208-69.41696 69.42208H189.37856c-38.26688 0-69.41696-31.15008-69.41696-69.42208v-206.47936c0-15.1296-11.5712-26.7008-26.7008-26.7008s-26.69568 11.5712-26.69568 26.7008v206.47936c0 67.6352 55.17824 122.81856 122.81856 122.81856h645.23776c67.64544 0 122.82368-55.18336 122.82368-122.81856v-206.47936c-0.896-15.1296-12.4672-26.7008-27.5968-26.7008z\" fill=\"#333333\" p-id=\"2593\"></path></svg>\n  const numberSelection=document.createElement('input')\n  numberSelection.className='numberSelection'\n  numberSelection.type='number'\n  numberSelection.min='2'\n  numberSelection.max='100'\n  numberSelection.step='1'\n  numberSelection.value=mind?.expandDeep?.toString()||'2'\n  numberSelection.oninput=debounce(()=>{\n    const data=mind.getAllDataWithAutoHide()\n    // mind.init(data?.nodeData,data?.expandDeep)\n    expandNodeChild(data?.nodeData)\n    mind.layout()\n    mind.linkDiv()\n  },300)\n\n  \n  const percentage = document.createElement('span')\n  percentage.innerText = '100%'\n  toolBarRBContainer.appendChild(numberSelection)\n  toolBarRBContainer.appendChild(fc)\n  toolBarRBContainer.appendChild(gc)\n  toolBarRBContainer.appendChild(zo)\n  toolBarRBContainer.appendChild(zi)\n  if (mind.uploadButton) {\n    const uploadButton = createUploadButton(mind)\n    toolBarRBContainer.appendChild(uploadButton)\n  }\n  // toolBarRBContainer.appendChild(percentage)\n  toolBarRBContainer.className = 'rb'\n  fc.onclick = () => {\n    mind.container.requestFullscreen()\n  }\n  gc.onclick = () => {\n    mind.toTopLeft()\n  }\n  zo.onclick = () => {\n    if (mind.scaleVal < 0.6) return\n    mind.scale((mind.scaleVal -= 0.2))\n  }\n  zi.onclick = () => {\n    if (mind.scaleVal > 1.6) return\n    mind.scale((mind.scaleVal += 0.2))\n  }\n  mind.bus.addListener('wheel',e=>{\n    console.log('viewheight',document.documentElement.clientHeight)\n    const viewBTop=e.pageY-e.clientY+document.documentElement.clientHeight\n    const mindBTop = mind.container.getBoundingClientRect().top+window.scrollY-mind.container.clientTop+mind.container.clientHeight\n    console.log('bb',viewBTop,mindBTop)\n    //bottom 20\n    const offsetTop= mindBTop-viewBTop>0?mindBTop-viewBTop:0\n    const offset=offsetTop+toolBarRBContainer.clientHeight-20\n    console.log(offset)\n    if(offset>20&&offset<mind.container.clientHeight-toolBarRBContainer.clientHeight-20)\n      toolBarRBContainer.style.bottom=offset+'px'\n  })\n  return toolBarRBContainer\n}\n\n\nfunction createToolBarLTContainer(mind) {\n  const toolBarLTContainer = document.createElement('toolbar')\n  const menu  = createButton('sidebar', 'menu')\n  const l = createButton('tbltl', 'left')\n  const r = createButton('tbltr', 'right')\n  const s = createButton('tblts', 'side')\n  toolBarLTContainer.appendChild(menu)\n  toolBarLTContainer.appendChild(l)\n  toolBarLTContainer.appendChild(r)\n  toolBarLTContainer.appendChild(s)\n  toolBarLTContainer.className = 'lt'\n\n  \n  menu.onclick=() => {\n    const sidebar =document.querySelector('sidebar')\n    updateSidebar(mind,sidebar as HTMLElement)\n    if(sidebar.classList.contains('selected')){\n      sidebar.removeAttribute('class')\n    }else{\n      sidebar.setAttribute('class','selected')\n    }\n  }\n  l.onclick = () => {\n    mind.initLeft()\n  }\n  r.onclick = () => {\n    mind.initRight()\n  }\n  s.onclick = () => {\n    mind.initSide()\n  }\n  mind.bus.addListener('wheel',e=>{\n    const viewTop=e.pageY-e.clientY\n    const mindTop = mind.container.getBoundingClientRect().top+window.scrollY-mind.container.clientTop\n    // console.log(mind.container.clientHeight)\n    const offset=viewTop-mindTop+20\n    if(offset>20&&offset<mind.container.clientHeight-toolBarLTContainer.clientHeight-20)\n      toolBarLTContainer.style.top=offset+'px'\n  })\n  return toolBarLTContainer\n}\n\nfunction createCloseButton(mind){\n  const close = createButton('close','close')\n  close.onclick=()=>{\n    console.log('关闭')\n    mind.bus.fire('close',{})\n  }\n  return close\n}\n\nfunction createUploadButton(mind){\n  const button = document.createElement('span')\n  button.innerHTML = `\n  <form action=\"\" enctype=\"multipart/form-data\" method=\"post\" class=\"fm\">\n    <input type=\"file\" name=\"file\" class=\"selectFile\">\n  </form>\n  <svg t=\"1662362270319\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2591\" width=\"200\" height=\"200\">\n  <path d=\"M324.6592 352.13312c7.1168 0 13.34272-2.66752 18.688-8.00768l141.50656-141.51168v443.2128c0 15.12448 11.5712 26.70592 26.7008 26.70592s26.7008-11.58144 26.7008-26.70592V202.61376l141.50656 141.51168c5.34528 5.34016 12.4672 8.00768 18.688 8.00768 6.23616 0 13.35296-2.66752 18.69312-8.00768 10.68032-10.68032 10.68032-27.59168 0-37.38112l-186.9056-186.89536c-0.88576-0.89088-2.66752-2.66752-4.44416-3.5584-0.88576 0-1.77664-0.89088-1.77664-0.89088-0.896-0.88576-1.78688-0.88576-2.67776-1.77664-0.89088 0-1.77664-0.89088-2.66752-0.89088-0.896 0-1.77664-0.89088-2.66752-0.89088a21.67296 21.67296 0 0 0-10.68032 0c-0.89088 0-1.77664 0.89088-2.66752 0.89088-0.89088 0-1.78176 0.89088-2.67264 0.89088-0.89088 0-1.77664 0.89088-2.66752 1.77664-0.89088 0-1.77664 0.89088-1.77664 0.89088-1.78176 0.89088-2.66752 1.78176-4.4544 3.5584L304.18944 306.74432c-10.68032 10.68032-10.68032 27.59168 0 37.38112 7.1168 5.34016 13.34784 8.00768 20.46976 8.00768z\" fill=\"#333333\" p-id=\"2592\"></path><path d=\"M929.84832 556.83072c-15.1296 0-26.7008 11.5712-26.7008 26.7008v206.47936c0 38.272-31.15008 69.42208-69.41696 69.42208H189.37856c-38.26688 0-69.41696-31.15008-69.41696-69.42208v-206.47936c0-15.1296-11.5712-26.7008-26.7008-26.7008s-26.69568 11.5712-26.69568 26.7008v206.47936c0 67.6352 55.17824 122.81856 122.81856 122.81856h645.23776c67.64544 0 122.82368-55.18336 122.82368-122.81856v-206.47936c-0.896-15.1296-12.4672-26.7008-27.5968-26.7008z\" \n  fill=\"#333333\" p-id=\"2593\"></path>\n  </svg>\n  `\n  const fm = button.children[0];\n  fm.addEventListener(\"change\", e => {\n    mind.bus.fire('upload', fm)\n  })\n  return button\n}\n\n\nexport default function(mind) {\n  mind.container.append(createToolBarRBContainer(mind))\n  mind.container.append(createToolBarLTContainer(mind))\n  mind.closeButton && mind.container.append(createCloseButton(mind))\n}\n","import i18n from '../i18n'\n\nconst createDiv = (id) => {\n  const div = document.createElement('div')\n  div.id = id\n  return div\n}\n\nconst colorList = [\n  '#2c3e50',\n  '#34495e',\n  '#7f8c8d',\n  '#94a5a6',\n  '#bdc3c7',\n  '#ffffff',\n  '#8e44ad',\n  '#9b59b6',\n  '#2980b9',\n  '#3298db',\n  '#c0392c',\n  '#e74c3c',\n  '#d35400',\n  '#f39c11',\n  '#f1c40e',\n  '#17a085',\n  '#27ae61',\n  '#2ecc71',\n]\n\nexport default function(mind) {\n  const locale = i18n[mind.locale] ? mind.locale : 'en'\n  let bgOrFont\n  const styleDiv = createDiv('nm-style')\n  const tagDiv = createDiv('nm-tag')\n  const iconDiv = createDiv('nm-icon')\n  //different from \"linkDiv\" which is aims to link nodes with svg,\n  const linkDiv = createDiv('nm-link')\n  const remarkDiv = createDiv('nm-remark')\n  styleDiv.innerHTML = `\n      <div class=\"nm-fontsize-container\">\n        ${['15', '24', '32']\n    .map(size => {\n      return `<div class=\"size\"  data-size=\"${size}\">\n        <svg class=\"icon\" style=\"width: ${size}px;height: ${size}px\" aria-hidden=\"true\">\n          <use xlink:href=\"#icon-a\"></use>\n        </svg></div>`\n    })\n    .join('')}<div class=\"bold\"><svg class=\"icon\" aria-hidden=\"true\">\n  <use xlink:href=\"#icon-B\"></use>\n  </svg></div>\n      </div>\n      <div class=\"nm-fontcolor-container\">\n        ${colorList\n    .map(color => {\n      return `<div class=\"split6\"><div class=\"palette\" data-color=\"${color}\" style=\"background-color: ${color};\"></div></div>`\n    })\n    .join('')}\n      </div>\n      <div class=\"bof\">\n      <span class=\"font\">${i18n[locale].font}</span>\n      <span class=\"background\">${i18n[locale].background}</span>\n      </div>\n  `\n  tagDiv.innerHTML = `${i18n[locale].tag}<input class=\"nm-tag\" tabindex=\"-1\" placeholder=\"${i18n[locale].tagsSeparate}\" /><br>`\n  iconDiv.innerHTML = `${i18n[locale].icon}<input class=\"nm-icon\" tabindex=\"-1\" placeholder=\"${i18n[locale].iconsSeparate}\" /><br>`\n  linkDiv.innerHTML = `${i18n[locale].hyperlink}<input class=\"nm-link\" tabindex=\"-1\" placeholder=\"${i18n[locale].linkSeparate}\" /><br>`\n  remarkDiv.innerHTML = `${i18n[locale].remark}<input class=\"nm-remark\" tabindex=\"-1\" placeholder=\"${i18n[locale].reamrkSeparate}\" /><br>`\n\n  const menuContainer = document.createElement('nmenu')\n  menuContainer.innerHTML = `\n  <div class=\"button-container\"><svg class=\"icon\" aria-hidden=\"true\">\n  <use xlink:href=\"#icon-close\"></use>\n  </svg></div>\n  `\n  menuContainer.appendChild(styleDiv)\n  menuContainer.appendChild(tagDiv)\n  menuContainer.appendChild(iconDiv)\n  menuContainer.appendChild(linkDiv) \n  menuContainer.appendChild(remarkDiv)\n  menuContainer.hidden = true\n\n  function clearSelect(klass, remove) {\n    var elems = mind.container.querySelectorAll(klass)\n    ;[].forEach.call(elems, function(el) {\n      el.classList.remove(remove)\n    })\n  }\n\n  mind.container.append(menuContainer)\n  const sizeSelector = menuContainer.querySelectorAll('.size')\n  const bold:HTMLElement = menuContainer.querySelector('.bold')\n  const buttonContainer:HTMLElement = menuContainer.querySelector('.button-container')\n  const fontBtn:HTMLElement = menuContainer.querySelector('.font')\n  const tagInput:HTMLInputElement = mind.container.querySelector('.nm-tag')\n  const iconInput:HTMLInputElement = mind.container.querySelector('.nm-icon')\n  const linkInput:HTMLInputElement = mind.container.querySelector('.nm-link')\n  const remarkInput:HTMLInputElement = mind.container.querySelector('.nm-remark')\n  menuContainer.onclick = e => {\n    if (!mind.currentNode) return\n    const nodeObj = mind.currentNode.nodeObj\n    const target = e.target as HTMLElement\n    if (target.className === 'palette') {\n      if (!nodeObj.style) nodeObj.style = {}\n      clearSelect('.palette', 'nmenu-selected')\n      target.className = 'palette nmenu-selected'\n      if (bgOrFont === 'font') {\n        nodeObj.style.color = target.dataset.color\n      } else if (bgOrFont === 'background') {\n        nodeObj.style.background = target.dataset.color\n      }\n      mind.updateNodeStyle(nodeObj)\n    } else if (target.className === 'background') {\n      clearSelect('.palette', 'nmenu-selected')\n      bgOrFont = 'background'\n      target.className = 'background selected'\n      target.previousElementSibling.className = 'font'\n      if (nodeObj.style && nodeObj.style.background) {\n        menuContainer.querySelector(\n          '.palette[data-color=\"' + nodeObj.style.background + '\"]'\n        ).className = 'palette nmenu-selected'\n      }\n    } else if (target.className === 'font') {\n      clearSelect('.palette', 'nmenu-selected')\n      bgOrFont = 'font'\n      target.className = 'font selected'\n      target.nextElementSibling.className = 'background'\n      if (nodeObj.style && nodeObj.style.color) {\n        menuContainer.querySelector(\n          '.palette[data-color=\"' + nodeObj.style.color + '\"]'\n        ).className = 'palette nmenu-selected'\n      }\n    }\n  }\n  Array.from(sizeSelector).map(\n    dom => {\n      (dom as HTMLElement).onclick = e => {\n        if (!mind.currentNode.nodeObj.style) mind.currentNode.nodeObj.style = {}\n        clearSelect('.size', 'size-selected')\n        const size = e.currentTarget as HTMLElement\n        mind.currentNode.nodeObj.style.fontSize = size.dataset.size\n        size.className = 'size size-selected'\n        mind.updateNodeStyle(mind.currentNode.nodeObj)\n      }\n    }\n  )\n  bold.onclick = (e:MouseEvent & { currentTarget: Element}) => {\n    if (!mind.currentNode.nodeObj.style) mind.currentNode.nodeObj.style = {}\n    if (mind.currentNode.nodeObj.style.fontWeight === 'bold') {\n      delete mind.currentNode.nodeObj.style.fontWeight\n      e.currentTarget.className = 'bold'\n      mind.updateNodeStyle(mind.currentNode.nodeObj)\n    } else {\n      mind.currentNode.nodeObj.style.fontWeight = 'bold'\n      e.currentTarget.className = 'bold size-selected'\n      mind.updateNodeStyle(mind.currentNode.nodeObj)\n    }\n  }\n  tagInput.onchange = (e:InputEvent & { target: HTMLInputElement}) => {\n    if (!mind.currentNode) return\n    if (e.target.value!==null||e.target.value!==undefined) {\n      const newTags = e.target.value.split(',')\n      mind.updateNodeTags(mind.currentNode.nodeObj, newTags)\n    }\n  }\n  iconInput.onchange = (e:InputEvent & { target: HTMLInputElement}) => {\n    if (!mind.currentNode) return\n    if (e.target.value!==null||e.target.value!==undefined) {\n      const newIcons = e.target.value.split(',')\n      mind.updateNodeIcons(mind.currentNode.nodeObj, newIcons)\n    }\n  }\n  linkInput.onchange = (e:InputEvent & { target: HTMLInputElement}) => {\n    if (!mind.currentNode) return\n    if (e.target.value!==null||e.target.value!==undefined) {\n      const link = e.target.value\n      mind.updateNodeHyperLink(mind.currentNode.nodeObj, link)\n    }\n  }\n  remarkInput.onchange = (e:InputEvent & { target: HTMLInputElement}) => {\n    if (!mind.currentNode) return\n    if (e.target.value!==null||e.target.value!==undefined) {\n      const input = e.target.value\n      mind.updateNodeRemark(mind.currentNode.nodeObj, input)\n    }\n  }\n  let state = 'open'\n  buttonContainer.onclick = e => {\n    if (state === 'open') {\n      state = 'close'\n      menuContainer.className = 'close'\n      buttonContainer.innerHTML = `<svg class=\"icon\" aria-hidden=\"true\"><use xlink:href=\"#icon-menu\"></use></svg>`\n    } else {\n      state = 'open'\n      menuContainer.className = ''\n      buttonContainer.innerHTML = `<svg class=\"icon\" aria-hidden=\"true\"><use xlink:href=\"#icon-close\"></use></svg>`\n    }\n  }\n  mind.bus.addListener('unselectNode', function() {\n    menuContainer.hidden = true\n  })\n  mind.bus.addListener('selectNode', function(nodeObj, clickEvent) {\n    if (!clickEvent) return\n    menuContainer.hidden = false\n    clearSelect('.palette', 'nmenu-selected')\n    clearSelect('.size', 'size-selected')\n    clearSelect('.bold', 'size-selected')\n    bgOrFont = 'font'\n    fontBtn.className = 'font selected'\n    fontBtn.nextElementSibling.className = 'background'\n    if (nodeObj.style) {\n      if (nodeObj.style.fontSize) {\n        menuContainer.querySelector(\n          '.size[data-size=\"' + nodeObj.style.fontSize + '\"]'\n        ).className = 'size size-selected'\n      }\n      if (nodeObj.style.fontWeight) { menuContainer.querySelector('.bold').className = 'bold size-selected' }\n      if (nodeObj.style.color) {\n        menuContainer.querySelector(\n          '.palette[data-color=\"' + nodeObj.style.color + '\"]'\n        ).className = 'palette nmenu-selected'\n      }\n    }\n    if (nodeObj.tags) {\n      tagInput.value = nodeObj.tags.join(',')\n    } else {\n      tagInput.value = '' \n    }\n    if (nodeObj.icons) {\n      iconInput.value = nodeObj.icons.join(',')\n    } else {\n      iconInput.value = ''\n    }\n    linkInput.value=''\n    if (nodeObj.hyperLink) {\n      linkInput.value = nodeObj.hyperLink\n    } \n    if(nodeObj.linkJump){\n      if(linkInput.value.length>0) linkInput.value+=','\n      linkInput.value += nodeObj.linkJump.map(val=>val.title).reduce((preVal,curVal,index)=>preVal+(index?',':'')+curVal,'')\n    }\n    if (nodeObj.remark) {\n      remarkInput.value = nodeObj.remark\n    } else {\n      remarkInput.value = ''\n    }\n  })\n}\n","import { dragMoveHelper, throttle } from '../utils/index'\nimport { findEle as E, Topic, Group } from '../utils/dom'\n// https://html.spec.whatwg.org/multipage/dnd.html#drag-and-drop-processing-model\n\nconst $d = document\nconst insertPreview = function(el, insertLocation) {\n  if (!insertLocation) {\n    clearPreview(el)\n    return el\n  }\n  const query = el.getElementsByClassName('insert-preview')\n  const className = `insert-preview ${insertLocation} show`\n  if (query.length > 0) {\n    query[0].className = className\n  } else {\n    const insertPreviewEL = $d.createElement('div')\n    insertPreviewEL.className = className\n    el.appendChild(insertPreviewEL)\n  }\n  return el\n}\n\nconst clearPreview = function(el) {\n  if (!el) return\n  const query = el.getElementsByClassName('insert-preview')\n  for (const queryElement of query || []) {\n    queryElement.remove()\n  }\n}\n\nconst canPreview = function(el:Element, dragged:Topic) {\n  const isContain = dragged.parentNode.parentNode.contains(el)\n  return (\n    el &&\n    el.tagName === 'TPC' &&\n    el !== dragged &&\n    !isContain &&\n    (el as Topic).nodeObj.root !== true\n  )\n}\n\nexport default function(mind) {\n  let dragged: Topic\n  let insertLocation:string\n  let meet: Element\n  const threshold = 12\n\n  mind.map.addEventListener('dragstart', function(e) {\n    dragged = e.target\n    ;(dragged.parentNode.parentNode as Group).style.opacity = '0.5'\n    dragMoveHelper.clear()\n  })\n\n  mind.map.addEventListener('dragend', async function(e: DragEvent) {\n    (e.target as HTMLElement).style.opacity = ''\n    clearPreview(meet)\n    const obj = dragged.nodeObj\n    switch (insertLocation) {\n      case 'before':\n        mind.moveNodeBefore(dragged, meet)\n        mind.selectNode(E(obj.id))\n        break\n      case 'after':\n        mind.moveNodeAfter(dragged, meet)\n        mind.selectNode(E(obj.id))\n        break\n      case 'in':\n        mind.moveNode(dragged, meet)\n        break\n    }\n    ;(dragged.parentNode.parentNode as Group).style.opacity = '1'\n    dragged = null\n  })\n\n  mind.map.addEventListener('dragover', throttle(function(e: DragEvent) {\n    // console.log('drag', e)\n    clearPreview(meet)\n    // minus threshold infer that postion of the cursor is above topic\n    const topMeet = $d.elementFromPoint(\n      e.clientX,\n      e.clientY - threshold\n    )\n    if (canPreview(topMeet, dragged)) {\n      meet = topMeet\n      const y = topMeet.getBoundingClientRect().y\n      if (e.clientY > y + topMeet.clientHeight) {\n        insertLocation = 'after'\n      } else if (e.clientY > y + topMeet.clientHeight / 2) {\n        insertLocation = 'in'\n      }\n    } else {\n      const bottomMeet = $d.elementFromPoint(\n        e.clientX,\n        e.clientY + threshold\n      )\n      if (canPreview(bottomMeet, dragged)) {\n        meet = bottomMeet\n        const y = bottomMeet.getBoundingClientRect().y\n        if (e.clientY < y) {\n          insertLocation = 'before'\n        } else if (e.clientY < y + bottomMeet.clientHeight / 2) {\n          insertLocation = 'in'\n        }\n      } else {\n        insertLocation = meet = null\n      }\n    }\n    if (meet) insertPreview(meet, insertLocation)\n  }, 200))\n}\n","export default function(mind) {\n  const key2func = {\n    13: () => {\n      // enter\n      mind.insertSibling()\n    },\n    9: () => {\n      // tab\n      mind.addChild()\n    },\n    17: e => {\n      // controll\n      mind.ctrlRepeat=true\n      console.log('按下controll')\n    },\n    91: e => {\n      // command\n      mind.ctrlRepeat=true\n      console.log('按下command')\n    },\n    113: () => {\n      // f2\n      mind.beginEdit()\n    },\n    38: () => {\n      // up\n      mind.selectPrevSibling()\n    },\n    40: () => {\n      // down\n      mind.selectNextSibling()\n    },\n    37: () => {\n      // left\n      if (!mind.currentNode) return\n      if (mind.currentNode.offsetParent.offsetParent.className === 'rhs') {\n        mind.selectParent()\n      } else if (\n        mind.currentNode.offsetParent.offsetParent.className === 'lhs' ||\n        mind.currentNode.nodeObj.root\n      ) {\n        mind.selectFirstChild()\n      }\n    },\n    39: () => {\n      // right\n      if (!mind.currentNode) return\n      if (\n        mind.currentNode.offsetParent.offsetParent.className === 'rhs' ||\n        mind.currentNode.nodeObj.root\n      ) {\n        mind.selectFirstChild()\n      } else if (\n        mind.currentNode.offsetParent.offsetParent.className === 'lhs'\n      ) {\n        mind.selectParent()\n      }\n    },\n    33() {\n      // pageUp\n      mind.moveUpNode()\n    },\n    34() {\n      // pageDown\n      mind.moveDownNode()\n    },\n    67(e) {\n      if (e.metaKey || e.ctrlKey) {\n      // ctrl c\n        mind.waitCopy = mind.currentNode\n      }\n    },\n    86(e) {\n      if (!mind.waitCopy) return\n      if (e.metaKey || e.ctrlKey) {\n      // ctrl v\n        mind.copyNode(mind.waitCopy, mind.currentNode)\n        mind.waitCopy = null\n      }\n    },\n    // ctrl z\n    90: e => {\n      if (!mind.allowUndo) return\n      if (e.metaKey || e.ctrlKey) mind.undo()\n    },\n    // ctrl +\n    187: e => {\n      if (e.metaKey || e.ctrlKey) {\n        if (mind.scaleVal > 1.6) return\n        mind.scale((mind.scaleVal += 0.2))\n      }\n    },\n    // ctrl -\n    189: e => {\n      if (e.metaKey || e.ctrlKey) {\n        if (mind.scaleVal < 0.6) return\n        mind.scale((mind.scaleVal -= 0.2))\n      }\n    },\n  }\n  mind.map.onkeydown = e => {\n    // console.log(e)\n    // e.preventDefault()\n    if (!mind.editable) return\n    // console.log(e, e.target)\n    if (e.target !== e.currentTarget) {\n      // input\n      return\n    }\n    if (e.keyCode === 8 || e.keyCode === 46) {\n      // del,backspace\n      if (mind.currentLink) mind.removeLink()\n      else mind.removeNode()\n    } else {\n      key2func[e.keyCode] && key2func[e.keyCode](e)\n    }\n  }\n  mind.map.onkeyup = e => {\n    if (e.keyCode === 17 || e.keyCode === 91) {\n      mind.ctrlRepeat=false\n    }\n  }\n}\n","export default function(mind, option?) {\n  const createLi = (id, name) => {\n    const div = document.createElement('div')\n    div.id = id\n    div.innerHTML = `<svg class=\"icon\" aria-hidden=\"true\">\n    <use xlink:href=\"#icon-${name}\"></use>\n  </svg>`\n    return div\n  }\n\n  const add_child = createLi('cm-add_child', 'zijiedian')\n  const add_sibling = createLi('cm-add_sibling', 'tongjijiedian-')\n  const remove_child = createLi('cm-remove_child', 'shanchu2')\n  // let focus = createLi('cm-fucus', i18n[locale].focus, '')\n  // let unfocus = createLi('cm-unfucus', i18n[locale].cancelFocus, '')\n  const up = createLi('cm-up', 'rising')\n  const down = createLi('cm-down', 'falling')\n  const edit = createLi('cm-edit', 'edit')\n  // let link = createLi('cm-down', i18n[locale].link, '')\n\n  const menuUl = document.createElement('ul')\n  menuUl.className = 'menu-list'\n  // if (!option || option.link) {\n  //   menuUl.appendChild(link)\n  // }\n  if (option && option.extend) {\n    for (let i = 0; i < option.extend.length; i++) {\n      const item = option.extend[i]\n      const dom = createLi(item.name, item.name)\n      menuUl.appendChild(dom)\n      dom.onclick = e => {\n        item.onclick(e)\n      }\n    }\n  }\n  const menuContainer = document.createElement('mmenu')\n  menuContainer.appendChild(add_child)\n  menuContainer.appendChild(add_sibling)\n  menuContainer.appendChild(remove_child)\n  // if (!option || option.focus) {\n  //   menuContainer.appendChild(focus)\n  //   menuContainer.appendChild(unfocus)\n  // }\n  menuContainer.appendChild(up)\n  menuContainer.appendChild(down)\n  menuContainer.appendChild(edit)\n  menuContainer.hidden = true\n\n  mind.container.append(menuContainer)\n  let isRoot = true\n  // mind.container.onclick = function (e) {\n  //   e.preventDefault()\n  //   // console.log(e.pageY, e.screenY, e.clientY)\n  //   let target = e.target\n  //   if (target.tagName === 'TPC') {\n  //     if (target.parentElement.tagName === 'ROOT') {\n  //       isRoot = true\n  //     } else {\n  //       isRoot = false\n  //     }\n  //     // if (isRoot) {\n  //     //   focus.className = 'disabled'\n  //     //   up.className = 'disabled'\n  //     //   down.className = 'disabled'\n  //     //   add_sibling.className = 'disabled'\n  //     //   remove_child.className = 'disabled'\n  //     // } else {\n  //     //   focus.className = ''\n  //     //   up.className = ''\n  //     //   down.className = ''\n  //     //   add_sibling.className = ''\n  //     //   remove_child.className = ''\n  //     // }\n  //     mind.selectNode(target)\n  //     menuContainer.hidden = false\n  //     let height = menuUl.offsetHeight\n  //     let width = menuUl.offsetWidth\n  //     let rect = target.getBoundingClientRect()\n  //     // menuUl.style.top = rect.top - 10 - height + 'px'\n  //     // menuUl.style.left = rect.left - (width - rect.width) / 2 + 'px'\n  //     // menuUl.style.left = e.clientX + 'px'\n  //   }\n  // }\n\n  mind.bus.addListener('unselectNode', function() {\n    menuContainer.hidden = true\n  })\n  mind.bus.addListener('selectNode', function(nodeObj) {\n    menuContainer.hidden = false\n    if (nodeObj.root) {\n      isRoot = true\n    } else {\n      isRoot = false\n    }\n  })\n  menuContainer.onclick = e => {\n    if (e.target === menuContainer) menuContainer.hidden = true\n  }\n\n  add_child.onclick = e => {\n    mind.addChild()\n  }\n  add_sibling.onclick = e => {\n    if (isRoot) return\n    mind.insertSibling()\n  }\n  remove_child.onclick = e => {\n    if (isRoot) return\n    mind.removeNode()\n  }\n  // focus.onclick = e => {\n  //   if (isRoot) return\n  //   mind.focusNode(mind.currentNode)\n  //   menuContainer.hidden = true\n  // }\n  // unfocus.onclick = e => {\n  //   mind.cancelFocus()\n  //   menuContainer.hidden = true\n  // }\n  up.onclick = e => {\n    if (isRoot) return\n    mind.moveUpNode()\n  }\n  down.onclick = e => {\n    if (isRoot) return\n    mind.moveDownNode()\n  }\n  edit.onclick = e => {\n    mind.beginEdit()\n  }\n  // link.onclick = e => {\n  //   let from = mind.currentNode\n  //   mind.map.addEventListener(\n  //     'click',\n  //     e => {\n  //       e.preventDefault()\n  //       if (\n  //         e.target.parentElement.nodeName === 'T' ||\n  //         e.target.parentElement.nodeName === 'ROOT'\n  //       ) {\n  //         mind.createLink(from, mind.currentNode)\n  //       } else {\n  //         console.log('取消连接')\n  //       }\n  //     },\n  //     {\n  //       once: true,\n  //     }\n  //   )\n  // }\n}\n","export default function Bus() {\n  this.handlers = {}\n}\nBus.prototype = {\n  showHandler: function() {\n    console.log(this.handlers)\n  },\n  addListener: function(type, handler) {\n    if (this.handlers[type] === undefined) this.handlers[type] = []\n    this.handlers[type].push(handler)\n  },\n  fire: function(type, ...payload) {\n    if (this.handlers[type] instanceof Array) {\n      var handlers = this.handlers[type]\n      for (var i = 0; i < handlers.length; i++) {\n        handlers[i](...payload)\n      }\n    }\n  },\n  removeListener: function(type, handler) {\n    if (!this.handlers[type]) return\n    var handlers = this.handlers[type]\n    if (!handler) {\n      handlers.length = 0\n    } else if (handlers.length) {\n      for (var i = 0; i < handlers.length; i++) {\n        if (handlers[i] === handler) {\n          this.handlers[type].splice(i, 1)\n        }\n      }\n    }\n  },\n}\n","!function(t){var c,l,a,e,o,i,n='<svg><symbol id=\"icon-edit\" viewBox=\"0 0 1024 1024\"><path d=\"M423.765333 128a42.666667 42.666667 0 0 1 3.2 85.205333L423.765333 213.333333H234.666667a64 64 0 0 0-63.872 60.245334L170.666667 277.333333v512a64 64 0 0 0 60.245333 63.872L234.666667 853.333333h512a64 64 0 0 0 63.872-60.245333L810.666667 789.333333v-189.098666a42.666667 42.666667 0 0 1 85.205333-3.2l0.128 3.2V789.333333a149.333333 149.333333 0 0 1-144.213333 149.248L746.666667 938.666667h-512a149.333333 149.333333 0 0 1-149.248-144.213334L85.333333 789.333333v-512a149.333333 149.333333 0 0 1 144.213334-149.248L234.666667 128h189.098666z m324.949334-53.248a42.666667 42.666667 0 0 1 60.330666 0l150.869334 150.869333a42.666667 42.666667 0 0 1 0 60.330667l-329.386667 329.386667a42.666667 42.666667 0 0 1-29.44 12.458666l-153.386667 2.517334a42.666667 42.666667 0 0 1-43.349333-43.349334l2.56-153.386666a42.666667 42.666667 0 0 1 12.458667-29.44z m30.165333 90.496L491.946667 452.266667l-1.493334 91.989333 92.032-1.493333 286.976-286.976-90.538666-90.538667z\"  ></path></symbol><symbol id=\"icon-rising\" viewBox=\"0 0 1024 1024\"><path d=\"M553.173333 803.84h-64l0.021334-474.581333-224.021334 224-45.269333-45.226667L521.6 206.293333l301.717333 301.696-45.269333 45.269334-224.853333-224.896v475.477333z\"  ></path></symbol><symbol id=\"icon-falling\" viewBox=\"0 0 1024 1024\"><path d=\"M553.173333 238.314667h-64l0.021334 474.602666-224.021334-224-45.269333 45.226667L521.6 835.861333l301.717333-301.717333-45.269333-45.226667-224.853333 224.853334V238.336z\"  ></path></symbol><symbol id=\"icon-shanchu2\" viewBox=\"0 0 1024 1024\"><path d=\"M516.60601807 107.93026734c-82.64382935 0-149.71865844 65.51751709-152.5729065 147.77160644H171.37136841c-21.40603638 0-38.92044068 17.38504028-38.92044068 38.92126465 0 21.40686036 17.38504028 38.92208862 38.92126466 38.92208862h42.94308471v435.40136719c0 81.73498536 55.39828492 148.55026245 123.90106201 148.55026245h348.99444581c68.37341309 0 123.90106201-66.42553711 123.901062-148.55026245V333.80477906h38.92126465c21.40686036 0 38.92126464-17.38586426 38.92126465-38.92208863 0-21.40686036-17.38504028-38.92126464-38.92126465-38.92126465H668.91854859C666.45321656 173.44860839 599.24902344 107.93109131 516.60601807 107.93109131z m-79.65939331 147.77160644c2.85424805-42.16442872 37.2354126-74.85809326 79.78875732-74.85809326s76.93450927 32.82302857 79.39984131 74.85809326H436.94662476z m-98.86047364 589.01165771c-24.2611084 0-50.98754883-31.13717651-50.98754883-75.76693725V333.80477906h450.97036744V769.33551026c0 44.50039673-26.72644043 75.76776123-50.98754884 75.76776122H338.08615112v-0.38973999z m0 0\"  ></path><path d=\"M390.37063599 751.17263794c17.77313232 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.77478027 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.27124023 40.08883667 32.43493653 40.08883667z m117.41308594 0c17.7739563 0 32.43411255-17.7739563 32.43411255-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43411255-40.08966065-17.7739563 0-32.43493653 17.77478027-32.43493653 40.08966065v228.72875976c0 22.18469239 14.66098023 40.08883667 32.43493653 40.08883667z m123.51049804 0c17.7739563 0 32.43493653-17.7739563 32.43493652-40.08883667V482.35504151c0-22.31488037-14.53079224-40.08966065-32.43493652-40.08966065-17.7739563 0-32.43411255 17.77478027-32.43411255 40.08966065v228.72875976c0 22.18469239 14.14105224 40.08883667 32.43411255 40.08883667z m0 0\"  ></path></symbol><symbol id=\"icon-zijiedian\" viewBox=\"0 0 1024 1024\"><path d=\"M312.208 472c19.568-157.856 153.432-280 315.656-280 175.68 0 318.112 143.272 318.112 320S803.552 832 627.864 832c-162.224 0-296.08-122.144-315.656-280H120a40 40 0 0 1 0-80h192.208zM632 752c132.552 0 240-107.448 240-240 0-132.552-107.448-240-240-240-132.552 0-240 107.448-240 240 0 132.552 107.448 240 240 240z m-40-280v-80a40 40 0 0 1 80 0v80h80a40 40 0 0 1 0 80h-80v80a40 40 0 0 1-80 0v-80h-80a40 40 0 0 1 0-80h80z\"  ></path></symbol><symbol id=\"icon-tongjijiedian-\" viewBox=\"0 0 1024 1024\"><path d=\"M803.84 131.626667H410.24A59.733333 59.733333 0 0 0 350.506667 192v45.226667H199.68a51.626667 51.626667 0 0 0-51.626667 51.626666v465.92a51.626667 51.626667 0 0 0 51.626667 51.626667h187.52v-55.466667h-162.133333a21.333333 21.333333 0 0 1-21.333334-21.333333V313.386667a21.333333 21.333333 0 0 1 21.333334-21.333334h125.653333v64a59.733333 59.733333 0 0 0 59.733333 59.733334h393.386667a59.733333 59.733333 0 0 0 59.733333-59.733334V192a59.733333 59.733333 0 0 0-59.733333-60.373333z m4.266667 224.64a4.266667 4.266667 0 0 1-4.266667 4.266666H410.24a4.266667 4.266667 0 0 1-4.266667-4.266666V192a4.266667 4.266667 0 0 1 4.266667-4.266667h393.6a4.266667 4.266667 0 0 1 4.266667 4.266667zM716.16 749.44h-81.28v-81.493333a27.733333 27.733333 0 0 0-55.466667 0v81.28h-81.493333a27.733333 27.733333 0 1 0 0 55.466666h81.28v81.28a27.733333 27.733333 0 1 0 55.466667 0v-81.066666h81.28a27.733333 27.733333 0 0 0 0-55.466667z\"  ></path></symbol><symbol id=\"icon-close\" viewBox=\"0 0 1024 1024\"><path d=\"M557.312 513.248l265.28-263.904c12.544-12.48 12.608-32.704 0.128-45.248-12.512-12.576-32.704-12.608-45.248-0.128L512.128 467.904l-263.04-263.84c-12.448-12.48-32.704-12.544-45.248-0.064-12.512 12.48-12.544 32.736-0.064 45.28l262.976 263.776L201.6 776.8c-12.544 12.48-12.608 32.704-0.128 45.248a31.937 31.937 0 0 0 22.688 9.44c8.16 0 16.32-3.104 22.56-9.312l265.216-263.808 265.44 266.24c6.24 6.272 14.432 9.408 22.656 9.408a31.94 31.94 0 0 0 22.592-9.344c12.512-12.48 12.544-32.704 0.064-45.248L557.312 513.248z\" fill=\"\" ></path></symbol><symbol id=\"icon-menu\" viewBox=\"0 0 1024 1024\"><path d=\"M109.714 292.571h804.572c21.943 0 36.571-21.942 36.571-43.885 0-14.629-14.628-29.257-36.571-29.257H109.714c-21.943 0-36.571 14.628-36.571 36.571 0 14.629 14.628 36.571 36.571 36.571zM914.286 512H109.714c-21.943 0-36.571 14.629-36.571 36.571 0 14.629 14.628 36.572 36.571 36.572h804.572c21.943 0 36.571-21.943 36.571-43.886 0-14.628-14.628-29.257-36.571-29.257z m0 292.571H109.714c-21.943 0-36.571 14.629-36.571 36.572s14.628 36.571 36.571 36.571h804.572c21.943 0 36.571-21.943 36.571-36.571 0-21.943-14.628-36.572-36.571-36.572z\"  ></path></symbol><symbol id=\"icon-right\" viewBox=\"0 0 1024 1024\"><path d=\"M385 560.69999999L385 738.9c0 36.90000001 26.4 68.5 61.3 68.5l150.2 0c1.5 0 3-0.1 4.5-0.3 10.2 38.7 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-42 0-77.3 28.6-87.5 67.39999999-1.4-0.3-2.9-0.4-4.5-0.39999999L446.3 760.4c-6.8 0-14.3-8.9-14.3-21.49999999l0-427.00000001c0-12.7 7.40000001-21.5 14.30000001-21.5l150.19999999 0c1.5 0 3-0.2 4.5-0.4 10.2 38.8 45.5 67.3 87.5 67.3 50 0 90.5-40.5 90.5-90.4 0-49.9-40.5-90.6-90.5-90.59999999-42 0-77.3 28.6-87.5 67.39999999-1.4-0.2-2.9-0.4-4.49999999-0.4L446.3 243.3c-34.80000001 0-61.3 31.6-61.3 68.50000001L385 513.7l-79.1 0c-10.4-38.5-45.49999999-67-87.4-67-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c41.79999999 0 77.00000001-28.4 87.4-67L385 560.69999999z\" fill=\"#333333\" ></path></symbol><symbol id=\"icon-left\" viewBox=\"0 0 1024 1024\"><path d=\"M639 463.30000001L639 285.1c0-36.90000001-26.4-68.5-61.3-68.5l-150.2 0c-1.5 0-3 0.1-4.5 0.3-10.2-38.7-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.5s40.5 90.5 90.5 90.5c42 0 77.3-28.6 87.5-67.39999999 1.4 0.3 2.9 0.4 4.5 0.39999999L577.7 263.6c6.8 0 14.3 8.9 14.3 21.49999999l0 427.00000001c0 12.7-7.40000001 21.5-14.30000001 21.5l-150.19999999 0c-1.5 0-3 0.2-4.5 0.4-10.2-38.8-45.5-67.3-87.5-67.3-50 0-90.5 40.5-90.5 90.4 0 49.9 40.5 90.6 90.5 90.59999999 42 0 77.3-28.6 87.5-67.39999999 1.4 0.2 2.9 0.4 4.49999999 0.4L577.7 780.7c34.80000001 0 61.3-31.6 61.3-68.50000001L639 510.3l79.1 0c10.4 38.5 45.49999999 67 87.4 67 50 0 90.5-40.5 90.5-90.5s-40.5-90.5-90.5-90.5c-41.79999999 0-77.00000001 28.4-87.4 67L639 463.30000001z\" fill=\"#333333\" ></path></symbol><symbol id=\"icon-side\" viewBox=\"0 0 1024 1024\"><path d=\"M851.91168 328.45312c-59.97056 0-108.6208 48.47104-108.91264 108.36992l-137.92768 38.4a109.14304 109.14304 0 0 0-63.46752-46.58688l1.39264-137.11872c47.29344-11.86816 82.31936-54.66624 82.31936-105.64096 0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.76288-108.91776 108.91776c0 49.18784 32.60928 90.75712 77.38368 104.27392l-1.41312 138.87488a109.19936 109.19936 0 0 0-63.50336 48.55808l-138.93632-39.48544 0.01024-0.72704c0-60.15488-48.76288-108.91776-108.91776-108.91776s-108.91776 48.75776-108.91776 108.91776c0 60.15488 48.76288 108.91264 108.91776 108.91264 39.3984 0 73.91232-20.92032 93.03552-52.2496l139.19232 39.552-0.00512 0.2304c0 25.8304 9.00096 49.5616 24.02816 68.23424l-90.14272 132.63872a108.7488 108.7488 0 0 0-34.2528-5.504c-60.15488 0-108.91776 48.768-108.91776 108.91776 0 60.16 48.76288 108.91776 108.91776 108.91776 60.16 0 108.92288-48.75776 108.92288-108.91776 0-27.14624-9.9328-51.968-26.36288-71.04l89.04704-131.03104a108.544 108.544 0 0 0 37.6832 6.70208 108.672 108.672 0 0 0 36.48512-6.272l93.13792 132.57216a108.48256 108.48256 0 0 0-24.69888 69.0688c0 60.16 48.768 108.92288 108.91776 108.92288 60.16 0 108.91776-48.76288 108.91776-108.92288 0-60.14976-48.75776-108.91776-108.91776-108.91776a108.80512 108.80512 0 0 0-36.69504 6.3488l-93.07136-132.48a108.48768 108.48768 0 0 0 24.79616-72.22784l136.09984-37.888c18.99008 31.93856 53.84192 53.3504 93.69088 53.3504 60.16 0 108.92288-48.75776 108.92288-108.91264-0.00512-60.15488-48.77312-108.92288-108.92288-108.92288z\"  ></path></symbol><symbol id=\"icon-B\" viewBox=\"0 0 1024 1024\"><path d=\"M98.067692 65.457231H481.28c75.854769 0 132.411077 3.150769 169.668923 9.452307 37.336615 6.301538 70.656 19.534769 100.036923 39.620924 29.459692 20.007385 53.956923 46.710154 73.570462 80.029538 19.692308 33.398154 29.459692 70.734769 29.459692 112.167385 0 44.898462-12.130462 86.094769-36.233846 123.588923a224.886154 224.886154 0 0 1-98.461539 84.283077c58.368 17.092923 103.266462 46.08 134.695385 87.04 31.350154 40.96 47.025231 89.088 47.025231 144.462769 0 43.638154-10.082462 86.016-30.404923 127.212308-20.243692 41.196308-47.891692 74.043077-83.02277 98.697846-35.052308 24.654769-78.296615 39.778462-129.732923 45.449846-32.295385 3.465846-110.119385 5.671385-233.472 6.537846H98.067692V65.457231z m193.536 159.507692V446.621538h126.818462c75.460923 0 122.328615-1.024 140.603077-3.229538 33.083077-3.938462 59.155692-15.36 78.139077-34.343385 18.904615-18.904615 28.435692-43.874462 28.435692-74.830769 0-29.696-8.192-53.720615-24.497231-72.310154-16.384-18.510769-40.644923-29.696-72.940307-33.634461-19.140923-2.205538-74.279385-3.308308-165.415385-3.308308h-111.064615z m0 381.243077v256.315077h179.2c69.710769 0 113.979077-1.969231 132.726154-5.907692 28.750769-5.198769 52.145231-17.959385 70.262154-38.281847 18.116923-20.243692 27.096615-47.340308 27.096615-81.368615 0-28.750769-6.931692-53.169231-20.873846-73.255385a118.232615 118.232615 0 0 0-60.494769-43.795692c-26.387692-9.137231-83.574154-13.705846-171.638154-13.705846H291.603692z\"  ></path></symbol><symbol id=\"icon-a\" viewBox=\"0 0 1024 1024\"><path d=\"M757.76 665.6q0 20.48 1.536 34.304t7.68 22.016 18.944 12.288 34.304 4.096q-3.072 25.6-15.36 44.032-11.264 16.384-33.28 29.696t-62.976 13.312q-11.264 0-20.48-0.512t-17.408-2.56l-6.144-2.048-1.024 0q-4.096-1.024-10.24-4.096-2.048-2.048-4.096-2.048-1.024-1.024-2.048-1.024-14.336-8.192-23.552-17.408t-14.336-17.408q-6.144-10.24-9.216-20.48-63.488 75.776-178.176 75.776-48.128 0-88.064-15.36t-69.12-44.032-45.056-68.096-15.872-88.576 16.896-89.088 47.616-67.584 74.24-42.496 96.768-14.848q48.128 0 88.576 17.408t66.048 49.152q0-8.192 0.512-16.384t0.512-15.36q0-71.68-39.936-104.448t-128-32.768q-43.008 0-84.992 6.656t-84.992 17.92q14.336-28.672 25.088-47.616t24.064-29.184q30.72-24.576 158.72-24.576 79.872 0 135.168 13.824t90.624 43.52 51.2 75.264 15.872 108.032l0 200.704zM487.424 743.424q50.176 0 79.872-33.28t29.696-95.744q0-61.44-28.672-93.696t-76.8-32.256q-52.224 0-82.944 33.28t-30.72 94.72q0 58.368 31.744 92.672t77.824 34.304z\"  ></path></symbol><symbol id=\"icon-full\" viewBox=\"0 0 1024 1024\"><path d=\"M639.328 416c8.032 0 16.096-3.008 22.304-9.056l202.624-197.184-0.8 143.808c-0.096 17.696 14.144 32.096 31.808 32.192 0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808l1.248-222.208c0-0.672-0.352-1.248-0.384-1.92 0.032-0.512 0.288-0.896 0.288-1.408 0.032-17.664-14.272-32-31.968-32.032L671.552 96l-0.032 0c-17.664 0-31.968 14.304-32 31.968C639.488 145.632 653.824 160 671.488 160l151.872 0.224-206.368 200.8c-12.672 12.32-12.928 32.608-0.64 45.248C622.656 412.736 630.976 416 639.328 416z\"  ></path><path d=\"M896.032 639.552 896.032 639.552c-17.696 0-32 14.304-32.032 31.968l-0.224 151.872-200.832-206.4c-12.32-12.64-32.576-12.96-45.248-0.64-12.672 12.352-12.928 32.608-0.64 45.248l197.184 202.624-143.808-0.8c-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808-0.096 17.696 14.144 32.096 31.808 32.192l222.24 1.248c0.064 0 0.128 0 0.192 0 0.64 0 1.12-0.32 1.76-0.352 0.512 0.032 0.896 0.288 1.408 0.288l0.032 0c17.664 0 31.968-14.304 32-31.968L928 671.584C928.032 653.952 913.728 639.584 896.032 639.552z\"  ></path><path d=\"M209.76 159.744l143.808 0.8c0.064 0 0.128 0 0.192 0 17.6 0 31.904-14.208 32-31.808 0.096-17.696-14.144-32.096-31.808-32.192L131.68 95.328c-0.064 0-0.128 0-0.192 0-0.672 0-1.248 0.352-1.888 0.384-0.448 0-0.8-0.256-1.248-0.256 0 0-0.032 0-0.032 0-17.664 0-31.968 14.304-32 31.968L96 352.448c-0.032 17.664 14.272 32 31.968 32.032 0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968l0.224-151.936 200.832 206.4c6.272 6.464 14.624 9.696 22.944 9.696 8.032 0 16.096-3.008 22.304-9.056 12.672-12.32 12.96-32.608 0.64-45.248L209.76 159.744z\"  ></path><path d=\"M362.368 617.056l-202.624 197.184 0.8-143.808c0.096-17.696-14.144-32.096-31.808-32.192-0.064 0-0.128 0-0.192 0-17.6 0-31.904 14.208-32 31.808l-1.248 222.24c0 0.704 0.352 1.312 0.384 2.016 0 0.448-0.256 0.832-0.256 1.312-0.032 17.664 14.272 32 31.968 32.032L352.448 928c0 0 0.032 0 0.032 0 17.664 0 31.968-14.304 32-31.968s-14.272-32-31.968-32.032l-151.936-0.224 206.4-200.832c12.672-12.352 12.96-32.608 0.64-45.248S375.008 604.704 362.368 617.056z\"  ></path></symbol><symbol id=\"icon-add\" viewBox=\"0 0 1024 1024\"><path d=\"M863.328 482.56l-317.344-1.12L545.984 162.816c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 318.4L159.616 480.064c-0.032 0-0.064 0-0.096 0-17.632 0-31.936 14.24-32 31.904C127.424 529.632 141.728 544 159.392 544.064l322.592 1.152 0 319.168c0 17.696 14.336 32 32 32s32-14.304 32-32l0-318.944 317.088 1.12c0.064 0 0.096 0 0.128 0 17.632 0 31.936-14.24 32-31.904C895.264 496.992 880.96 482.624 863.328 482.56z\"  ></path></symbol><symbol id=\"icon-move\" viewBox=\"0 0 1024 1024\"><path d=\"M863.744 544 163.424 544c-17.664 0-32-14.336-32-32s14.336-32 32-32l700.32 0c17.696 0 32 14.336 32 32S881.44 544 863.744 544z\"  ></path></symbol><symbol id=\"icon-living\" viewBox=\"0 0 1024 1024\"><path d=\"M514.133333 488.533333m-106.666666 0a106.666667 106.666667 0 1 0 213.333333 0 106.666667 106.666667 0 1 0-213.333333 0Z\" fill=\"#666666\" ></path><path d=\"M512 64C264.533333 64 64 264.533333 64 512c0 236.8 183.466667 428.8 416 445.866667v-134.4c-53.333333-59.733333-200.533333-230.4-200.533333-334.933334 0-130.133333 104.533333-234.666667 234.666666-234.666666s234.666667 104.533333 234.666667 234.666666c0 61.866667-49.066667 153.6-145.066667 270.933334l-59.733333 68.266666V960C776.533333 942.933333 960 748.8 960 512c0-247.466667-200.533333-448-448-448z\" fill=\"#666666\" ></path></symbol></svg>',h=(h=document.getElementsByTagName(\"script\"))[h.length-1].getAttribute(\"data-injectcss\");if(h&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write(\"<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>\")}catch(t){console&&console.log(t)}}function d(){o||(o=!0,a())}c=function(){var t,c,l,a;(a=document.createElement(\"div\")).innerHTML=n,n=null,(l=a.getElementsByTagName(\"svg\")[0])&&(l.setAttribute(\"aria-hidden\",\"true\"),l.style.position=\"absolute\",l.style.width=0,l.style.height=0,l.style.overflow=\"hidden\",t=l,(c=document.body).firstChild?(a=t,(l=c.firstChild).parentNode.insertBefore(a,l)):c.appendChild(t))},document.addEventListener?~[\"complete\",\"loaded\",\"interactive\"].indexOf(document.readyState)?setTimeout(c,0):(l=function(){document.removeEventListener(\"DOMContentLoaded\",l,!1),c()},document.addEventListener(\"DOMContentLoaded\",l,!1)):document.attachEvent&&(a=c,e=t.document,o=!1,(i=function(){try{e.documentElement.doScroll(\"left\")}catch(t){return void setTimeout(i,50)}d()})(),e.onreadystatechange=function(){\"complete\"==e.readyState&&(e.onreadystatechange=null,d())})}(window);","import { LEFT, RIGHT, SIDE } from './const'\nimport {\n  isMobile,\n  addParentLink,\n  getObjById,\n  generateUUID,\n  generateNewObj,\n  generateNewSummaryObj,\n} from './utils/index'\nimport { findEle, createInputDiv, layout, Topic, createChildren, createGroup, createTop, createTopic, shapeTpc, createSummary } from './utils/dom'\nimport { createLinkSvg, createLine } from './utils/svg'\nimport {\n  selectNode,\n  unselectNode,\n  selectNextSibling,\n  selectPrevSibling,\n  selectFirstChild,\n  selectParent,\n  getAllDataString,\n  getAllData,\n  getAllDataWithAutoHide,\n  getAllDataMd,\n  scale,\n  toCenter,\n  focusNode,\n  cancelFocus,\n  initLeft,\n  initRight,\n  initSide,\n  setLocale,\n  enableEdit,\n  disableEdit,\n  expandNode,\n  refresh,\n  toTopLeft,\n} from './interact'\nimport {\n  insertSibling,\n  insertBefore,\n  insertParent,\n  addChild,\n  copyNode,\n  moveNode,\n  removeNode,\n  moveUpNode,\n  moveDownNode,\n  beginEdit,\n  updateNodeStyle,\n  updateNodeTags,\n  updateNodeIcons,\n  updateNodeHyperLink,\n  updateNodeRemark,\n  // updateNodeImage,\n  processPrimaryNode,\n  setNodeTopic,\n  moveNodeBefore,\n  moveNodeAfter,\n  addSummary,\n} from './nodeOperation'\nimport {\n  createLink,\n  removeLink,\n  selectLink,\n  hideLinkController,\n  showLinkController,\n} from './customLink'\nimport linkDiv from './linkDiv'\nimport initMouseEvent from './mouse'\n\nimport contextMenu from './plugin/contextMenu'\nimport toolBar from './plugin/toolBar'\nimport nodeMenu from './plugin/nodeMenu'\nimport sidebar from './plugin/sidebar'\nimport nodeDraggable from './plugin/nodeDraggable'\nimport keypress from './plugin/keypress'\nimport mobileMenu from './plugin/mobileMenu'\n\nimport Bus from './utils/pubsub'\n\nimport './index.less'\nimport './plugin/contextMenu.less'\nimport './plugin/toolBar.less'\nimport './plugin/nodeMenu.less'\nimport './plugin/sidebar.less'\nimport './plugin/mobileMenu.less'\n\nimport { exportSvg, exportSvgDom } from '../painter/index.foreignObject'\n\nimport './iconfont/iconfont.js'\nimport { node } from 'canvg/dist/presets'\n\n// TODO show up animation\nconst E = findEle\ntype LinkObj = object\ntype operation = {\n  name: string\n}\nexport interface NodeObj {\n  topic: string,\n  id: string,\n  style?: {\n    fontSize?: string,\n    color?: string,\n    background?: string,\n    fontWeight?: string,\n    width?:string,\n    controllWidth?:string\n  },\n  parent?: NodeObj,\n  children?: NodeObj[],\n  tags?: string[],\n  icons?: string[],\n  hyperLink?: string,\n  remark?:string,\n  image?:{\n    url:string,\n    width:number,\n    height?:number,\n  }[],\n  linkJump?:{\n    toId:string,\n    title:string\n  }[]\n  expanded?: boolean,\n  direction?: number,\n  root?: boolean,\n  type?:string\n}\n\nexport interface NodeElement extends HTMLElement {\n  nodeObj:Object\n}\nexport interface MindElixirData {\n  nodeData: NodeObj,\n  linkData?: LinkObj,\n  expandDeep?:number|null\n  direction?:number\n}\nexport interface MindElixirInstance {\n  mindElixirBox: HTMLElement,\n  nodeData: NodeObj,\n  linkData: LinkObj,\n  expandDeep:number|null\n  currentNode: Topic | null,\n  currentLink: SVGElement | null,\n  inputDiv: HTMLElement | null,\n  scaleVal: number,\n  tempDirection: number | null,\n  bus: object, // wip\n\n  // wip\n  history: operation[],\n  isUndo: boolean,\n  undo: () => void,\n\n  direction: number,\n  locale: string,\n  draggable: boolean,\n  editable: boolean,\n  contextMenu: boolean,\n  contextMenuOption: object,\n  toolBar: boolean,\n  nodeMenu: boolean,\n  keypress: boolean,\n  before: object,\n  newTopicName: string,\n  allowUndo: boolean,\n  overflowHidden: boolean,\n  primaryLinkStyle: number,\n  primaryNodeHorizontalGap: number,\n  primaryNodeVerticalGap: number,\n  mobileMenu: boolean,\n  closeButton:boolean,\n  widthControll:boolean,\n  uploadButton:boolean\n}\nexport interface Options {\n  el: string,\n  data: MindElixirData,\n  direction?: number,\n  locale?: string,\n  draggable?: boolean,\n  editable?: boolean,\n  contextMenu?: boolean,\n  contextMenuOption?: object,\n  toolBar?: boolean,\n  nodeMenu?: boolean,\n  keypress?: boolean,\n  before?: object,\n  newTopicName?: string,\n  allowUndo?: boolean,\n  overflowHidden?: boolean,\n  primaryLinkStyle?: number,\n  primaryNodeHorizontalGap?: number,\n  primaryNodeVerticalGap?: number,\n  mobileMenu?: boolean,\n  closeButton?:boolean,\n  //节点宽度调整\n  widthControll?:boolean,\n  //导入XMind文件\n  uploadButton?:boolean\n}\nconst $d = document\n/**\n * @export MindElixir\n * @example\n * let mind = new MindElixir({\n  el: '#map',\n  direction: 2,\n  data: data,\n  draggable: true,\n  editable: true,\n  contextMenu: true,\n  toolBar: true,\n  nodeMenu: true,\n  keypress: true,\n})\nmind.init()\n *\n */\nfunction MindElixir(this: MindElixirInstance, {\n  el,\n  data,\n  direction,\n  locale,\n  draggable,\n  editable,\n  contextMenu,\n  contextMenuOption,\n  toolBar,\n  nodeMenu,\n  keypress,\n  before,\n  newTopicName,\n  allowUndo,\n  primaryLinkStyle,\n  overflowHidden,\n  primaryNodeHorizontalGap,\n  primaryNodeVerticalGap,\n  mobileMenu,\n  closeButton,\n  widthControll,\n  uploadButton\n}: Options) {\n  const box = document.getElementById(el) as HTMLElement\n  if (!box) return\n  this.mindElixirBox = box\n  this.before = before || {}\n  this.nodeData = data.nodeData\n  this.linkData = data.linkData || {}\n  this.expandDeep=data?.expandDeep\n  this.locale = locale\n  this.contextMenuOption = contextMenuOption\n  this.contextMenu = contextMenu === undefined ? true : contextMenu\n  this.toolBar = toolBar === undefined ? true : toolBar\n  this.nodeMenu = nodeMenu === undefined ? true : nodeMenu\n  this.keypress = keypress === undefined ? true : keypress\n  this.closeButton = closeButton === undefined ? false : closeButton\n  this.widthControll = widthControll === undefined ? true : widthControll\n  this.mobileMenu = mobileMenu\n  // record the direction before enter focus mode, must true in focus mode, reset to null after exit focus\n  // todo move direction to data\n  this.direction = data.direction!==undefined?data.direction:(typeof direction === 'number' ? direction : 1)\n  this.draggable = draggable === undefined ? true : draggable\n  this.newTopicName = newTopicName\n  this.editable = editable === undefined ? true : editable\n  this.allowUndo = allowUndo === undefined ? true : allowUndo\n  // this.parentMap = {} // deal with large amount of nodes\n  this.currentNode = null // the selected <tpc/> element\n  this.currentLink = null // the selected link svg element\n  this.inputDiv = null // editor\n  this.scaleVal = 1\n  this.tempDirection = null\n  this.primaryLinkStyle = primaryLinkStyle || 0\n  this.overflowHidden = overflowHidden\n  this.primaryNodeHorizontalGap = primaryNodeHorizontalGap\n  this.primaryNodeVerticalGap = primaryNodeVerticalGap\n  this.uploadButton = uploadButton === undefined ? true : uploadButton\n\n  this.bus = new Bus()\n  ;(this.bus as any).addListener('operation', (operation: operation) => {\n    if (this.isUndo) {\n      this.isUndo = false\n      return\n    }\n    if (['moveNode', 'removeNode', 'addChild', 'finishEdit', 'editStyle', 'editTags', 'editIcons'].includes(\n      operation.name\n    )) {\n      this.history.push(operation)\n      // console.log(operation, this.history)\n    }\n  })\n\n  this.history = [] // TODO\n  this.isUndo = false\n  this.undo = function() {\n    const operation = this.history.pop()\n    if (!operation) return\n    this.isUndo = true\n    if (operation.name === 'moveNode') {\n      this.moveNode(\n        E(operation.obj.fromObj.id),\n        E(operation.obj.originParentId)\n      )\n    } else if (operation.name === 'removeNode') {\n      if (operation.originSiblingId) {\n        this.insertBefore(E(operation.originSiblingId), operation.obj)\n      } else {\n        this.addChild(E(operation.originParentId), operation.obj)\n      }\n    } else if (operation.name === 'addChild' || operation.name === 'copyNode') {\n      this.removeNode(E(operation.obj.id))\n    } else if (operation.name === 'finishEdit') {\n      this.setNodeTopic(E(operation.obj.id), operation.origin)\n    } else {\n      this.isUndo = false\n    }\n  }\n}\n\nfunction beforeHook(fn:(el:any, node?:any)=>void) {\n  return async function(...args:unknown[]) {\n    if (\n      !this.before[fn.name] ||\n      (await this.before[fn.name].apply(this, args))\n    ) {\n      fn.apply(this, args)\n    }\n  }\n}\n\nMindElixir.prototype = {\n  addParentLink,\n  getObjById,\n  generateNewObj,\n  generateNewSummaryObj,\n  // node operation\n  insertSibling: beforeHook(insertSibling),\n  insertBefore: beforeHook(insertBefore),\n  insertParent: beforeHook(insertParent),\n  addSummary:beforeHook(addSummary),\n  addChild: beforeHook(addChild),\n  copyNode: beforeHook(copyNode),\n  moveNode: beforeHook(moveNode),\n  removeNode: beforeHook(removeNode),\n  moveUpNode: beforeHook(moveUpNode),\n  moveDownNode: beforeHook(moveDownNode),\n  beginEdit: beforeHook(beginEdit),\n  moveNodeBefore: beforeHook(moveNodeBefore),\n  moveNodeAfter: beforeHook(moveNodeAfter),\n  updateNodeStyle,\n  updateNodeTags,\n  updateNodeIcons,\n  updateNodeHyperLink,\n  updateNodeRemark,\n  // updateNodeImage,\n  processPrimaryNode,\n  setNodeTopic,\n\n  createLink,\n  removeLink,\n  selectLink,\n  hideLinkController,\n  showLinkController,\n\n  layout,\n  linkDiv,\n  createInputDiv,\n  shapeTpc,\n  createChildren, createGroup, createTop, createTopic,createSummary,\n\n  selectNode,\n  unselectNode,\n  selectNextSibling,\n  selectPrevSibling,\n  selectFirstChild,\n  selectParent,\n  getAllDataString,\n  getAllData,\n  getAllDataWithAutoHide,\n  getAllDataMd,\n  scale,\n  toCenter,\n  toTopLeft,\n  focusNode,\n  cancelFocus,\n  initLeft,\n  initRight,\n  initSide,\n  setLocale,\n  enableEdit,\n  disableEdit,\n  expandNode,\n  refresh,\n  exportSvg,\n  exportSvgDom,\n  init: function(nodeData?:NodeObj,expandDeep?:number) {\n    /**\n     * @function\n     * @global\n     * @name E\n     * @param {string} id Node id.\n     * @return {TargetElement} Target element.\n     * @example\n     * E('bd4313fbac40284b')\n     */  \n    if(nodeData) this.nodeData=nodeData\n    if(expandDeep)this.expandDeep=expandDeep\n    addParentLink(this.nodeData)\n    console.log('ME_version ' + MindElixir.version)\n    console.log(this)\n    if(this.mindElixirBox.className.indexOf('mind-elixir')===-1)\n      this.mindElixirBox.className += ' mind-elixir'\n    this.mindElixirBox.innerHTML = ''\n\n    this.container = $d.createElement('div') // map container\n    this.container.className = 'map-container'\n\n    if (this.overflowHidden) this.container.style.overflow = 'hidden'\n\n    this.map = $d.createElement('div') // map-canvas Element\n    this.map.className = 'map-canvas'\n    this.map.setAttribute('tabindex', '0')\n    this.container.appendChild(this.map)\n    this.mindElixirBox.appendChild(this.container)\n    this.root = $d.createElement('root')\n\n    this.box = $d.createElement('children')\n    this.box.className = 'mindbox'\n\n    // infrastructure\n\n    this.svg2nd = createLinkSvg('svg2nd') // main link container\n\n    this.linkController = createLinkSvg('linkcontroller') // bezier controller container\n    this.P2 = $d.createElement('div') // bezier P2\n    this.P3 = $d.createElement('div') // bezier P3\n    this.P2.className = this.P3.className = 'circle'\n    this.line1 = createLine(0, 0, 0, 0) // bezier auxiliary line1\n    this.line2 = createLine(0, 0, 0, 0) // bezier auxiliary line2\n    this.linkController.appendChild(this.line1)\n    this.linkController.appendChild(this.line2)\n\n    this.linkSvgGroup = createLinkSvg('topiclinks') // storage user custom link svg\n\n    this.map.appendChild(this.root)\n    this.map.appendChild(this.box)\n    this.map.appendChild(this.svg2nd)\n    this.map.appendChild(this.linkController)\n    this.map.appendChild(this.linkSvgGroup)\n    this.map.appendChild(this.P2)\n    this.map.appendChild(this.P3)\n\n    // plugin\n    this.toolBar && toolBar(this)\n    this.nodeMenu && nodeMenu(this)\n    this.keypress && keypress(this)\n    sidebar(this)\n    if (isMobile() && this.mobileMenu) {\n      mobileMenu(this)\n    } else {\n      this.contextMenu && contextMenu(this, this.contextMenuOption)\n    }\n    this.draggable && nodeDraggable(this)\n\n    \n    this.layout()\n    this.linkDiv()\n    this.toTopLeft()\n    // if (!this.overflowHidden) initMouseEvent(this)\n    initMouseEvent(this)\n  },\n}\n\nMindElixir.LEFT = LEFT\nMindElixir.RIGHT = RIGHT\nMindElixir.SIDE = SIDE\n/**\n * @memberof MindElixir\n * @static\n */\nMindElixir.version = '0.17.0'\nMindElixir.E = findEle\n\n/**\n * @function new\n * @memberof MindElixir\n * @static\n * @param {String} topic root topic\n */\nMindElixir.new = (topic: string): MindElixirData => ({\n  nodeData: {\n    id: generateUUID(),\n    topic: topic || 'new topic',\n    root: true,\n    style: {\n      color: \"#ffffff\",\n      background: \"#00aaff\"\n    },\n    children: [],\n  },\n  linkData: {},\n})\n\nexport default MindElixir\n\n// export {exportSvg,exportPng} something wrong comes with the rollup"],"names":["$d","E","toolBar","nodeMenu","sidebar","mobileMenu","contextMenu"],"mappings":"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"}